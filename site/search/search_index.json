{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"index.html","title":"\ud83d\udc4b Welcome to LiuTianBa7 's Blog","text":""},{"location":"index.html#author-bio","title":"\ud83d\udc68\u200d\ud83d\udcbb \u5173\u4e8e\u6211 (Author Bio)","text":"\ud83c\udf93 \u5b66\u6821/\u4e13\u4e1a\uff1a\u4e1c\u5357\u5927\u5b66 \u00b7 \u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u6280\u672f \u00b7 \u7814 0 \ud83c\udfaf \u5173\u6ce8\u9886\u57df\uff1a\u6df1\u5ea6\u5b66\u4e60\u3001\u540e\u7aef\u5f00\u53d1 \u2615 Java \u751f\u6001\uff1a              \ud83d\udc0d Python &amp; AI\uff1a              \ud83d\udcbe \u57fa\u7840 &amp; \u4e2d\u8fdb\u4ef6\uff1a              \ud83c\udf10 \u524d\u7aef\u6280\u672f\uff1a              \ud83d\ude80 \u76ee\u6807\uff1a\u5927\u5382! \u5927\u5382! \u8fd8\u662f\u5927\u5382!"},{"location":"index.html#collections","title":"\ud83d\udcc2 \u672c\u7ad9\u6536\u5f55 (Collections)","text":"<ul> <li> <p> \u6280\u672f\u7b14\u8bb0</p> <p>\u6c47\u603b\u4e2a\u4eba\u5728 Code \u5b66\u4e60\u8def\u4e0a\u7684\u6240\u6709\u7b14\u8bb0\uff0c\u6db5\u76d6\u7b97\u6cd5\u3001\u6846\u67b6\u4e0e\u5b9e\u6218\u3002</p> </li> <li> <p> \u9762\u7ecf\u5fc3\u5f97</p> <p>\u6c89\u6dc0\u9762\u8bd5\u603b\u7ed3\u3001\u6838\u5fc3\u6e90\u7801\u7814\u8bfb\u53ca\u590d\u6742 Bug \u89e3\u51b3\u601d\u8def\u3002\u5728\u4e0d\u65ad\u590d\u76d8\u4e2d\u6784\u5efa\u5b8c\u5584\u7684\u5e95\u5c42\u77e5\u8bc6\u4f53\u7cfb\uff0c\u8bb0\u5f55\u6bcf\u4e00\u6b21\u6280\u672f\u7a81\u7834\u3002</p> </li> <li> <p> \u751f\u6d3b\u968f\u7b14</p> <p>\u8bb0\u5f55 2026 \u7684\u788e\u788e\u5ff5\uff0c\u5305\u62ec\u4e66\u5355\u3001\u5f71\u8bc4\u4e0e\u65c5\u884c\u611f\u609f\u3002</p> </li> <li> <p> \u9879\u76ee\u4f5c\u54c1</p> <p>\u5c55\u793a\u6211\u7684\u5f00\u6e90\u9879\u76ee\u4e0e\u4e2a\u4eba\u4f5c\u54c1\u96c6\u3002</p> </li> </ul>"},{"location":"index.html#connect-with-me","title":"\ud83d\udcec \u8054\u7cfb\u6211 (Connect With Me)","text":"<p>\u5982\u679c\u4f60\u6709\u4efb\u4f55\u95ee\u9898\u6216\u60f3\u4ea4\u4e2a\u670b\u53cb\uff0c\u6b22\u8fce\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8054\u7cfb\uff1a</p> <p> liutianba7@163.com | liutianba92@gmail.com Lqqqqqq123123</p>"},{"location":"java/springboot.html","title":"springboot","text":""},{"location":"java/springboot.html#springboot","title":"Springboot \u57fa\u7840","text":""},{"location":"java/springboot.html#1-spring-boot","title":"1. Spring Boot\u7684\u6982\u5ff5\u3001\u529f\u80fd","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0cSpring Boot \u80fd\u8ba9\u4f60\u5feb\u901f\u521b\u5efa\u3001\u914d\u7f6e\u548c\u8fd0\u884c Spring \u5e94\u7528\uff0c\u65e0\u9700\u624b\u52a8\u6dfb\u52a0\u5927\u91cf XML \u914d\u7f6e\u6216\u7e41\u7410\u7684\u4f9d\u8d56\u7ba1\u7406\u3002\u4ee5\u524d\u7528 Spring \u5199 Web \u9879\u76ee\uff0c\u8981\u914d <code>web.xml</code>\u3001Dispatcher Serverlet\u3001Spring \u5bb9\u5668\u2026\u2026\u4e00\u5927\u5806\u914d\u7f6e\u3002 </p> <p>\u73b0\u5728\u7528 Spring Boot\uff0c\u4f60\u53ea\u9700\u8981\uff1a</p> <ol> <li>\u52a0\u4e2a <code>spring-boot-starter-web</code> \u4f9d\u8d56\uff0c</li> <li>\u5199\u4e2a <code>@SpringBootApplication</code> \u6ce8\u89e3\u7684\u4e3b\u7c7b\uff0c</li> <li>\u8fd0\u884c <code>main</code> \u65b9\u6cd5 \u2014\u2014 \u9879\u76ee\u5c31\u8dd1\u8d77\u6765\u4e86\uff01</li> </ol>"},{"location":"java/springboot.html#2","title":"2. \u573a\u666f\u542f\u52a8\u5668","text":"<p>Starters are a set of convenient dependency descriptors that you can include in your application. You get a one-stop shop for all the Spring and related technologies that you need without having to hunt through sample code and copy-paste loads of dependency descriptors. For example, if you want to get started using Spring and JPA for database access, include the <code>spring-boot-starter-data-jpa</code> dependency in your project.</p> <p>\u542f\u52a8\u5668\u662f\u4e00\u7ec4\u65b9\u4fbf\u7684\u4f9d\u8d56\u9879\u63cf\u8ff0\u7b26\uff0c\u60a8\u53ef\u4ee5\u5c06\u5176\u5305\u542b\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002\u60a8\u53ef\u4ee5\u5728\u4e00\u4e2a\u5730\u65b9\u83b7\u53d6\u6240\u6709\u9700\u8981\u7684 Spring \u53ca\u76f8\u5173\u6280\u672f\uff0c\u800c\u65e0\u9700\u5728\u793a\u4f8b\u4ee3\u7801\u4e2d\u641c\u5bfb\u5e76\u590d\u5236\u7c98\u8d34\u5927\u91cf\u7684\u4f9d\u8d56\u9879\u63cf\u8ff0\u7b26\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u5f00\u59cb\u4f7f\u7528 Spring \u548c JPA \u8fdb\u884c\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u8bf7\u5728\u9879\u76ee\u4e2d\u5305\u542b <code>spring-boot-starter-data-jpa</code> \u4f9d\u8d56\u9879\u3002</p> <p>The starters contain a lot of the dependencies that you need to get a project up and running quickly and with a consistent, supported set of managed transitive dependencies.</p> <p>\u8fd9\u4e9b\u542f\u52a8\u5668\u5305\u542b\u5927\u91cf\u60a8\u9700\u8981\u7684\u4f9d\u8d56\u9879\uff0c\u80fd\u8ba9\u60a8\u5feb\u901f\u542f\u52a8\u9879\u76ee\uff0c\u5e76\u4e14\u62e5\u6709\u4e00\u5957\u4e00\u81f4\u4e14\u53d7\u652f\u6301\u7684\u53d7\u7ba1\u4f20\u9012\u4f9d\u8d56\u9879\u3002</p>"},{"location":"java/springboot.html#3","title":"3.  \u81ea\u52a8\u914d\u7f6e","text":""},{"location":"java/springboot.html#31","title":"3.1 \u6982\u5ff5","text":"<p>Spring Boot \u81ea\u52a8\u914d\u7f6e\u662f\u6307\uff1a\u5728 Spring \u5bb9\u5668\u542f\u52a8\u65f6\uff0c\u57fa\u4e8e\u9879\u76ee\u4e2d\u6dfb\u52a0\u7684\u4f9d\u8d56\uff08Classpath \u91cc\u7684 Jar \u5305\uff09\u548c\u914d\u7f6e\uff0c\u81ea\u52a8\u5c06\u9700\u8981\u7684 Bean \u5bf9\u8c61\u88c5\u914d\u8fdb IOC \u5bb9\u5668\uff0c\u4ece\u800c\u5b9e\u73b0\u201c\u7ea6\u5b9a\u5927\u4e8e\u914d\u7f6e\u201d\uff0c\u514d\u53bb\u624b\u52a8\u7f16\u5199\u5927\u91cf\u7e41\u7410 XML \u6216 Java \u914d\u7f6e\u6587\u4ef6\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"java/springboot.html#32","title":"3.2 \u6838\u5fc3\u6d41\u7a0b","text":"<ol> <li>\u521b\u5efa\u9879\u76ee</li> <li>\u9009\u62e9\u573a\u666f\u542f\u52a8\u5668</li> <li>\u573a\u666f\u542f\u52a8\u5668\u4e00\u5bfc\u5165\uff0c\u5c31\u4eceMETA-INF/spring.org.springframework.boot.autoconfigure .AutoConfiguration.imports\u4e0b\u9762\u5bfc\u5165\u4e00\u5806\u81ea\u52a8\u914d\u7f6e\u7c7b\u5230spring\u5bb9\u5668\u4e2d\u3002</li> <li>\u8fd9\u4e9b xxxAutoConfiguration \u57fa\u4e8e @Conditional \u6ce8\u89e3\u6709\u5bfc\u5165\u4e86\u4e00\u5806\u7684\u7ec4\u4ef6</li> <li>\u4e4b\u540e\u4e1a\u52a1\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u7ec4\u4ef6\u4e86</li> </ol>"},{"location":"java/springboot.html#33-datasourceautoconfiguration","title":"3.3 DataSourceAutoConfiguration \u7684\u5bfc\u5165\u6d41\u7a0b","text":"<pre><code>6. \u5728\u4f7f\u7528\u4e4b\u524d\uff0c\u81ea\u52a8\u914d\u7f6e\u7c7b\u628a\u7ec4\u4ef6\u914d\u7f6e\u5230\u5bb9\u5668\u4e2d\uff0c\u8981\u505a\u4e24\u4ef6\u4e8b\n\n    6.1\u628a\u5c5e\u6027\u7c7b\u548c\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u7ed1\u5b9a\n    6.2\uff1a\u628a\u7ec4\u4ef6\u8981\u7528\u5230\u7684\u6240\u6709\u5c5e\u6027\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u5c5e\u6027\u7c7b\u653e\u5230\u5bb9\u5668\u4e2d\n</code></pre>"},{"location":"java/springboot.html#4","title":"4. \u5e38\u7528\u57fa\u672c\u529f\u80fd","text":""},{"location":"java/springboot.html#1-configurationproperties","title":"1. \u5c5e\u6027\u7ed1\u5b9a @ConfigurationProperties","text":"<pre><code>@Data\n@Component\n@ConfigurationProperties(prefix = \"dog\")\npublic class DogProperties {\n    private String name;    private String age;\n    private String sex;\n}\n\n// \u914d\u7f6e\u6587\u4ef6\ndog:\n  age: 18\n  name: \u65fa\u8d22\n  sex: \u96c4\u6027\n</code></pre>"},{"location":"java/springboot.html#2-yaml","title":"2. yaml\u8bed\u6cd5","text":"<pre><code>1.  yaml\u8bed\u6cd5\u90fd\u662f key : value\n2.  \u4e00\u4e2a\u5bf9\u8c61\u5c31\u662f\u591a\u4e2a key : value, \u4e5f\u53ef\u4ee5\u7528: {name: \u5c0f\u54aa, age: 18}  \u8868\u793a\n3.  \u6570\u636e\u53ef\u4ee5\u7528[i1, i2, i3]\u8868\u793a,\u4e5f\u53ef\u4ee5\u7528 - i1, -i2 \u8868\u793a\n\n\u6ce8:\u5982\u679c\u540c\u65f6\u5b58\u5728.properties\u4e0e.yaml,\u4f18\u5148\u4f7f\u7528.properties\u4e0b\u7684\u914d\u7f6e\n</code></pre> <pre><code>person:  \n  name: \u674e\u56db  \n  age: 18  \n  birthday: 2019/01/01 00:00:00  \n  like: true  \n  child:  \n    name: \u5f20\u4e09  \n    age: 10  \n    birthday: 2018/01/01 00:00:00  \n  dogs:  \n    - name: \u65fa\u8d22  \n      age: 18  \n    - name: \u65fa\u8d222  \n      age: 18  \n  cats:  \n    cat1:  \n      {name: \u5c0f\u54aa, age: 18}  \n    cat2:  \n      {name: \u5c0f\u54aa2, age: 18}\n</code></pre>"},{"location":"java/springboot.html#3-banner","title":"3. \u81ea\u5b9a\u4e49banner","text":"<p>\u901a\u8fc7\u4fee\u6539 spring.banner.location=classpath:banner.txt \u53bb\u81ea\u5b9a\u4e49bannner</p>"},{"location":"java/springboot.html#4-springapplication","title":"4. \u542f\u52a8 SpringApplication \u7684\u5176\u4ed6\u65b9\u6cd5","text":"<p>\u7b2c\u4e00\u79cd\u5c31\u662f\u5148\u628a SpringApplication \u5bf9\u8c61\u5b9e\u4f8b\u5316\u51fa\u6765,\u7136\u540e\u8c03\u7528\u5b83\u7684run\u65b9\u6cd5,\u8fd9\u6837\u7684\u597d\u5904\u662f\u53ef\u4ee5\u505a\u4e00\u4e9b\u914d\u7f6e.</p> <pre><code>public static void main(String[] args) {  \n\n       // 1. \u521b\u5efaSpringApplication\u5bf9\u8c61  \n       SpringApplication app = new SpringApplication(SpringbootDemoApplication.class);  \n\n       // 2. \u914d\u7f6e  \n       app.setBannerMode(Banner.Mode.OFF);  \n\n       // 3. \u542f\u52a8SpringApplication\u5bf9\u8c61  \n       app.run(args);  \n   }\n</code></pre> <p>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u5c31\u662f\u901a\u8fc7 SpringApplicationBuilder \u6765\u94fe\u5f0f\u542f\u52a8 Spring \u5e94\u7528.</p> <pre><code>builder.sources(SpringbootDemoApplication.class)  \n        .bannerMode(Banner.Mode.OFF)  \n        .run(args);\n</code></pre>"},{"location":"java/springboot.html#5","title":"5. \u65e5\u5fd7","text":"<p>\u65e5\u5fd7\u7cfb\u7edf\u63cf\u8ff0:</p> <p> </p>"},{"location":"java/springboot.html#51","title":"5.1 \u65e5\u5fd7\u7684\u7ea7\u522b","text":"<p>\u4ece\u4f4e\u5230\u9ad8,\u8d8a\u6253\u5370,\u8d8a\u7c97\u7cd9.\u65e5\u5fd7\u7684\u9ed8\u8ba4\u7ea7\u522b(info),\u53ea\u4f1a\u6253\u5370\u65e5\u5fd7\u7ea7\u522b\u53ca\u5176\u4ee5\u4e0a\u7684\u65e5\u5fd7.</p> <p>All --&gt; Trace --&gt; DEBUG --&gt; INFO --&gt; WARN --&gt; ERROR --&gt; OFF</p> <pre><code>logging.level.root=debug\nlogging.level.xx\u5305\u7684\u5168\u7c7b\u540d=xx\u7ea7\u522b\n</code></pre>"},{"location":"java/springboot.html#52","title":"5.2 \u65e5\u5fd7\u7684\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u9996\u5148\uff0c\u5148\u5bfc\u5165\u65e5\u5fd7\u7684\u573a\u666f\u542f\u52a8\u5668</p> <pre><code>&lt;dependency&gt;  \n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;  \n&lt;/dependency&gt;\n</code></pre> <p>\u65b9\u6cd51 : \u76f4\u63a5\u901a\u8fc7\u65e5\u5fd7\u5de5\u5382\u83b7\u5f97\u4e00\u4e2a\u5de5\u5382\u7c7b</p> <pre><code>@SpringBootTest  \npublic class LoggingTest {  \n\n    // \u83b7\u5f97\u4e00\u4e2a\u65e5\u5fd7  \n    Logger logger = LoggerFactory.getLogger(LoggingTest.class);  \n\n    @Test  \n    public void test01(){  \n        logger.trace(\"trace...\");  \n        logger.debug(\"debug...\");  \n        logger.info(\"info...\");  \n        logger.warn(\"warn...\");  \n        logger.error(\"error...\");  \n    }  \n}\n</code></pre> <p>\u65b9\u6cd52 : lombok\u7684 @Slf4j \u6ce8\u89e3\u4f1a\u81ea\u52a8\u6ce8\u518c\u5e76\u6ce8\u5165\u4e00\u4e2a\u65e5\u5fd7\u7c7b,\u540d\u5b57\u4e3alog,\u6211\u4eec\u76f4\u63a5\u8c03log\u5c31\u53ef\u4ee5.</p> <pre><code>@Slf4j  \n@SpringBootTest  \npublic class LoggingTest {  \n\n    @Test  \n    public void test01(){  \n        log.trace(\"trace...\");  \n        log.debug(\"debug...\");  \n        log.info(\"info...\");  \n        log.warn(\"warn...\");  \n        log.error(\"error...\");  \n    }  \n}\n</code></pre>"},{"location":"java/springboot.html#53","title":"5.3 \u65e5\u5fd7\u5206\u7ec4","text":"<p>\u65e5\u5fd7\u5206\u7ec4\u80fd\u591f\u66f4\u52a0\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\u4e0d\u540c\u5305,\u4e0d\u540c\u7c7b\u7684\u65e5\u5fd7\u7ea7\u522b,\u4e5f\u5c31\u662f\u5bf9\u6bcf\u4e00\u7ec4\u7edf\u4e00\u6765\u63a7\u5236\u7ea7\u522b</p> <pre><code>logging.group.group1=\u5168\u7c7b\u540d1,\u5168\u7c7b\u540d2,...\n</code></pre>"},{"location":"java/springboot.html#54","title":"5.4 \u65e5\u5fd7\u8f93\u51fa\u5230\u6587\u4ef6","text":""},{"location":"java/springboot.html#55","title":"5.5 \u65e5\u5fd7\u5f52\u6863\u4e0e\u6eda\u52a8\u5207\u5272","text":"<p>Spring Boot \u9879\u76ee\u4e2d\u901a\u8fc7 <code>application.yml</code> \u6216 <code>application.properties</code> \u914d\u7f6e Logback \u7684\u65e5\u5fd7\u6eda\u52a8\u7b56\u7565\uff0c\u5b9e\u73b0\u65e5\u5fd7\u6587\u4ef6\u7684\u81ea\u52a8\u5207\u5272\u4e0e\u5f52\u6863\u3002</p> \u914d\u7f6e\u9879 \u8bf4\u660e \u63a8\u8350\u503c/\u793a\u4f8b <code>logging.logback.rollingpolicy.clean-history-on-start</code> \u662f\u5426\u5728\u5e94\u7528\u542f\u52a8\u65f6\u6e05\u7406\u65e7\u7684\u65e5\u5fd7\u5f52\u6863\u6587\u4ef6 <code>false</code>\uff08\u5efa\u8bae\u8bbe\u4e3a <code>false</code>\uff0c\u907f\u514d\u8bef\u5220\u5386\u53f2\u65e5\u5fd7\uff09 <code>logging.logback.rollingpolicy.file-name-pattern</code> \u5f52\u6863\u65e5\u5fd7\u6587\u4ef6\u7684\u547d\u540d\u683c\u5f0f <code>app-%d{yyyy-MM-dd}.log</code>\uff08\u6309\u5929\u5207\u5272\uff09 <code>logging.logback.rollingpolicy.max-file-size</code> \u5355\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5927\u5c0f\uff0c\u8d85\u8fc7\u5219\u89e6\u53d1\u6eda\u52a8 <code>2MB</code>\uff08\u53ef\u6839\u636e\u9879\u76ee\u65e5\u5fd7\u91cf\u8c03\u6574\uff09 <code>logging.logback.rollingpolicy.max-history</code> \u4fdd\u7559\u5f52\u6863\u65e5\u5fd7\u6587\u4ef6\u7684\u6700\u5927\u5929\u6570\uff08\u6216\u6570\u91cf\uff09 <code>7</code>\uff08\u4fdd\u7559\u6700\u8fd17\u5929\u7684\u65e5\u5fd7\uff09 <p>\u914d\u7f6e\u6f14\u793a:</p> <pre><code>logging:\n  logback:\n    rollingpolicy:\n      # \u662f\u5426\u5728\u5e94\u7528\u542f\u52a8\u65f6\u5220\u9664\u65e7\u7684\u5f52\u6863\u65e5\u5fd7\n      clean-history-on-start: false\n\n      # \u5f52\u6863\u65e5\u5fd7\u6587\u4ef6\u540d\u683c\u5f0f\uff1a\u6309\u65e5\u671f\u5207\u5272\n      file-name-pattern: app-%d{yyyy-MM-dd}.log\n\n      # \u6bcf\u4e2a\u65e5\u5fd7\u6587\u4ef6\u6700\u5927 2MB\uff0c\u8d85\u8fc7\u5219\u521b\u5efa\u65b0\u6587\u4ef6\n      max-file-size: 2MB\n\n      # \u6700\u591a\u4fdd\u7559 7 \u5929\u7684\u5386\u53f2\u65e5\u5fd7\u6587\u4ef6\n      max-history: 7\n</code></pre>"},{"location":"java/springboot.html#56","title":"5.6 \u5f15\u5165\u65e5\u5fd7\u6846\u67b6\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;  \n&lt;configuration&gt;  \n\n    &lt;contextName&gt;logback&lt;/contextName&gt;  \n\n    &lt;!-- \u65e5\u5fd7\u7684\u8f93\u51fa\u76ee\u5f55 --&gt;  \n    &lt;property name=\"log.path\" value=\"D://work//tingshu_work//logs\" /&gt;  \n\n    &lt;!--\u63a7\u5236\u53f0\u65e5\u5fd7\u683c\u5f0f\uff1a\u5f69\u8272\u65e5\u5fd7--&gt;  \n    &lt;!-- magenta:\u6d0b\u7ea2 --&gt;  \n    &lt;!-- boldMagenta:\u7c97\u7ea2--&gt;  \n    &lt;!-- cyan:\u9752\u8272 --&gt;  \n    &lt;!-- white:\u767d\u8272 --&gt;  \n    &lt;!-- magenta:\u6d0b\u7ea2 --&gt;  \n    &lt;property name=\"CONSOLE_LOG_PATTERN\"  \n              value=\"%yellow(%date{yyyy-MM-dd HH:mm:ss}) %highlight([%-5level]) %green(%logger) %msg%n\"/&gt;  \n\n    &lt;!--\u6587\u4ef6\u65e5\u5fd7\u683c\u5f0f--&gt;  \n    &lt;property name=\"FILE_LOG_PATTERN\"  \n              value=\"%date{yyyy-MM-dd HH:mm:ss} [%-5level] %thread %file:%line %logger %msg%n\" /&gt;  \n\n    &lt;!--\u7f16\u7801--&gt;  \n    &lt;property name=\"ENCODING\" value=\"UTF-8\" /&gt;  \n\n    &lt;!-- \u63a7\u5236\u53f0\u65e5\u5fd7 --&gt;  \n    &lt;appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;  \n        &lt;!-- \u4e34\u754c\u503c\u8fc7\u6ee4\u5668 --&gt;  \n        &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;  \n            &lt;level&gt;INFO&lt;/level&gt;  \n        &lt;/filter&gt;        &lt;encoder&gt;            &lt;pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/pattern&gt;  \n            &lt;charset&gt;${ENCODING}&lt;/charset&gt;  \n        &lt;/encoder&gt;    &lt;/appender&gt;  \n    &lt;!-- \u6587\u4ef6\u65e5\u5fd7 --&gt;  \n    &lt;appender name=\"FILE\" class=\"ch.qos.logback.core.FileAppender\"&gt;  \n        &lt;file&gt;${log.path}//log.log&lt;/file&gt;  \n        &lt;append&gt;true&lt;/append&gt;  \n        &lt;encoder&gt;            &lt;pattern&gt;%date{yyyy-MM-dd HH:mm:ss} %msg%n&lt;/pattern&gt;  \n            &lt;charset&gt;${ENCODING}&lt;/charset&gt;  \n        &lt;/encoder&gt;    &lt;/appender&gt;  \n    &lt;!-- logstash\u65e5\u5fd7 --&gt;  \n&lt;!--    &lt;appender name=\"LOGSTASH\" class=\"net.logstash.logback.appender.LogstashTcpSocketAppender\"&gt;--&gt;  \n&lt;!--        &amp;lt;!&amp;ndash; logstash ip\u548c\u66b4\u9732\u7684\u7aef\u53e3\uff0clogback\u5c31\u662f\u901a\u8fc7\u8fd9\u4e2a\u5730\u5740\u628a\u65e5\u5fd7\u53d1\u9001\u7ed9logstash &amp;ndash;&amp;gt;--&gt;  \n&lt;!--        &lt;destination&gt;139.198.127.41:8044&lt;/destination&gt;--&gt;  \n&lt;!--        &lt;encoder charset=\"UTF-8\" class=\"net.logstash.logback.encoder.LogstashEncoder\" /&gt;--&gt;  \n&lt;!--    &lt;/appender&gt;--&gt;  \n\n    &lt;!-- \u5f00\u53d1\u73af\u5883 --&gt;  \n    &lt;springProfile name=\"dev\"&gt;  \n        &lt;!-- com.atguigu\u65e5\u5fd7\u8bb0\u5f55\u5668\uff1a\u4e1a\u52a1\u7a0b\u5e8fINFO\u7ea7\u522b  --&gt;  \n        &lt;logger name=\"com.atguigu\" level=\"INFO\" /&gt;  \n        &lt;!-- \u6839\u65e5\u5fd7\u8bb0\u5f55\u5668\uff1aINFO\u7ea7\u522b  --&gt;  \n        &lt;root level=\"INFO\"&gt;  \n            &lt;appender-ref ref=\"CONSOLE\" /&gt;  \n&lt;!--            &lt;appender-ref ref=\"FILE\" /&gt;--&gt;  \n        &lt;/root&gt;  \n    &lt;/springProfile&gt;  \n&lt;/configuration&gt;\n</code></pre>"},{"location":"java/springboot.html#57","title":"5.7 \u603b\u7ed3","text":"<p>\u5728\u6211\u4eec\u4f7f\u7528\u65e5\u5fd7\u65f6,\u6b65\u9aa4\u53ef\u4ee5\u603b\u7ed3\u4e3a\u4e0b: 1. \u5982\u679c\u4e0d\u9700\u8981\u5207\u6362\u5e95\u5c42\u65e5\u5fd7\u6846\u67b6logback,\u5c31\u53ef\u4ee5\u76f4\u63a5\u53bb\u5199\u914d\u7f6e\u6587\u4ef6\u4e86,\u5305\u62ec\u65e5\u5fd7\u7ea7\u522b 2. \u8bb0\u5f55\u65e5\u5fd7:\u5728\u5408\u9002\u7684\u65f6\u95f4,\u5408\u9002\u7684\u7ea7\u522b\u8bb0\u5f55\u65e5\u5fd7\u5c31\u53ef\u4ee5\u4e86 --&gt; log.info|log.debug</p>"},{"location":"java/springboot.html#spring-boot","title":"Spring Boot \u7684\u8fdb\u9636\u4f7f\u7528","text":""},{"location":"java/springboot.html#1-profiles","title":"1. Profiles \u73af\u5883\u9694\u79bb","text":"<p>\u4e3a\u9879\u76ee\u8bbe\u7acb\u591a\u4e2a\u73af\u5883\uff08\u5982\u5f00\u53d1 <code>dev</code>\u3001\u6d4b\u8bd5 <code>test</code>\u3001\u751f\u4ea7 <code>prod</code>\uff09\uff0c\u5b9e\u73b0\u4e0d\u540c\u73af\u5883\u4e0b\u914d\u7f6e\u7684\u5feb\u901f\u5207\u6362\u3002</p> <p>\u5b9e\u73b0\u6d41\u7a0b:</p> <ol> <li> <p>\u5b9a\u4e49\u4e0d\u540c\u73af\u5883\uff1a\u521b\u5efa\u7279\u5b9a\u4e8e\u73af\u5883\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u547d\u540d\u683c\u5f0f\u4e3a application-{profile}.properties \u6216 application-{profile}.yml\u3002</p> <ul> <li>application-dev.yml(\u5f00\u53d1\u73af\u5883)</li> <li>application-test.yml(\u6d4b\u8bd5\u73af\u5883)</li> <li>application-prod.yml(\u751f\u4ea7\u73af\u5883</li> </ul> </li> <li> <p>\u6307\u5b9a\u73af\u5883\u7279\u5b9a\u7684\u914d\u7f6e\uff1a\u5728 application-{profile}.yml \u6587\u4ef6\u4e2d\uff0c\u914d\u7f6e\u8be5\u73af\u5883\u4e0b\u7279\u6709\u7684\u5c5e\u6027\uff08\u5982\u6570\u636e\u5e93\u8fde\u63a5\u3001\u65e5\u5fd7\u7ea7\u522b\u3001\u670d\u52a1\u5730\u5740\u7b49\uff09\u3002\u53ef\u4ee5\u5728\u8fd9\u4e9b\u6587\u4ef6\u4e2d\u5b9a\u4e49\u6216\u8986\u76d6\u5728\u4e3b\u914d\u7f6e\u6587\u4ef6\u4e2d\u58f0\u660e\u7684Bean\u3002</p> </li> <li> <p>\u6fc0\u6d3b\u6307\u5b9a\u73af\u5883\uff1a\u5728\u4e3b\u914d\u7f6e\u6587\u4ef6 application.yml (\u6216 application.properties) \u4e2d\uff0c\u901a\u8fc7 spring.profiles.active \u5c5e\u6027\u6765\u6fc0\u6d3b\u67d0\u4e2a\u73af\u5883\u3002</p> </li> </ol> <p><pre><code>spring:\n    profiles:\n        active: dev # \u6fc0\u6d3b\u5f00\u53d1\u73af\u5883\u914d\u7f6e\n</code></pre> \u4e5f\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u53c2\u6570\u3001\u73af\u5883\u53d8\u91cf\u7b49\u65b9\u5f0f\u6fc0\u6d3b\uff0c\u4f8b\u5982\uff1a</p> <ul> <li> <p>\u547d\u4ee4\u884c\uff1ajava -jar myapp.jar --spring.profiles.active=prod    </p> </li> <li> <p>\u73af\u5883\u53d8\u91cf\uff1aSPRING_PROFILES_ACTIVE=prod</p> </li> </ul>"},{"location":"java/springboot.html#2_1","title":"2. \u5355\u5143\u6d4b\u8bd5","text":""},{"location":"java/springboot.html#21","title":"2.1 \u4e00\u4e9b\u5e38\u7528\u7684\u65b9\u6cd5","text":"<p>\u2705 \u63d0\u793a\uff1a\u4f18\u5148\u4f7f\u7528 <code>@DisplayName</code> \u63d0\u5347\u6d4b\u8bd5\u53ef\u8bfb\u6027\uff1b\u5408\u7406\u4f7f\u7528 <code>@Tag</code> \u5b9e\u73b0\u6d4b\u8bd5\u5206\u7ec4\u3002</p> \u6ce8\u89e3 \u8bf4\u660e <code>@Test</code> \u6807\u8bb0\u4e3a\u6d4b\u8bd5\u65b9\u6cd5 <code>@ParameterizedTest</code> \u652f\u6301\u53c2\u6570\u5316\u6d4b\u8bd5 <code>@RepeatedTest</code> \u65b9\u6cd5\u53ef\u91cd\u590d\u6267\u884c\u6307\u5b9a\u6b21\u6570 <code>@DisplayName</code> \u8bbe\u7f6e\u6d4b\u8bd5\u7c7b\u6216\u65b9\u6cd5\u7684\u5c55\u793a\u540d\u79f0 <code>@BeforeEach</code> \u6bcf\u4e2a\u6d4b\u8bd5\u524d\u6267\u884c\uff08\u5982\u521d\u59cb\u5316\uff09 <code>@AfterEach</code> \u6bcf\u4e2a\u6d4b\u8bd5\u540e\u6267\u884c\uff08\u5982\u6e05\u7406\u8d44\u6e90\uff09 <code>@BeforeAll</code> \u6240\u6709\u6d4b\u8bd5\u524d\u6267\u884c\u4e00\u6b21\uff08\u9700 static\uff09 <code>@AfterAll</code> \u6240\u6709\u6d4b\u8bd5\u540e\u6267\u884c\u4e00\u6b21\uff08\u9700 static\uff09 <code>@Tag</code> \u4e3a\u6d4b\u8bd5\u6253\u6807\u7b7e\uff0c\u7528\u4e8e\u5206\u7c7b\u7b5b\u9009 <code>@Disabled</code> \u8df3\u8fc7\u8be5\u6d4b\u8bd5\uff08\u7c7b\u4f3c @Ignore\uff09 <code>@Timeout</code> \u8bbe\u7f6e\u8d85\u65f6\u65f6\u95f4\uff0c\u8d85\u8fc7\u5219\u5931\u8d25 <code>@ExtendWith</code> \u5f15\u5165\u6269\u5c55\u7c7b\uff0c\u652f\u6301\u81ea\u5b9a\u4e49\u884c\u4e3a"},{"location":"java/springboot.html#22","title":"2.2 \u65ad\u8a00\u673a\u5236","text":"<p>\u65ad\u8a00\u7528\u4e8e\u9a8c\u8bc1\u6d4b\u8bd5\u7ed3\u679c\u662f\u5426\u7b26\u5408\u9884\u671f\uff0c\u662f\u5355\u5143\u6d4b\u8bd5\u7684\u6838\u5fc3\u3002</p>"},{"location":"java/springboot.html#1-orgjunitjupiterapiassertions","title":"1. \u5e38\u7528\u65ad\u8a00\u65b9\u6cd5\uff08<code>org.junit.jupiter.api.Assertions</code>\uff09","text":"\u65b9\u6cd5 \u8bf4\u660e <code>assertEquals(expected, actual)</code> \u68c0\u67e5\u4e24\u503c\u662f\u5426\u76f8\u7b49 <code>assertNotEquals(unexpected, actual)</code> \u68c0\u67e5\u4e24\u503c\u662f\u5426\u4e0d\u76f8\u7b49 <code>assertTrue(condition)</code> \u68c0\u67e5\u6761\u4ef6\u662f\u5426\u4e3a\u771f <code>assertFalse(condition)</code> \u68c0\u67e5\u6761\u4ef6\u662f\u5426\u4e3a\u5047 <code>assertNull(object)</code> \u68c0\u67e5\u5bf9\u8c61\u662f\u5426\u4e3a null <code>assertNotNull(object)</code> \u68c0\u67e5\u5bf9\u8c61\u662f\u5426\u4e0d\u4e3a null <code>assertArrayEquals(expectedArray, actualArray)</code> \u68c0\u67e5\u6570\u7ec4\u662f\u5426\u76f8\u7b49 <code>assertThrows(Exception.class, () -&gt; { ... })</code> \u9a8c\u8bc1\u662f\u5426\u629b\u51fa\u6307\u5b9a\u5f02\u5e38 <code>assertTimeout(Duration.ofSeconds(1), () -&gt; { ... })</code> \u9a8c\u8bc1\u4ee3\u7801\u5757\u662f\u5426\u5728\u89c4\u5b9a\u65f6\u95f4\u5185\u6267\u884c <code>assertAll(\"group\", () -&gt; { ... })</code> \u5206\u7ec4\u65ad\u8a00\uff0c\u53ef\u6267\u884c\u591a\u4e2a\u65ad\u8a00\u5e76\u6536\u96c6\u6240\u6709\u5931\u8d25\u4fe1\u606f"},{"location":"java/springboot.html#2_2","title":"2. \u9ad8\u7ea7\u7279\u6027","text":"<ul> <li> <p>\u6d88\u606f\u5ef6\u8fdf\u52a0\u8f7d\uff1a   <code>assertEquals(expected, actual, () -&gt; \"\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\")</code>   \u53ea\u6709\u65ad\u8a00\u5931\u8d25\u65f6\u624d\u4f1a\u751f\u6210\u6d88\u606f\uff0c\u63d0\u5347\u6027\u80fd\u3002</p> </li> <li> <p>\u5206\u7ec4\u65ad\u8a00\uff08Grouped Assertions\uff09\uff1a <pre><code>  assertAll(\"\u7528\u6237\u4fe1\u606f\u6821\u9a8c\",\n      () -&gt; assertEquals(\"Tom\", user.getName()),\n      () -&gt; assertEquals(25, user.getAge()),\n      () -&gt; assertNotNull(user.getId())\n</code></pre></p> </li> </ul>"},{"location":"java/springboot.html#3-actuator","title":"3. Actuator","text":"<p>\u901a\u8fc7\u5bfc\u5165 <code>spring-boot-starter-actuator</code> \u573a\u666f\u542f\u52a8\u5668\uff0c\u53ef\u4ee5\u8f7b\u677e\u76d1\u63a7\u548c\u7ba1\u7406 Spring Boot \u5e94\u7528\u7684\u8fd0\u884c\u72b6\u6001\u3002</p>"},{"location":"java/springboot.html#31_1","title":"3.1 \u529f\u80fd","text":"<ul> <li>\u63d0\u4f9b\u751f\u4ea7\u7ea7\u7684\u76d1\u63a7\u7aef\u70b9\uff08endpoints\uff09\uff0c\u7528\u4e8e\u89c2\u6d4b\u5e94\u7528\u5065\u5eb7\u3001\u6307\u6807\u3001\u73af\u5883\u7b49\u4fe1\u606f\u3002</li> <li>\u652f\u6301\u4e0e\u5916\u90e8\u7cfb\u7edf\u96c6\u6210\uff08\u5982 Prometheus\u3001Grafana\u3001Zipkin \u7b49\uff09\u3002</li> </ul>"},{"location":"java/springboot.html#32_1","title":"3.2 \u4f7f\u7528\u6b65\u9aa4","text":"<ol> <li>\u6dfb\u52a0\u4f9d\u8d56\uff08Maven\uff09 <pre><code>   &lt;dependency&gt;\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n       &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n</code></pre></li> <li>\u8bbf\u95ee\u5185\u7f6e\u7aef\u70b9\uff1ahttp://localhost:8080/actuator/{endpoint}</li> <li> <p>\u542f\u7528\u4e0e\u66b4\u9732\u7aef\u70b9 <pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: '*'  # \u66b4\u9732\u6240\u6709\u7aef\u70b9\uff08\u751f\u4ea7\u614e\u7528\uff09\n        # include: health,info  # \u63a8\u8350\uff1a\u4ec5\u66b4\u9732\u5fc5\u8981\u7aef\u70b9\n  endpoint:\n    health:\n      show-details: always  # \u663e\u793a\u5065\u5eb7\u8be6\u60c5\n</code></pre></p> </li> <li> <p>\u81ea\u5b9a\u4e49 <code>info</code> \u7aef\u70b9 <pre><code>info:\n  app:\n    name: MyApp\n    version: 1.0.0\n    author: Alice\n</code></pre></p> </li> </ol>"},{"location":"java/springboot.html#4-","title":"4. \u751f\u547d\u5468\u671f -- \u76d1\u542c\u5668\u611f\u77e5\u751f\u547d\u5468\u671f","text":"<pre><code>@Slf4j  \npublic class MyListener implements SpringApplicationRunListener {  \n    @Override  \n    public void starting(ConfigurableBootstrapContext bootstrapContext) {  \n        log.info(\"starting\");  \n    }  \n\n    @Override  \n    public void environmentPrepared(ConfigurableBootstrapContext bootstrapContext, ConfigurableEnvironment environment) {  \n        log.info(\"environmentPrepared\");  \n    }  \n\n    @Override  \n    public void contextPrepared(ConfigurableApplicationContext context) {  \n        log.info(\"contextPrepared\");  \n    }  \n\n    @Override  \n    public void contextLoaded(ConfigurableApplicationContext context) {  \n        log.info(\"contextLoaded\");  \n    }  \n\n    @Override  \n    public void started(ConfigurableApplicationContext context, Duration timeTaken) {  \n        log.info(\"started\");  \n    }  \n\n    @Override  \n    public void ready(ConfigurableApplicationContext context, Duration timeTaken) {  \n        log.info(\"ready\");  \n    }  \n\n    @Override  \n    public void failed(ConfigurableApplicationContext context, Throwable exception) {  \n        log.info(\"failed\");  \n    }  \n}\n</code></pre>"},{"location":"java/springboot.html#41-","title":"4.1 \u751f\u547d\u5468\u671f-\u4e8b\u4ef6","text":"<p>Spring Boot \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\u7ba1\u7406\u673a\u5236\uff0c\u901a\u8fc7\u76d1\u542c\u5668\uff08Listener\uff09\u53ef\u4ee5\u611f\u77e5\u5e94\u7528\u542f\u52a8\u548c\u5173\u95ed\u7684\u5173\u952e\u9636\u6bb5\u3002</p> <p>1) \u5982\u679c\u9879\u76ee\u542f\u52a8\u524d\u505a\u4e8b\uff1a BootstrapRegistryInitializer\u548cApplicationContextInitializer 2) \u5982\u679c\u60f3\u8981\u5728\u9879\u76ee\u542f\u52a8\u5b8c\u6210\u540e\u505a\u4e8b\uff1aApplicationRunner\u548cCommandLineRunner 3) \u5982\u679c\u8981\u5e72\u6d89\u751f\u547d\u5468\u671f\u505a\u4e8b\uff1aSpringApplicationRunListener 4) \u5982\u679c\u60f3\u8981\u7528\u4e8b\u4ef6\u673a\u5236\uff1aApplicationListener</p> <p> </p> <p>\u4ec0\u4e48\u662f\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u5f00\u53d1\uff1a\u4e8b\u4ef6\u9a71\u52a8\u5f00\u53d1\uff08Event-Driven Development\uff09 \u662f\u4e00\u79cd\u7f16\u7a0b\u8303\u5f0f\uff0c\u5176\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u7cfb\u7edf\u7684\u884c\u4e3a\u7531\u4e8b\u4ef6\u7684\u4ea7\u751f\u548c\u54cd\u5e94\u6765\u9a71\u52a8\u3002\u5f53\u67d0\u4e2a\u7279\u5b9a\u4e8b\u4ef6\u53d1\u751f\u65f6\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u89e6\u53d1\u9884\u5148\u6ce8\u518c\u7684\u76d1\u542c\u5668\u6216\u5904\u7406\u5668\u8fdb\u884c\u5904\u7406\u3002</p> <p>\u4e8b\u4ef6\u9a71\u52a8\u5f00\u53d1\u7684\u6d41\u7a0b\uff1a 1. \u81ea\u5b9a\u4e49\u4e8b\u4ef6\uff1a\u7ee7\u627f ApplicationEvent\uff0c\u643a\u5e26\u54cd\u5e94\u5f97\u4e1a\u52a1\u6570\u636e 2. \u6839\u636e\u7279\u5b9a\u4e1a\u52a1\u53d1\u5e03\u4e8b\u4ef6 publisher.publishEvent() 3. \u7cfb\u7edf\u4e2d\u9884\u5148\u5b9a\u4e49\u7684\u4e8b\u4ef6\u76d1\u542c\u5668(@EventListener)\u5c31\u4f1a\u76d1\u542c\u4e8b\u4ef6\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2a\u4e8b\u4ef6\u505a\u51fa\u54cd\u5e94  4. \u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u81ea\u5df1\u8bbe\u5b9a\u662f\u540c\u6b65\u8fd8\u662f\u5f02\u6b65\u5904\u7406\uff08@Async,\u540c\u65f6\u8bb0\u5f97\u5f00\u542f\u5f02\u6b65\u5904\u7406)</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a\u6ce8\u89e3\u5f62\u5f0f</p> <pre><code>@Component\npublic class MyEventMonitor {\n    @EventListener\n    public void handleReady(ApplicationReadyEvent event) {\n        System.out.println(\"\u2705 \u5e94\u7528\u542f\u52a8\u5b8c\u6210\uff01\");\n    }\n\n    @EventListener\n    public void handleStart(ApplicationStartedEvent event) {\n        System.out.println(\"\ud83d\ude80 \u5e94\u7528\u5df2\u542f\u52a8\uff0c\u6b63\u5728\u6267\u884c Runner...\");\n    }\n}\n</code></pre> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a\u63a5\u53e3\u5f62\u5f0f <pre><code>@Component\npublic class MyEventListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n    @Override\n    public void onApplicationEvent(ApplicationReadyEvent event) {\n        System.out.println(\"\u5e94\u7528\u5df2\u5c31\u7eea\uff0c\u5f00\u59cb\u5904\u7406\u8bf7\u6c42...\");\n    }\n}\n</code></pre></p> <p>\u4ee3\u7801\u6f14\u793a\uff1a\u4f20\u7edf\u5f00\u53d1\u65b9\u5f0f--\u540c\u6b65\u963b\u585e\u5f00\u53d1</p> <pre><code>@Slf4j  \n@RestController  \npublic class UserController {  \n    // \u4f20\u7edf\u5f00\u53d1\u65b9\u5f0f  \n    // \u6ce8\u5165\u4e00\u5806service,\u7136\u540e\u53bb\u8c03\u65b9\u6cd5  \n    @Autowired  \n    UserPointsService userPointsService;  \n\n    @Autowired  \n    CouponService couponService;  \n    @GetMapping(\"/login\")  \n    public void afterLogin(String username){  \n        //1. \u767b\u5f55\u6210\u529f  \n        log.info(\"\u767b\u5f55\u6210\u529f\");  \n\n        //2. \u7ed9\u7528\u6237\u53d1\u9001\u4f18\u60e0\u5238  \n        couponService.sendCoupon(username);  \n\n        //3. \u7ed9\u7528\u6237\u53d1\u79ef\u5206  \n        userPointsService.addUserPoints(username);  \n    }  \n}\n</code></pre> <p>\u4ee3\u7801\u6f14\u793a\uff1a\u4e8b\u4ef6\u9a71\u52a8\u5f00\u53d1\u65b9\u5f0f (\u56de\u5934\u770b, \u6709\u4e86 rmq, \u6839\u672c\u7528\u4e0d\u4e0a\u8fd9\u4e2a, \u518d\u4e0d\u6d4e, redis \u4e5f\u80fd\u641e\u8fd9\u4e9b) <pre><code>// \u4e8b\u4ef6\u9a71\u52a8\u5f00\u53d1\u65b9\u5f0f\n----------------------------------userController--------------------------------\n@Autowired  \nApplicationEventPublisher applicationEventPublisher;  \n\n@GetMapping(\"/login\")  \npublic void afterLogin(String username){  \n    // 1. \u767b\u5f55\u6210\u529f  \n    log.info(\"\u767b\u5f55\u6210\u529f\");  \n\n    // 2. \u53d1\u9001\u767b\u5f55\u6210\u529f\u4e8b\u4ef6  \n    applicationEventPublisher.publishEvent(new UserLoginSuccessEvent(this, username));  \n}\n\n\n---------------------------------CouponService--------------------------------\n@Slf4j  \n@Service  \n@EnableAsync  \npublic class CouponService {  \n\n    @Async  \n    @EventListener(UserLoginSuccessEvent.class)  \n    public void listener(UserLoginSuccessEvent event){  \n        sendCoupon(event.getUsername());  \n\n    }  \n    public void sendCoupon(String userName){  \n        log.info(\"\u7ed9\u7528\u6237{}\u53d1\u9001\u4f18\u60e0\u5238\",userName);  \n    }  \n}\n\n -----------------------------------UserPointsService------------------------------\n@Slf4j  \n@Service  \n@EnableAsync  \npublic class UserPointsService {  \n\n    @Async  \n    @EventListener(UserLoginSuccessEvent.class)  \n    void listener(UserLoginSuccessEvent event){  \n        addUserPoints(event.getUsername());  \n    }  \n\n    // \u6dfb\u52a0\u79ef\u5206  \n    public void addUserPoints(String username){  \n     log.info(\"\u7528\u6237\uff1a{} \u6dfb\u52a0\u79ef\u5206\", username);  \n    }  \n}\n</code></pre></p>"},{"location":"java/ssm.html","title":"ssm","text":"<p>Spring \uff1a\u4f01\u4e1a\u7ea7\u4e00\u7ad9\u5f0f\u6846\u67b6</p> <p></p>"},{"location":"java/ssm.html#container","title":"\u4e00\u3001Container","text":""},{"location":"java/ssm.html#1","title":"1. \u7ec4\u4ef6\u548c\u5bb9\u5668","text":"<p>\u200b   \u7ec4\u4ef6\uff1a\u5177\u6709\u4e00\u5b9a\u529f\u80fd\u7684\u5bf9\u8c61\uff0c\u7ec4\u4ef6\u7684\u4e09\u5927\u7279\u6027\uff1a(\u540d\u5b57\u3001\u7c7b\u578b)\u3001\u5bf9\u8c61\u3001\u4f5c\u7528\u57df\uff0c\u7ec4\u4ef6\u7684\u540d\u5b57\u662f\u5168\u5c40\u552f\u4e00\u7684\u3002\u5728Spring\u4e2d\uff0c\u7ec4\u4ef6\u7684\u521b\u5efa\u65f6\u673a\u662f\u5bb9\u5668\u542f\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u5355\u5b9e\u4f8b\u7279\u6027\uff1a\u6bcf\u6b21\u83b7\u53d6\u76f4\u63a5\u62ff\u5c31\u5b8c\u4e8b\u4e86\u3002</p> <p>\u200b   \u5bb9\u5668\uff1a\u7ba1\u7406\u7ec4\u4ef6\uff08\u521b\u5efa\u3001\u83b7\u53d6\u3001\u4fdd\u5b58\u3001\u9500\u6bc1\uff09</p>"},{"location":"java/ssm.html#2-ioc","title":"2. IOC \u63a7\u5236\u53cd\u8f6c","text":"<p>\u200b   IOC \u662f\u4e00\u79cd\u8bbe\u8ba1\u601d\u60f3\uff0c\u4e0d\u662f\u5177\u4f53\u7684\u6280\u672f\u3002\u5b83\u7684\u6838\u5fc3\u7406\u5ff5\u662f\uff1a\u5c06\u5bf9\u8c61\u7684\u521b\u5efa\u548c\u4f9d\u8d56\u7ba1\u7406\u4ea4\u7ed9\u5916\u90e8\u5bb9\u5668\u63a7\u5236\uff0c\u800c\u4e0d\u662f\u7531\u5bf9\u8c61\u81ea\u5df1\u63a7\u5236\u3002</p> <p>\u4f20\u7edf\u65b9\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u5bf9\u8c61\u4e3b\u52a8\u53bb\u521b\u5efa\u5b83\u6240\u4f9d\u8d56\u7684\u5bf9\u8c61\uff1b \u800c\u5728 IOC \u6a21\u5f0f\u4e0b\uff0c\u5bf9\u8c61\u88ab\u52a8\u5730\u63a5\u6536\u4f9d\u8d56\u5bf9\u8c61\uff08\u7531\u5bb9\u5668\u63d0\u4f9b\uff09\u3002</p> <p>\u200b   \u201c\u63a7\u5236\u201d \u6307\u7684\u662f\u5bf9\u8c61\u4f9d\u8d56\u7684\u521b\u5efa\u4e0e\u7ba1\u7406\u3002\u201c\u53cd\u8f6c\u201d\u6307\u7684\u662f\u8fd9\u79cd\u63a7\u5236\u6743\u4ece\u7a0b\u5e8f\u5458\u624b\u4e2d\u53cd\u8f6c\u7ed9\u4e86\u5916\u90e8\u5bb9\u5668\uff08\u5982 Spring \u5bb9\u5668\uff09\u3002</p>"},{"location":"java/ssm.html#3-di","title":"3. DI \u4f9d\u8d56\u6ce8\u5165","text":"<p>\u200b   DI \u662f\u5b9e\u73b0 IOC \u7684\u5177\u4f53\u624b\u6bb5\u3002 \u5373\uff1a\u5bb9\u5668\u5728\u8fd0\u884c\u65f6\u5c06\u5bf9\u8c61\u6240\u4f9d\u8d56\u7684\u5b9e\u4f8b\u201c\u6ce8\u5165\u201d\u8fdb\u53bb\u3002</p>"},{"location":"java/ssm.html#4","title":"4. \u6ce8\u518c\u7ec4\u4ef6\u7684\u4e0d\u540c\u65b9\u6cd5","text":""},{"location":"java/ssm.html#41-bean","title":"4.1 @Bean","text":""},{"location":"java/ssm.html#1_1","title":"1. \u6982\u5ff5","text":"<p>\u200b   <code>@Bean</code> \u662f Spring \u4e2d\u7684\u4e00\u79cd \u663e\u5f0f\u6ce8\u518c Bean \u7684\u65b9\u5f0f\uff0c\u7528\u4e8e\u544a\u8bc9 IOC \u5bb9\u5668\uff1a\u201c\u6211\u8981\u624b\u52a8\u5b9a\u4e49\u5e76\u6ce8\u518c\u4e00\u4e2a\u7ec4\u4ef6\uff08Bean\uff09\u5230\u5bb9\u5668\u4e2d\u8fdb\u884c\u7ba1\u7406\u3002\u201d  \u6362\u53e5\u8bdd\u8bf4\uff0c\u4f7f\u7528 <code>@Bean</code> \u6807\u6ce8\u7684\u65b9\u6cd5\u4f1a\u7531 Spring \u8c03\u7528\uff0c\u5176\u8fd4\u56de\u5bf9\u8c61\u4f1a\u88ab\u52a0\u5165\u5230 IOC \u5bb9\u5668\u4e2d\uff0c\u5e76\u7531\u5bb9\u5668\u7edf\u4e00\u7ba1\u7406\u751f\u547d\u5468\u671f\u548c\u4f9d\u8d56\u5173\u7cfb\u3002</p>"},{"location":"java/ssm.html#2","title":"2. \u4e3b\u8981\u4f5c\u7528","text":"<p>\u200b   1\uff09\u6ce8\u518c Bean \u5230\u5bb9\u5668\uff1a\u901a\u8fc7 <code>@Bean</code> \u6807\u6ce8\u7684\u65b9\u6cd5\u8fd4\u56de\u7684\u5bf9\u8c61\uff0c\u4f1a\u81ea\u52a8\u6210\u4e3a Spring \u7ba1\u7406\u7684 Bean\u3002</p> <p>\u200b   2\uff09\u4ee3\u66ff XML \u914d\u7f6e\uff1a\u5728\u6ce8\u89e3\u9a71\u52a8\u7684\u914d\u7f6e\u7c7b\u4e2d\uff0c\u7528 <code>@Bean</code> \u65b9\u6cd5\u4ee3\u66ff <code>&lt;bean&gt;</code> \u6807\u7b7e\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>\u200b   3\uff09\u81ea\u5b9a\u4e49\u7b2c\u4e09\u65b9\u7c7b\u7684\u6ce8\u5165\uff1a\u5f53\u67d0\u4e2a\u7c7b\u4e0d\u662f\u7531\u6211\u4eec\u81ea\u5df1\u7f16\u5199\uff08\u4f8b\u5982\u5916\u90e8\u5e93\u4e2d\u7684\u5de5\u5177\u7c7b\uff09\uff0c\u65e0\u6cd5\u76f4\u63a5\u52a0\u4e0a <code>@Component</code> \u6ce8\u89e3\u65f6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 <code>@Bean</code> \u624b\u52a8\u6ce8\u518c\u3002</p>"},{"location":"java/ssm.html#3","title":"3. \u83b7\u5f97\u7ec4\u4ef6\u7684\u65b9\u6cd5","text":"<pre><code>// \u6309\u7167\u7ec4\u4ef6\u540d\u79f0\u83b7\u53d6\u7ec4\u4ef6\u5bf9\u8c61\nStudent ltb = (Student) ioc.getBean(\"LiuTianBa\");\nSystem.out.println(\"ltb  \" + ltb);\n\n// \u6309\u7167\u7ec4\u4ef6\u7c7b\u578b\u83b7\u53d6\u7ec4\u4ef6\u5bf9\u8c61\nDog dog = ioc.getBean(Dog.class);\nSystem.out.println(\"bean = \" + dog);\n\n// \u6309\u7167\u540d\u5b57\u52a0\u7c7b\u578b\uff0c\u5c31\u4e0d\u9700\u8981\u5f3a\u8f6c\u4e86\n</code></pre>"},{"location":"java/ssm.html#42-conguration","title":"4.2 @Conguration\u6ce8\u89e3","text":"<p>\u200b   <code>@Configuration</code> \u662f Spring \u4e2d\u7684\u4e00\u4e2a\u6ce8\u89e3\uff0c\u7528\u4e8e\u6807\u8bb0\u4e00\u4e2a\u7c7b\u4e3a\u914d\u7f6e\u7c7b\u3002\u5b83\u544a\u8bc9 Spring \u5bb9\u5668\uff1a\u8fd9\u4e2a\u7c7b\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a <code>@Bean</code> \u6ce8\u89e3\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5c06\u8fd4\u56de\u9700\u8981\u88ab Spring \u5bb9\u5668\u7ba1\u7406\u7684\u5bf9\u8c61\uff08\u5373 Bean\uff09\u3002Spring \u4f1a\u5904\u7406\u8fd9\u4e2a\u7c7b\uff0c\u6267\u884c\u5176 <code>@Bean</code> \u65b9\u6cd5\uff0c\u5e76\u5c06\u8fd4\u56de\u7684\u5bf9\u8c61\u6ce8\u518c\u5230 IoC \u5bb9\u5668\u4e2d\uff0c\u4ee5\u4fbf\u540e\u7eed\u4f9d\u8d56\u6ce8\u5165\u548c\u4f7f\u7528\u3002</p> <p>\u200b   \u76f8\u5f53\u4e8e\u4f20\u7edf\u7684 XML \u914d\u7f6e\u6587\u4ef6\uff08\u5982 <code>applicationContext.xml</code>\uff09\uff0c\u53ea\u4e0d\u8fc7\u73b0\u5728\u7528 Java \u7c7b\u6765\u7f16\u5199\u914d\u7f6e\uff0c\u7c7b\u578b\u5b89\u5168\u3001\u6613\u4e8e\u8c03\u8bd5\u548c\u91cd\u6784\u3002</p>"},{"location":"java/ssm.html#43-mvc","title":"4.3 MVC\u5206\u5c42\u6ce8\u89e3","text":"<p>\u200b   \u7528 @Bean \u624b\u52a8\u6ce8\u518c\u7ec4\u4ef6\u592a\u9ebb\u70e6\uff0c\u6240\u4ee5 Spring \u63d0\u4f9b\u4e86\u4e00\u4e9b\u7279\u6b8a\u7c7b\u7684\u5feb\u901f\u6ce8\u518c\u3002\u6ce8\uff1a\u5206\u5c42\u6ce8\u89e3\u80fd\u8d77\u4f5c\u7528\u7684\u524d\u63d0\u662f\uff1a\u8fd9\u4e9b\u7c7b\u5fc5\u987b\u5728\u4e3b\u7a0b\u5e8f\u6240\u5728\u7684\u5305\u53ca\u5176\u5b50\u5305\u7684\u7a0b\u5e8f\u4e0b\u3002\u5982\u679c\u975e\u8981\u653e\u5230\u5916\u90e8\u5305\uff0c\u5728\u4e3b\u7a0b\u5e8f\u4e0a\u52a0\u4e2aComponentScan\u5b9e\u73b0\u6279\u91cf\u626b\u63cf\u3002\uff08\u4f46\u6700\u597d\u8fd8\u662f\u8001\u8001\u5b9e\u5b9e\u7684\u5728\u4e3b\u7a0b\u5e8f\u6240\u5728\u5305\u4e0b\u9762\u73a9\uff09    </p>"},{"location":"java/ssm.html#1-controller","title":"1. @Controller","text":"<p>\u200b   \u7528\u4e8e\u6807\u8bb0\u63a7\u5236\u5c42\uff08Controller\uff09\u7684\u7c7b\uff0c\u8868\u793a\u8be5\u7c7b\u662f Spring MVC \u4e2d\u7684\u63a7\u5236\u5668\u7ec4\u4ef6\uff0c\u8d1f\u8d23\u5904\u7406 HTTP \u8bf7\u6c42\u3002\u88ab\u6b64\u6ce8\u89e3\u6807\u8bb0\u7684\u7c7b\u4f1a\u88ab Spring \u5bb9\u5668\u81ea\u52a8\u626b\u63cf\u5e76\u6ce8\u518c\u4e3a Bean\u3002</p>"},{"location":"java/ssm.html#2-service","title":"2. @Service","text":"<p>\u200b   \u7528\u4e8e\u6807\u8bb0\u4e1a\u52a1\u903b\u8f91\u5c42\uff08Service\uff09\u7684\u7c7b\uff0c\u8868\u793a\u8be5\u7c7b\u662f\u670d\u52a1\u7ec4\u4ef6\uff0c\u901a\u5e38\u5305\u542b\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u3002\u5b83\u662f\u4e00\u79cd\u7279\u6b8a\u7684 @Component\uff0c\u8bed\u4e49\u66f4\u660e\u786e\uff0c\u4fbf\u4e8e\u5206\u5c42\u7ba1\u7406\u3002</p>"},{"location":"java/ssm.html#3-repository","title":"3. @Repository","text":"<p>\u200b   \u7528\u4e8e\u6807\u8bb0\u6570\u636e\u8bbf\u95ee\u5c42\uff08DAO/Repository\uff09\u7684\u7c7b\uff0c\u8868\u793a\u8be5\u7c7b\u8d1f\u8d23\u4e0e\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u3002\u8be5\u6ce8\u89e3\u8fd8\u5177\u6709\u81ea\u52a8\u7ffb\u8bd1\u6570\u636e\u5e93\u5f02\u5e38\u7684\u80fd\u529b\uff08\u5982\u5c06 SQLException \u8f6c\u4e3a Spring \u7684\u6570\u636e\u8bbf\u95ee\u5f02\u5e38\uff09\uff0c\u4f7f\u6570\u636e\u5c42\u5f02\u5e38\u5904\u7406\u66f4\u7edf\u4e00\u3002</p>"},{"location":"java/ssm.html#44","title":"4.4  \u6ce8\u518c\u7b2c\u4e09\u65b9\u7ec4\u4ef6","text":"<p>\u200b   \u6709\u4e24\u4e2a\u65b9\u6cd5\uff0c\u4e00\u662f\u76f4\u63a5\u7528@Bean\u6ce8\u89e3\u53bb\u624b\u52a8\u7684new\u4e00\u4e2a\u5bf9\u8c61\u5e76\u8fd4\u56de\uff0c\u4e8c\u662f@Import\u6ce8\u89e3\u53bb\u6ce8\u518c\u7b2c\u4e09\u65b9\u7c7b\u5bf9\u8c61\u3002</p>"},{"location":"java/ssm.html#45-scope","title":"4.5 @Scope","text":"<p>\u200b   <code>@Scope</code> \u662f Spring \u4e2d\u7684\u4e00\u4e2a\u6ce8\u89e3\uff0c\u7528\u4e8e\u6307\u5b9a\u7531 <code>@Component</code> \u6216 <code>@Bean</code> \u7b49\u6ce8\u89e3\u521b\u5efa\u7684 Bean \u5b9e\u4f8b\u5728 Spring \u5bb9\u5668\u4e2d\u7684\u4f5c\u7528\u57df\uff08\u5373\u751f\u547d\u5468\u671f\u548c\u53ef\u89c1\u8303\u56f4\uff09\u3002\u5177\u4f53\u800c\u8a00\uff0c\u5b83\u662f\u7528\u6765\u63a7\u5236\u4e00\u4e2a Bean \u662f\u5355\u4f8b\u7684\u3001\u6bcf\u6b21\u8bf7\u6c42\u90fd\u65b0\u5efa\u7684\uff0c\u8fd8\u662f\u4e0e Web \u4e2d\u7684\u8bf7\u6c42\u3001\u4f1a\u8bdd\u7b49\u7ed1\u5b9a\u7684\u3002</p>"},{"location":"java/ssm.html#_1","title":"\u5e38\u89c1\u53d6\u503c","text":"<ul> <li>singleton\uff08\u9ed8\u8ba4\uff09\uff1a\u5728\u6574\u4e2a Spring \u5bb9\u5668\u4e2d\uff0c\u8be5 Bean \u53ea\u6709\u4e00\u4e2a\u5171\u4eab\u7684\u5b9e\u4f8b\u3002</li> <li>prototype\uff1a\u6bcf\u6b21\u8bf7\u6c42\u8be5 Bean \u65f6\uff08\u5982\u6ce8\u5165\u6216\u8c03\u7528 <code>getBean()</code>\uff09\uff0c\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5b9e\u4f8b\u3002</li> <li>request\uff1a\u6bcf\u4e2a HTTP \u8bf7\u6c42\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4ec5\u9002\u7528\u4e8e Web \u5e94\u7528\u3002</li> <li>session\uff1a\u6bcf\u4e2a HTTP Session \u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4ec5\u9002\u7528\u4e8e Web \u5e94\u7528\u3002</li> <li>application\uff1a\u6bcf\u4e2a ServletContext \u751f\u547d\u5468\u671f\u5185\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u4ec5\u9002\u7528\u4e8e Web \u5e94\u7528\u3002</li> </ul>"},{"location":"java/ssm.html#46-lazy","title":"4.6 @Lazy","text":"<p>\u200b   \u5b83\u6307\u793a Spring \u5bb9\u5668\u5728\u542f\u52a8\u65f6\u4e0d\u7acb\u5373\u521b\u5efa\u88ab\u6807\u8bb0\u7684 Bean\uff0c\u800c\u662f\u7b49\u5230\u8be5 Bean \u7b2c\u4e00\u6b21\u88ab\u5b9e\u9645\u4f7f\u7528\uff08\u5982\u6ce8\u5165\u3001\u8c03\u7528 <code>getBean()</code>\uff09\u65f6\u624d\u8fdb\u884c\u521d\u59cb\u5316\u3002</p> <p>\u200b    \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSpring \u5bb9\u5668\u5728\u542f\u52a8\u65f6\u4f1a\u9884\u521d\u59cb\u5316\u6240\u6709 singleton \u4f5c\u7528\u57df\u7684 Bean\u3002<code>@Lazy</code> \u53ef\u7528\u4e8e\u7c7b\u4e0a\uff08\u914d\u5408 <code>@Component</code> \u7b49\uff09\u6216\u65b9\u6cd5\u4e0a\uff08\u914d\u5408 <code>@Bean</code>\uff09\u3002</p> <p>\u200b   prototype\u4f5c\u7528\u57df\u7684 Bean \u672c\u8eab\u5c31\u662f\u61d2\u52a0\u8f7d\u7684\uff0c\u6bcf\u6b21\u4f7f\u7528\u90fd\u4f1a\u65b0\u5efa\u3002\u61d2\u52a0\u8f7d\u7684 Bean \u5728\u7b2c\u4e00\u6b21\u4f7f\u7528\u65f6\u4f1a\u6709\u521d\u59cb\u5316\u5f00\u9500\uff0c\u53ef\u80fd\u5f71\u54cd\u54cd\u5e94\u65f6\u95f4\u3002 </p>"},{"location":"java/ssm.html#47-factorybean","title":"4.7 FactoryBean\u63a5\u53e3","text":"<p>\u200b   <code>FactoryBean</code> \u662f Spring \u63d0\u4f9b\u7684\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u81ea\u5b9a\u4e49\u590d\u6742\u5bf9\u8c61\u7684\u521b\u5efa\u8fc7\u7a0b\u3002</p> <p>\u200b   \u5f53\u67d0\u4e2a Bean \u7684\u5b9e\u4f8b\u5316\u8fc7\u7a0b\u6bd4\u8f83\u590d\u6742\uff08\u4f8b\u5982\u9700\u8981\u52a8\u6001\u4ee3\u7406\u3001\u7ec4\u5408\u591a\u4e2a\u5bf9\u8c61\u3001\u8bfb\u53d6\u914d\u7f6e\u751f\u6210\u7b49\uff09\uff0c\u65e0\u6cd5\u901a\u8fc7\u7b80\u5355\u7684\u6784\u9020\u51fd\u6570\u6216\u5de5\u5382\u65b9\u6cd5\u5b8c\u6210\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0 <code>FactoryBean</code> \u63a5\u53e3\u6765\u7cbe\u786e\u63a7\u5236 Bean \u7684\u521b\u5efa\u903b\u8f91\u3002</p> <pre><code>- \u5b9e\u73b0 `FactoryBean` \u7684\u7c7b\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a Bean\uff0c\u4f1a\u88ab Spring \u5bb9\u5668\u7ba1\u7406\u3002\n- \u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u8be5 Bean \u65f6\uff0c\u9ed8\u8ba4\u8fd4\u56de\u7684\u662f `getObject()` \u65b9\u6cd5\u7684\u8fd4\u56de\u503c\uff0c\u800c\u4e0d\u662f `FactoryBean` \u5b9e\u4f8b\u672c\u8eab\u3002\n- \u82e5\u60f3\u83b7\u53d6 `FactoryBean` \u672c\u8eab\uff0c\u9700\u5728 Bean \u540d\u79f0\u524d\u52a0 `&amp;`\uff0c\u5982 `context.getBean(\"&amp;myFactoryBean\")`\u3002\n</code></pre>"},{"location":"java/ssm.html#48-conditional","title":"4.8 @Conditional \u6761\u4ef6\u6ce8\u518c","text":"<p>\u200b   <code>@Conditional</code> \u662f Spring \u4e2d\u7684\u4e00\u4e2a\u6ce8\u89e3\uff0c\u7528\u4e8e\u5b9e\u73b0\u6761\u4ef6\u5316\u6ce8\u518c Bean\u3002\u5b83\u53ef\u4ee5\u6839\u636e\u6307\u5b9a\u7684\u6761\u4ef6\u6765\u51b3\u5b9a\u662f\u5426\u5c06\u67d0\u4e2a Bean \u6ce8\u518c\u5230 Spring \u5bb9\u5668\u4e2d\u3002\u53ea\u6709\u5f53\u6761\u4ef6\u6ee1\u8db3\u65f6\uff0c\u5bf9\u5e94\u7684\u7ec4\u4ef6\uff08\u7c7b\u6216\u65b9\u6cd5\uff09\u624d\u4f1a\u88ab\u52a0\u8f7d\u548c\u5b9e\u4f8b\u5316\u3002</p>"},{"location":"java/ssm.html#1_2","title":"1. \u6838\u5fc3\u673a\u5236","text":"<ul> <li><code>@Conditional</code> \u63a5\u6536\u4e00\u4e2a\u6216\u591a\u4e2a <code>Condition</code> \u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u3002</li> <li>Spring \u5728\u89e3\u6790\u914d\u7f6e\u65f6\u4f1a\u5148\u68c0\u67e5\u8fd9\u4e9b\u6761\u4ef6\u7684 <code>matches()</code> \u65b9\u6cd5\u8fd4\u56de\u503c\u3002</li> <li>\u5982\u679c\u8fd4\u56de <code>true</code>\uff0c\u5219\u6ce8\u518c Bean\uff1b\u5426\u5219\u8df3\u8fc7\u3002</li> </ul>"},{"location":"java/ssm.html#2_1","title":"2. \u884d\u751f\u6ce8\u89e3","text":"<ul> <li><code>@ConditionalOnClass</code>\uff1a\u5f53\u7c7b\u8def\u5f84\u4e2d\u5b58\u5728\u6307\u5b9a\u7c7b\u65f6\u624d\u6ce8\u518c\u3002</li> <li><code>@ConditionalOnMissingBean</code>\uff1a\u5f53\u5bb9\u5668\u4e2d\u4e0d\u5b58\u5728\u6307\u5b9a\u7c7b\u578b\u7684 Bean \u65f6\u624d\u6ce8\u518c\u3002</li> <li><code>@ConditionalOnProperty</code>\uff1a\u5f53\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b58\u5728\u7279\u5b9a\u5c5e\u6027\u4e14\u503c\u7b26\u5408\u6761\u4ef6\u65f6\u6ce8\u518c\u3002</li> <li><code>@ConditionalOnWebApplication</code>\uff1a\u5f53\u5e94\u7528\u662f Web \u73af\u5883\u65f6\u6ce8\u518c\u3002</li> <li><code>@ConditionalOnExpression</code>\uff1a\u6839\u636e SpEL \u8868\u8fbe\u5f0f\u7ed3\u679c\u51b3\u5b9a\u662f\u5426\u6ce8\u518c\u3002</li> </ul>"},{"location":"java/ssm.html#5","title":"5. \u6ce8\u5165\u7ec4\u4ef6\u7684\u5404\u79cd\u65b9\u5f0f","text":""},{"location":"java/ssm.html#1-autowired","title":"1.  @Autowired","text":"<p>\u200b   <code>@Autowired</code> \u662f Spring \u63d0\u4f9b\u7684\u6ce8\u89e3\uff0c\u7528\u4e8e\u81ea\u52a8\u88c5\u914d Bean\u3002\u5b83\u53ef\u4ee5\u6807\u8bb0\u5728\u5b57\u6bb5\u3001\u6784\u9020\u51fd\u6570\u3001Setter \u65b9\u6cd5\u6216\u666e\u901a\u65b9\u6cd5\u4e0a\uff0cSpring \u5bb9\u5668\u4f1a\u81ea\u52a8\u4ece IoC \u5bb9\u5668\u4e2d\u67e5\u627e\u5339\u914d\u7684 Bean \u5e76\u6ce8\u5165\u3002</p> <p>\u200b   \u88c5\u914d\u6d41\u7a0b\uff1a</p> <p>\u200b   1\uff09\u5148\u6309\u7c7b\u578b\u627e\uff0c\u627e\u5230\u4e86\u5c31\u6ce8\u5165</p> <p>\u200b   2\uff09\u82e5\u6309\u7c7b\u578b\u6ca1\u627e\u5230\u6216\u8005\u627e\u5230\u4e86\u591a\u4e2a\uff0c\u5c31\u6309\u7ec4\u4ef6\u7684\u540d\u5b57\u6765\u627e\uff08\u5c31\u662f\u628a\u5f53\u524d\u7684\u5bf9\u8c61\u540d\u770b\u4f5c\u662f\u7ec4\u4ef6\u540d\uff0c\u7136\u540e\u53bbioc\u5bb9\u5668\u627e\uff09</p> <p>\u200b   3\uff09\u82e5\u672a\u627e\u5230\u5339\u914d\u7684 Bean\uff0c\u9ed8\u8ba4\u4f1a\u629b\u51fa\u5f02\u5e38</p> <pre><code>\u5339\u914d\u89c4\u5219\n- \u9ed8\u8ba4\u6309**\u7c7b\u578b**\uff08byType\uff09\u8fdb\u884c\u5339\u914d\u3002\n- \u5982\u679c\u540c\u4e00\u7c7b\u578b\u5b58\u5728\u591a\u4e2a Bean\uff0c\u5219\u7ed3\u5408 `@Qualifier` \u6ce8\u89e3\u6309\u540d\u79f0\uff08byName\uff09\u533a\u5206\u3002\n- \u82e5\u672a\u627e\u5230\u5339\u914d\u7684 Bean\uff0c\u9ed8\u8ba4\u4f1a\u629b\u51fa\u5f02\u5e38\uff1b\u53ef\u8bbe\u7f6e `required = false` \u5141\u8bb8\u4e3a null\u3002\n</code></pre> <pre><code># \u53ef\u4ee5\u81ea\u52a8\u88c5\u914d\u5f88\u591a\n@ToString\n@Controller\npublic class UserController {\n\n    // \u81ea\u52a8\u6ce8\u5165\u6f14\u793a\n    @Autowired\n    UserService userService;\n\n\n    @Autowired(required = false)\n    Person bill;\n\n    @Autowired\n    List&lt;Person&gt; arr;\n\n    @Autowired\n    Map&lt;String, Person&gt; map;\n\n    @Autowired\n    ConfigurableApplicationContext ioc;\n}\n</code></pre> <p>\u200b   \u5c0f\u62d3\u5c55\uff1a@Qualifier(\"beanname\") \u53ef\u4ee5\u6307\u5b9a\u8981\u6ce8\u5165\u7684\u7ec4\u4ef6\u540d\u79f0\uff08\u65b0\u7248\u672c\u76f4\u63a5\u7528\u53d8\u91cf\u540d\u5c31\u53ef\u4ee5\u4e86\uff09 @Primary \u5c31\u662f\u628a\u67d0\u4e2a @Bean \u6807\u8bb0\u7684\u65b9\u6cd5\u8fd4\u56de\u7684\u7ec4\u4ef6\u6807\u4e3a\u4e00\u4e2a\u7279\u6b8a\u7684Bean\uff08\u9ed8\u8ba4\u7ec4\u4ef6\uff09\uff0c\u4ee5\u540e\u4e3b\u52a8\u6ce8\u5165\u65f6\u5982\u679c\u6709\u591a\u4e2a\u8be5\u7c7b\u578b\u7684\u7ec4\u4ef6\uff0c\u5c31\u7528\u8fd9\u4e2a\u7279\u6b8a\u7684\u6765\u6ce8\u5165\u3002</p> <p>\u200b   \u7279\u522b\u7684\uff0c\u5f53\u6211\u4eec\u5f00\u542f\u4e86\u9ed8\u8ba4\u7ec4\u4ef6\u540e\uff0c\u5728\u60f3\u7528\u5176\u4ed6\u7684\uff0c\u5c31\u5f97\u9760@Qualifier\u4e86\uff0c\u6b64\u65f6\u8be5\u5c5e\u6027\u540d\u4e0d\u80fd\u5b9e\u73b0\u7ec4\u4ef6\u7684\u5207\u6362\u4e86\u3002</p>"},{"location":"java/ssm.html#2-resource","title":"2. @Resource","text":"<p>\u200b   <code>@Resource</code> \u662f JSR-250 \u89c4\u8303\u63d0\u4f9b\u7684\u6ce8\u89e3\uff0c\u7528\u4e8e\u5b9e\u73b0\u4f9d\u8d56\u6ce8\u5165\u3002\u5b83\u5e76\u975e Spring \u7279\u6709\uff0c\u4f46\u88ab Spring \u5bb9\u5668\u652f\u6301\u3002</p> <p>\u200b   \u88c5\u914d\u6d41\u7a0b\uff1a</p> <p>\u200b   1\uff09\u9ed8\u8ba4\u6309\u540d\u79f0\uff08byName\uff09\u8fdb\u884c\u5339\u914d\u3002\u5373\u4f7f\u7528\u5b57\u6bb5\u540d\u6216\u65b9\u6cd5\u540d\u4f5c\u4e3a Bean \u7684\u540d\u79f0\u53bb\u67e5\u627e\u3002</p> <p>\u200b   2\uff09\u5982\u679c\u627e\u4e0d\u5230\u5bf9\u5e94\u540d\u79f0\u7684 Bean\uff0c\u5219\u9000\u56de\u5230\u6309\u7c7b\u578b\uff08byType\uff09\u5339\u914d\u3002</p> <p>\u200b   3\uff09\u53ef\u901a\u8fc7 <code>name</code> \u5c5e\u6027\u663e\u5f0f\u6307\u5b9a\u8981\u6ce8\u5165\u7684 Bean \u540d\u79f0\uff1a<code>@Resource(name = \"userService\")</code>\u3002</p> <p>\u200b   \u4e0e @Autowired \u7684\u533a\u522b</p> <p>\u200b   1\uff09<code>@Resource</code> \u662f Java \u6807\u51c6\u6ce8\u89e3\uff0c<code>@Autowired</code> \u662f Spring \u7279\u6709\u3002</p> <p>\u200b   2\uff09<code>@Resource</code> \u4f18\u5148\u6309\u540d\u79f0\u6ce8\u5165\uff0c<code>@Autowired</code> \u9ed8\u8ba4\u6309\u7c7b\u578b\u6ce8\u5165\u3002</p> <p>\u200b   3\uff09<code>@Resource</code> \u4e0d\u652f\u6301 <code>required = false</code> \u8bed\u6cd5\u3002</p>"},{"location":"java/ssm.html#3_1","title":"3. \u6784\u9020\u5668\u6ce8\u5165\uff08\u65e0\u6ce8\u89e3\uff09","text":"<p>\u200b   \u6982\u5ff5\uff1a\u5728 Spring \u914d\u7f6e\u7c7b\u6216\u7ec4\u4ef6\u4e2d\uff0c\u901a\u8fc7\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u6765\u63a5\u6536\u4f9d\u8d56\u5bf9\u8c61\u7684\u6ce8\u5165\u65b9\u5f0f\u3002\u5f53\u7c7b\u4e2d\u53ea\u6709\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u65f6\uff0cSpring \u4f1a\u81ea\u52a8\u5c06\u5176\u53c2\u6570\u4f5c\u4e3a\u4f9d\u8d56\u8fdb\u884c\u6ce8\u5165\uff0c\u65e0\u9700\u6dfb\u52a0 <code>@Autowired</code> \u6ce8\u89e3\u3002</p> <p>\u200b   \u4f5c\u7528\uff1a\u5b9e\u73b0\u4f9d\u8d56\u7684\u5f3a\u5236\u6ce8\u5165\uff0c\u786e\u4fdd\u5bf9\u8c61\u521b\u5efa\u65f6\u6240\u9700\u7684\u6240\u6709\u4f9d\u8d56\u90fd\u5df2\u63d0\u4f9b\uff0c\u4ece\u800c\u4fdd\u8bc1\u5bf9\u8c61\u7684\u5b8c\u6574\u6027\u4e0e\u4e0d\u53ef\u53d8\u6027\u3002</p> <p>\u200b   \u7279\u70b9\uff1a</p> <p>\u200b   1\uff09\u65e0\u9700\u6ce8\u89e3\uff1aSpring 4.3+ \u7248\u672c\u5f00\u59cb\uff0c\u82e5\u7c7b\u4e2d\u53ea\u6709\u4e00\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u53ef\u7701\u7565 <code>@Autowired</code>\u3002</p> <p>\u200b   2\uff09\u63a8\u8350\u4f7f\u7528\uff1a\u6784\u9020\u5668\u6ce8\u5165\u662f Spring \u5b98\u65b9\u63a8\u8350\u7684\u4f9d\u8d56\u6ce8\u5165\u65b9\u5f0f\uff0c\u6709\u5229\u4e8e\u5b9e\u73b0\u4e0d\u53ef\u53d8\u5bf9\u8c61\uff0c\u4fbf\u4e8e\u5355\u5143\u6d4b\u8bd5\u3002</p> <p>\u200b   3\uff09\u4f9d\u8d56\u660e\u786e\uff1a\u6240\u6709\u5fc5\u9700\u7684\u4f9d\u8d56\u90fd\u5728\u6784\u9020\u51fd\u6570\u4e2d\u58f0\u660e\uff0c\u4ee3\u7801\u53ef\u8bfb\u6027\u5f3a\u3002</p>"},{"location":"java/ssm.html#4-setter","title":"4. Setter \u65b9\u6cd5\u6ce8\u5165","text":"<p>\u200b   \u901a\u8fc7\u7c7b\u7684 <code>setter</code> \u65b9\u6cd5\u5c06\u4f9d\u8d56\u5bf9\u8c61\u6ce8\u5165\u5230 Bean \u4e2d\u3002\u901a\u5e38\u914d\u5408 <code>@Autowired</code> \u6ce8\u89e3\u4f7f\u7528\uff0cSpring \u5bb9\u5668\u5728\u5b9e\u4f8b\u5316\u5bf9\u8c61\u540e\uff0c\u4f1a\u81ea\u52a8\u8c03\u7528\u5bf9\u5e94\u7684 setter \u65b9\u6cd5\u5b8c\u6210\u4f9d\u8d56\u6ce8\u5165\u3002</p>"},{"location":"java/ssm.html#5-awarexxx","title":"5. AwareXXX \u611f\u77e5\u63a5\u53e3","text":"<p>\u200b   Aware \u63a5\u53e3\u662f Spring \u63d0\u4f9b\u7684\u4e00\u7cfb\u5217\u4ee5 <code>Aware</code> \u7ed3\u5c3e\u7684\u63a5\u53e3\uff0c\u7528\u4e8e\u8ba9 Bean \u611f\u77e5\u5e76\u83b7\u53d6 Spring \u5bb9\u5668\u6216\u5176\u5185\u90e8\u7ec4\u4ef6\u7684\u5e95\u5c42\u8d44\u6e90\u3002</p> <p>\u200b   \u4f5c\u7528\uff1a\u5f53\u4e00\u4e2a Bean \u5b9e\u73b0\u4e86\u67d0\u4e2a <code>Aware</code> \u63a5\u53e3\u540e\uff0cSpring \u5bb9\u5668\u4f1a\u5728\u521d\u59cb\u5316\u8be5 Bean \u65f6\uff0c\u81ea\u52a8\u8c03\u7528\u5176\u63d0\u4f9b\u7684\u56de\u8c03\u65b9\u6cd5\uff0c\u5c06\u5bf9\u5e94\u7684\u8fd0\u884c\u65f6\u5bf9\u8c61\u6ce8\u5165\u8fdb\u53bb\uff0c\u4ece\u800c\u8ba9 Bean \u80fd\u591f\u8bbf\u95ee\u5bb9\u5668\u7684\u5185\u90e8\u670d\u52a1\u3002</p> <pre><code>// \u5e38\u89c1 Aware \u63a5\u53e3\n- `ApplicationContextAware`\uff1a\u83b7\u53d6 `ApplicationContext` \u5bb9\u5668\u672c\u8eab\u3002\n- `BeanFactoryAware`\uff1a\u83b7\u53d6 `BeanFactory` \u5de5\u5382\u5b9e\u4f8b\u3002\n- `BeanNameAware`\uff1a\u83b7\u53d6\u5f53\u524d Bean \u5728\u5bb9\u5668\u4e2d\u7684\u540d\u79f0\u3002\n- `EnvironmentAware`\uff1a\u83b7\u53d6 `Environment` \u5bf9\u8c61\uff0c\u7528\u4e8e\u8bfb\u53d6\u914d\u7f6e\u73af\u5883\uff08\u5982 profile\u3001properties\uff09\u3002\n- `ResourceLoaderAware`\uff1a\u83b7\u53d6 `ResourceLoader`\uff0c\u7528\u4e8e\u52a0\u8f7d\u8d44\u6e90\u6587\u4ef6\u3002\n- `ApplicationEventPublisherAware`\uff1a\u83b7\u53d6\u4e8b\u4ef6\u53d1\u5e03\u5668\uff0c\u7528\u4e8e\u53d1\u5e03\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002\n</code></pre>"},{"location":"java/ssm.html#6-value","title":"6. @Value","text":"<p>\u200b   <code>@Value</code> \u662f Spring \u63d0\u4f9b\u7684\u4e00\u4e2a\u6ce8\u89e3\uff0c\u7528\u4e8e\u5c06\u5916\u90e8\u503c\u6ce8\u5165\u5230 Bean \u7684\u5b57\u6bb5(\u975e\u7ec4\u4ef6\u7684\u5b57\u6bb5\uff0c\u7ec4\u4ef6\u53ef\u4ee5\u901a\u8fc7Autowired\u81ea\u52a8\u6ce8\u5165)\u6216\u65b9\u6cd5\u53c2\u6570\u4e2d\u3002</p> <p>\u200b   \u4f5c\u7528\uff1a\u5b9e\u73b0\u914d\u7f6e\u5c5e\u6027\u3001\u5b57\u9762\u91cf\u3001SpEL \u8868\u8fbe\u5f0f\u7684\u6ce8\u5165\uff0c\u4f7f\u4ee3\u7801\u53ef\u4ee5\u52a8\u6001\u83b7\u53d6\u914d\u7f6e\u4fe1\u606f\uff0c\u800c\u4e0d\u5fc5\u786c\u7f16\u7801\u3002     </p> <p>\u200b   \u6ce8\u5165\u65b9\u5f0f\uff1a</p> <p>\u200b   1\uff09\u76f4\u63a5@Value(\u5b57\u9762\u91cf)</p> <p>\u200b   2\uff09\u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u83b7\u53d6\u6570\u636e\uff1a@Value(\"${key}\")</p> <pre><code>@Value(\"${app.name}\")\nprivate String appName;\n</code></pre> <p>\u200b   3\uff09SpEL\uff08Spring Expression Language\uff09\u8868\u8fbe\u5f0f</p> <pre><code>@Value(\"#{systemProperties['user.home']}\")\nprivate String userHome;\n\n@Value(\"#{T(java.lang.Math).random() * 100}\")\nprivate double randomValue;\n</code></pre> <p>\u200b   \u7efc\u5408\u6f14\u793a\uff1a</p> <pre><code>public class Cat {\n    @Value(\"Tom\")\n    private String name;\n    @Value(\"12\")\n    private Integer age;\n    @Value(\"${cat.color}\")\n    private String color;\n    @Value(\"#{T(java.util.UUID).randomUUID().toString()}\")\n    private String id;\n\n}\n</code></pre>"},{"location":"java/ssm.html#7-propertysource","title":"7. @PropertySource","text":"<p>\u200b   <code>@PropertySource</code> \u662f Spring \u63d0\u4f9b\u7684\u4e00\u4e2a\u6ce8\u89e3\uff0c\u7528\u4e8e\u5c06\u5916\u90e8\u7684 properties \u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5230 Spring \u7684 <code>Environment</code> \u62bd\u8c61\u4e2d\u3002</p> <pre><code>@PropertySource(\"classpath:app.properties\")\n</code></pre> <p>\u200b   \u8865\u5145\u77e5\u8bc6\uff1a\u7c7b\u8def\u5f84\u627e\u8d44\u6e90\u65b9\u5f0f</p> <p>\u200b   classpath: \u4ee3\u8868\u81ea\u5df1\u5f53\u524d\u9879\u76ee\u7684\u7c7b\u8def\u5f84\uff08java\u4ee5\u53caresources)</p> <p>\u200b   classpath*: \u4ece\u6240\u6709\u5305\u7684\u7c7b\u8def\u5f84\u4e0b\u9762\u627e</p> <p>\u200b   \u5728Spring\u4e2d\uff0c\u63d0\u4f9b\u4e86\u8d44\u6e90\u83b7\u53d6\u5de5\u5177\u7c7b\uff1aResouceUtils \u6765\u83b7\u53d6\u6587</p>"},{"location":"java/ssm.html#8-profile","title":"8. @Profile","text":"<p>\u200b   \u5b9e\u9645\u4e5f\u662f @Conditional \u7684\u4e00\u79cd\uff0c\u573a\u666f\uff1a\u5f53\u6211\u4eec\u6709\u591a\u4e2a\u6570\u636e\u6e90\uff0c\u4e5f\u5c31\u662f\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u6210\u8fd9\u4e09\u5957\uff0c\u5982\u679c\u6211\u4eec\u7528 @Primary \u6216\u8005@Qualifier\uff0c\u5219\u9700\u8981\u4fee\u6539\u4ee3\u7801\uff0c\u4f46\u7528 @Profile \u53ef\u4ee5\u8f93\u5165\u4e00\u4e2a\u73af\u5883\u8868\u793a\uff0c\u4ece\u800c\u6839\u636e\u4e0d\u540c\u7684\u73af\u5883\u8868\u793a\u6765\u6ce8\u518c\u7ec4\u4ef6\u3002</p> <p>\u200b   \u5177\u4f53\u4f7f\u7528\uff1a</p> <p>\u200b   1\uff09\u5148\u5b9a\u4e49\u73af\u5883\u8868\u793a\uff0c\u9ed8\u8ba4\u662f \u201ddefault\u201c \uff1a\u81ea\u5b9a\u4e49\u65b9\u6cd5\u5c31\u662f\u53bb\u8d44\u6e90\u6587\u4ef6\u4e0b\u9762\u5b9a\u4e49\u3002 spring.profiles.active=\u751f\u4ea7\u73af\u5883</p> <p>\u200b   2\uff09\u4f7f\u7528 @Profile \u6765\u5b9e\u73b0\u6761\u4ef6\u6ce8\u518c </p>"},{"location":"java/ssm.html#6","title":"6. \u7ec4\u4ef6\u751f\u547d\u5468\u671f","text":"<p>\u200b   Spring \u5bb9\u5668\u4e2d\u6bcf\u4e2a Bean \u90fd\u6709\u5176\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\uff0c\u4ece\u521b\u5efa\u3001\u521d\u59cb\u5316\u3001\u4f7f\u7528\u5230\u9500\u6bc1\u3002Spring \u63d0\u4f9b\u4e86\u591a\u79cd\u673a\u5236\u8ba9\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u7279\u5b9a\u751f\u547d\u5468\u671f\u9636\u6bb5\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\u3002</p> <p>\u200b   \u7b2c\u4e00\u79cd\uff1a\u901a\u8fc7 @Bean \u6ce8\u89e3\u53bb\u6307\u5b9a init \u4ee5\u53ca destory\u3002</p> <p>\u200b   \u7b2c\u4e8c\u79cd\uff1a\u53bb\u5b9e\u73b0 InitializingBean  \u4ee5\u53ca DisposableBean </p> <p></p> <p>\u200b   \u5177\u4f53\u751f\u547d\u5468\u671f\u5982\u4e0b\uff1a</p> <p>\u200b   1\u3001\u5b9e\u4f8b\u5316\uff08Instantiation\uff09 \uff1aSpring \u5bb9\u5668\u6839\u636e\u914d\u7f6e\u6216\u6ce8\u89e3\u521b\u5efa Bean \u7684\u5b9e\u4f8b\uff08\u901a\u8fc7\u6784\u9020\u51fd\u6570\u6216\u5de5\u5382\u65b9\u6cd5\uff09\u3002</p> <p>\u200b   2\u3001\u5c5e\u6027\u8d4b\u503c\uff08Populate Properties\uff09\uff1a\u5bb9\u5668\u5c06\u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684\u5c5e\u6027\u503c\u6216\u4f9d\u8d56\u5bf9\u8c61\u6ce8\u5165\u5230 Bean \u4e2d\uff08\u5982\u901a\u8fc7 <code>@Autowired</code>\u3001<code>@Value</code> \u7b49\uff09\u3002</p> <p>\u200b   3\u3001\u521d\u59cb\u5316\uff08Initialization\uff09</p> <pre><code>   - \u8865\u5145: \u8c03\u7528\u540e\u7f6e\u5904\u7406\u5668\u7684\u524d\u7f6e\u64cd\u4f5c\n   - \u8c03\u7528 `@PostConstruct` \u6ce8\u89e3\u7684\u65b9\u6cd5\u3002\n   - \u8c03\u7528 `InitializingBean` \u7684 `afterPropertiesSet()` \u65b9\u6cd5\u3002\n   - \u8c03\u7528\u81ea\u5b9a\u4e49\u7684\u521d\u59cb\u5316\u65b9\u6cd5\uff08\u901a\u8fc7 `@Bean(initMethod = \"init\")` \u6307\u5b9a\uff09\u3002\n   - \u5e94\u7528 BeanPostProcessor \u7684 `postProcessBeforeInitialization` \u548c `postProcessAfterInitialization`\u3002\n</code></pre> <p>\u200b   4\u3001\u4f7f\u7528\uff08In Use\uff09\uff1aBean \u5df2\u51c6\u5907\u597d\uff0c\u53ef\u4ee5\u88ab\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528\u6216\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u200b   5\u3001\u9500\u6bc1\uff08Destruction\uff09\uff1a</p> <pre><code>   - \u8c03\u7528 `@PreDestroy` \u6ce8\u89e3\u7684\u65b9\u6cd5\u3002\n   - \u8c03\u7528 `DisposableBean` \u7684 `destroy()` \u65b9\u6cd5\u3002\n   - \u8c03\u7528\u81ea\u5b9a\u4e49\u7684\u9500\u6bc1\u65b9\u6cd5\uff08\u901a\u8fc7 `@Bean(destroyMethod = \"cleanup\")` \u6307\u5b9a\uff09\u3002\n   - \u4ec5\u9002\u7528\u4e8e singleton \u4f5c\u7528\u57df\u7684 Bean\uff0c\u5728\u5bb9\u5668\u5173\u95ed\u65f6\u6267\u884c\u3002\n</code></pre> <p> </p>"},{"location":"java/ssm.html#7-beanpostprocessor","title":"7. BeanPostProcessor","text":"<p>\u200b   \u4e4b\u524d Bean \u7684\u751f\u547d\u5468\u671f\u5176\u5b9e\u53ea\u662f\u5728\u4eba\u5bb6\u521d\u59cb\u5316\u5b8c\uff0c\u6216\u8005\u9500\u6bc1\u524d\u8ba9\u4f60\u505a\u70b9\u5176\u4ed6\u7684\uff0c\u800c\u4e0d\u80fd\u5f71\u54cd\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p> <p>\u200b   \u800c BeanPostProcessor \u80fd\u591f\u5728\u751f\u547d\u5468\u671f\u8fc7\u7a0b\u4e2d\u6b63\u5728\u7684\u4fee\u6539\u8fd9\u4e2a Bean\u3002</p>"},{"location":"java/ssm.html#aop","title":"\u4e8c\u3001AOP \u2b50","text":"<p>\u200b   \u6982\u5ff5\uff1aAspect Oriented Programming\uff08AOP\uff09\u662f Spring \u6846\u67b6\u7684\u91cd\u8981\u7279\u6027\u4e4b\u4e00\uff0c\u5b83\u5141\u8bb8\u5f00\u53d1\u8005\u5c06\u6a2a\u5207\u5173\u6ce8\u70b9\uff08\u5982\u65e5\u5fd7\u3001\u4e8b\u52a1\u3001\u5b89\u5168\u3001\u7f13\u5b58\u7b49\uff09\u4e0e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5206\u79bb\u3002</p> <p>\u200b   \u672c\u8d28\uff1aAOP \u7684\u5e95\u5c42\u5b9e\u73b0\u539f\u7406\u786e\u5b9e\u662f\u4ee3\u7406\u6a21\u5f0f\u3002Spring \u5728\u8fd0\u884c\u65f6\u4e3a\u76ee\u6807\u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff0c\u5f53\u8c03\u7528\u76ee\u6807\u65b9\u6cd5\u65f6\uff0c\u5b9e\u9645\u6267\u884c\u7684\u662f\u4ee3\u7406\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002\u4ee3\u7406\u5bf9\u8c61\u53ef\u4ee5\u5728\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u7684\u524d\u540e\uff0c\u751a\u81f3\u73af\u7ed5\u6267\u884c\u81ea\u5b9a\u4e49\u903b\u8f91\uff0c\u4ece\u800c\u5b9e\u73b0\u529f\u80fd\u589e\u5f3a\u3002</p> <p></p>"},{"location":"java/ssm.html#1-aop","title":"1. AOP \u7f16\u7801\u5b9e\u73b0","text":"<p>\u200b   1\uff09\u5bfc\u5165 AOP \u4f9d\u8d56 </p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u200b   2\uff09\u7f16\u5199\u5207\u9762 Aspect \u6ce8\uff1a\u8bb0\u5f97\u7528 @Aspect \u6765\u6807\u6ce8\u5207\u9762\u7c7b </p> <p>\u200b   3\uff09\u7f16\u5199\u901a\u77e5\u65b9\u5f0f</p> <p>\u200b   4\uff09\u6307\u660e\u8fd9\u4e9b\u901a\u77e5\u65b9\u6cd5\u4f55\u65f6\u4f55\u5730\u8fd0\u884c\uff08\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\uff09 \u6ce8\uff1a\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8868\u8fbe\u5f0f\u62bd\u79bb\u51fa\u6765</p> <pre><code>    // \u5207\u5165\u70b9\u8868\u8fbe\u5f0f\u62bd\u79bb\n    @Pointcut(\"execution(* person.liutianba.spring02Aop.calculator.MathCal.*(..))\")\n    void pointCut(){}\n\n    @Before(\"pointCut()\")\n    public void logStart(JoinPoint joinPoint){\n        System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u5f00\u59cb... \u65b9\u6cd5\u540d:\" + joinPoint.getSignature().getName() + \"\u53c2\u6570\u4e3a\uff1a\" + Arrays.asList(joinPoint.getArgs()).toString());\n    }\n</code></pre> <p>\u200b   5\uff09\u6d4b\u8bd5AOP\u52a8\u6001\u7ec7\u5165</p> <pre><code>@Aspect  // \u5207\u9762\u7c7b\n@Component\npublic class LogAspect {\n\n    /**\n     * \u544a\u8bc9 Spring\uff0c\u4ee5\u4e0b\u901a\u77e5\u65b9\u6cd5\u4f55\u65f6\u4f55\u5730\u8fd0\u884c\n     * \u4f55\u65f6\uff1a\n     * @Before,\n     * @After(\u4e0d\u7ba1\u6b63\u5e38\u5f02\u5e38\uff0c\u90fd\u8fd0\u884c),\n     * @AfterReturning(\u6b63\u5e38\u8fd4\u56de\u7ed3\u679c),\n     * @AfterThrowing(\u51fa\u73b0\u5f02\u5e38),\n     * @Around\n     *\n     * \u4f55\u5730\uff1a\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\n     *   execution(\u65b9\u6cd5\u7684\u5168\u7b7e\u540d)\n     *      \u5168\u5199\u6cd5 \uff1apublic int \u5168\u7c7b\u540d.\u65b9\u6cd5\u540d(\u53c2\u6570\u5217\u8868) throws \u5f02\u5e38\n     *      \u7701\u7565\u5199\u6cd5\uff1aint \u65b9\u6cd5\u540d(\u53c2\u6570\u5217\u8868) int *(int, int)\n     *      * \u8868\u793a\u4efb\u610f\u957f\u5ea6\u5b57\u7b26\u4e32\n     *\n     */\n\n    @Before(\"execution(int *(int,int))\")\n    public void logStart(){\n        System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u5f00\u59cb...\");\n    }\n    @After(\"execution(int *(int,int))\")\n    public void logEnd(){\n        System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u7ed3\u675f...\");\n    }\n\n    @AfterThrowing(\"execution(int*(int, int))\")\n    public void logException(){\n        System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u5f02\u5e38...\");\n    }\n\n\n    @AfterReturning(pointcut = \"execution(int *(int, int))\", returning = \"result\")\n    public void logReturn(Object result){\n        System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u7ed3\u679c\uff1a\" + result);\n    }\n}\n</code></pre>"},{"location":"java/ssm.html#2-aop","title":"2. AOP \u5207\u5165\u70b9\u8868\u793a\u5f0f\u5199\u6cd5","text":"<p>\u200b   \u5207\u5165\u70b9\uff08Pointcut\uff09\u7528\u4e8e\u5b9a\u4e49 \u54ea\u4e9b\u65b9\u6cd5\u9700\u8981\u88ab AOP \u589e\u5f3a\u3002\u5b83\u662f\u901a\u8fc7\u4e00\u4e2a\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u7c7b\u548c\u65b9\u6cd5\u7684\uff0c\u53ea\u6709\u5339\u914d\u6210\u529f\u7684\u65b9\u6cd5\u624d\u4f1a\u6267\u884c\u901a\u77e5\uff08Advice\uff09\u3002</p> <p></p>"},{"location":"java/ssm.html#1-excution","title":"1. excution(\u65b9\u6cd5\u7b7e\u540d)","text":"<p>\u200b   \u5207\u5165\u67d0\u4e2a\u63a5\u53e3\u4e0b\u7684\u6240\u6709\u65b9\u6cd5\uff1aexecution(* person.liutianba.spring02Aop.calculator.MathCal. ***(..))</p> <p>\u200b   \u6ce8\uff1a\u53ea\u8981\u6709\u4e86\u5207\u9762\u7c7b\u518d\u5207\u5165\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7c7b\u7684\u5b9e\u4f8b\u5728\u5bb9\u5668\u4e2d\u5c31\u4e0d\u518d\u662f\u539f\u672c\u7684\u7c7b\u578b\u4e86\uff0c\u800c\u662fCGLIB\u4ea7\u751f\u7684\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\u3002   </p> <pre><code> /**\n     * \u544a\u8bc9 Spring\uff0c\u4ee5\u4e0b\u901a\u77e5\u65b9\u6cd5\u4f55\u65f6\u4f55\u5730\u8fd0\u884c\n     * \u4f55\u65f6\uff1a\n     * @Before,\n     * @After(\u4e0d\u7ba1\u6b63\u5e38\u5f02\u5e38\uff0c\u90fd\u8fd0\u884c),\n     * @AfterReturning(\u6b63\u5e38\u8fd4\u56de\u7ed3\u679c),\n     * @AfterThrowing(\u51fa\u73b0\u5f02\u5e38),\n     * @Around\n     *\n     * \u4f55\u5730\uff1a\u5207\u5165\u70b9\u8868\u8fbe\u5f0f\n     *   execution(\u65b9\u6cd5\u7684\u5168\u7b7e\u540d)\n     *      \u5168\u5199\u6cd5 \uff1apublic int \u5168\u7c7b\u540d.\u65b9\u6cd5\u540d(\u53c2\u6570\u5217\u8868) throws \u5f02\u5e38\n     *      \u7701\u7565\u5199\u6cd5\uff1aint \u65b9\u6cd5\u540d(\u53c2\u6570\u5217\u8868) int *(int, int)\n     *      *\uff1a\u8868\u793a\u4efb\u610f\u957f\u5ea6\u5b57\u7b26\u4e32\n     *      ..\uff1a\n     *       1\uff09\u53c2\u6570\u4f4d\u7f6e\uff1a\u8868\u793a\u591a\u4e2a\u53c2\u6570\uff0c\u4efb\u610f\u7c7b\u578b\n     *       2\uff09\u7c7b\u578b\u4f4d\u7f6e\uff1a\u8868\u793a\u591a\u4e2a\u5c42\u7ea7  \n\n     *   @annotation(com.spzx.common.security.annotation.RequiresLogin) || \"  \n        + \"@annotation(com.spzx.common.security.annotation.RequiresPermissions)\n     *  \n     *  \n     *  \n*/  \n</code></pre>"},{"location":"java/ssm.html#2-args","title":"2. args","text":"<p>\u200b   \u5339\u914d\u90a3\u4e9b\u53c2\u6570\u5217\u8868\u4e00\u76f4\u7684\u6240\u6709\u65b9\u6cd5</p>"},{"location":"java/ssm.html#3-args","title":"3. @args","text":"<p>\u200b   \u5339\u914d\u53c2\u6570\u5217\u8868\u6709\u7279\u5b9a\u6ce8\u89e3\u7684\u65b9\u6cd5</p>"},{"location":"java/ssm.html#3-aop","title":"3. \u83b7\u53d6 AOP \u7684\u8fde\u63a5\u70b9\u7684\u4fe1\u606f","text":"<p>\u200b   \u76f4\u63a5\u4f20\u4e00\u4e2a\u8fde\u63a5\u70b9\uff0c\u7136\u540e\u901a\u8fc7\u5b83\u83b7\u5f97\u4fe1\u606f\u3002</p> <p>\u200b   \u4e00\u822c\u5c31\u662f\u901a\u8fc7getSignature\uff08\uff09\u83b7\u5f97\u65b9\u6cd5\u7b7e\u540d\uff0c\u7136\u540e\u901a\u8fc7\u65b9\u6cd5\u7b7e\u540d\u5c31\u53ef\u4ee5\u83b7\u5f97\u8be5\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</p> <pre><code>@Before(\"execution(* person.liutianba.spring02Aop.calculator.MathCal.*(..))\")\npublic void logStart(JoinPoint joinPoint){\n    System.out.println(\"\u3010\u5207\u9762 - \u65e5\u5fd7\u3011\u5f00\u59cb... \u65b9\u6cd5\u540d:\" + joinPoint.getSignature().getName());\n}\n</code></pre>"},{"location":"java/ssm.html#4_1","title":"4. \u591a\u5207\u9762\u6267\u884c\u6267\u884c\u987a\u5e8f","text":"<p>\u200b   \u6211\u7684\u7406\u89e3\uff1a\u5355\u4e2a\u5207\u9762\u5b9e\u9645\u5c31\u662f\u628a\u76ee\u6807\u65b9\u6cd5\u505a\u4e86\u4e2a\u4ee3\u7406\uff0c\u5f53\u6709\u5176\u4ed6\u5207\u9762\u65f6\uff0c\u5b83\u4f1a\u628a\u4ee3\u7406\u540e\u7684\u65b9\u6cd5\u770b\u6210\u662f\u4e00\u4e2a\u8981\u4ee3\u7406\u7684\u76ee\u6807\u65b9\u6cd5\uff0c\u7136\u540e\u53bb\u4ee3\u7406\uff0c\u6240\u4ee5\uff0c\u591a\u4e2a\u5207\u9762\u7684\u6267\u884c\u987a\u5e8f\u662f\u7531\u8c01\u5148\u4ee3\u7406\uff0c\u8c01\u540e\u4ee3\u7406\u51b3\u5b9a\u7684\u3002</p> <p>\u200b   \u6ce8\uff1a\u9ed8\u8ba4\u4ee3\u7406\u987a\u5e8f\u662f\u6309\u7c7b\u540d\u81ea\u7136\u6392\u5e8f\u7684\uff0c\u4f46\u4e5f\u53ef\u4ee5\u901a\u8fc7 @Order \u6ce8\u89e3\u624b\u52a8\u6307\u5b9a\u3002<code>@Order</code> \u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u5728\u4ee3\u7406\u94fe\u4e2d\u4f4d\u4e8e\u5916\u5c42\u3002</p> <p>\u200b   </p>"},{"location":"java/ssm.html#5-around","title":"5. \u73af\u7ed5\u901a\u77e5 @Around \u91cd\u70b9\uff01\uff01\uff01","text":"<p>\u200b   <code>@Before</code>\u3001<code>@After</code> \u7b49\u901a\u77e5\u5c5e\u4e8e\u201c\u611f\u77e5\u578b\u201d\u589e\u5f3a\uff0c\u53ea\u80fd\u5728\u65b9\u6cd5\u6267\u884c\u524d\u540e\u6267\u884c\u989d\u5916\u903b\u8f91\uff0c\u65e0\u6cd5\u63a7\u5236\u76ee\u6807\u65b9\u6cd5\u7684\u6267\u884c\u6d41\u7a0b\uff08\u5982\u8df3\u8fc7\u65b9\u6cd5\u3001\u4fee\u6539\u53c2\u6570\u3001\u6539\u53d8\u8fd4\u56de\u503c\uff09\u3002\u800c <code>@Around</code> \u662f\u6700\u5f3a\u5927\u7684\u901a\u77e5\u7c7b\u578b\uff0c\u5b83\u5b8c\u5168\u5305\u88f9\u76ee\u6807\u65b9\u6cd5\uff0c\u53ef\u4ee5\uff1a</p> <ul> <li>\u63a7\u5236\u662f\u5426\u6267\u884c\u76ee\u6807\u65b9\u6cd5</li> <li>\u4fee\u6539\u65b9\u6cd5\u53c2\u6570</li> <li>\u4fee\u6539\u8fd4\u56de\u503c</li> <li>\u6355\u83b7\u5e76\u5904\u7406\u5f02\u5e38 (\u8fd9\u91cc\u5efa\u8bae\u629b\u51fa\u5f02\u5e38\uff0c\u5982\u679c\u4e0d\u629b\u51fa\u7684\u8bdd\uff0c\u51fa\u4e86\u5f02\u5e38\u522b\u4eba\u90fd\u611f\u77e5\u4e0d\u5230)</li> <li>\u77ed\u8def\u8fd4\u56de\uff08\u4e0d\u8c03\u7528\u76ee\u6807\u65b9\u6cd5\uff09</li> </ul>"},{"location":"java/ssm.html#51","title":"5.1 \u56fa\u5b9a\u5199\u6cd5","text":"<pre><code>@Aspect\n@Component\npublic class LogAspect {\n\n    @Around(\"execution(* com.example.service.*.*(..))\")\n    public Object around(ProceedingJoinPoint joinPoint) throws Throwable {\n        // \u83b7\u53d6\u65b9\u6cd5\u7b7e\u540d\n        Signature signature = joinPoint.getSignature();\n        String methodName = signature.getName();\n\n        // \u83b7\u53d6\u65b9\u6cd5\u53c2\u6570\n        Object[] args = joinPoint.getArgs();\n\n        System.out.println(\"\u3010\u73af\u7ed5\u524d\u7f6e\u3011\u65b9\u6cd5 \" + methodName + \" \u5f00\u59cb\u6267\u884c\uff0c\u53c2\u6570\uff1a\" + Arrays.toString(args));\n\n        Object result = null;\n        try {\n            // -----------------------------\n            // \u6838\u5fc3\uff1a\u51b3\u5b9a\u662f\u5426\u7ee7\u7eed\u6267\u884c\u76ee\u6807\u65b9\u6cd5\n            // \u53ef\u5728\u6b64\u5904\u4fee\u6539\u53c2\u6570\n            // args[0] = \"modifiedArg\";\n            result = joinPoint.proceed(args); // \u6267\u884c\u76ee\u6807\u65b9\u6cd5\uff08\u53ef\u4f20\u5165\u4fee\u6539\u540e\u7684\u53c2\u6570\uff09\n            // -----------------------------\n\n            System.out.println(\"\u3010\u73af\u7ed5\u8fd4\u56de\u3011\u65b9\u6cd5 \" + methodName + \" \u6267\u884c\u6210\u529f\uff0c\u8fd4\u56de\u503c\uff1a\" + result);\n            return result; // \u53ef\u5728\u6b64\u5904\u4fee\u6539\u8fd4\u56de\u503c\n        } catch (Exception e) {\n            System.out.println(\"\u3010\u73af\u7ed5\u5f02\u5e38\u3011\u65b9\u6cd5 \" + methodName + \" \u6267\u884c\u51fa\u9519\uff1a\" + e.getMessage());\n            throw e; // \u53ef\u4ee5\u5904\u7406\u6216\u5305\u88c5\u5f02\u5e38\n        } finally {\n            System.out.println(\"\u3010\u73af\u7ed5\u540e\u7f6e\u3011\u65b9\u6cd5 \" + methodName + \" \u6267\u884c\u7ed3\u675f\");\n        }\n    }\n}\n</code></pre>"},{"location":"java/ssm.html#6-aop","title":"6. AOP \u7684\u5e94\u7528\u573a\u666f","text":"<p>pass(\u61d2\u5f97\u5199\u4e86)</p>"},{"location":"java/ssm.html#_2","title":"\u4e09\u3001\u4e8b\u52a1\u2b50","text":"<p>\u200b   Spring \u4e2d\u7684\u4e8b\u52a1\u662f\u5bf9\u6570\u636e\u5e93\u4e8b\u52a1\u7684\u62bd\u8c61\u548c\u7ba1\u7406\u673a\u5236\uff0c\u5176\u6838\u5fc3\u76ee\u6807\u662f\uff1a\u8ba9\u5f00\u53d1\u8005\u65e0\u9700\u624b\u52a8\u7ba1\u7406 commit \u548c rollback\uff0c\u5c31\u80fd\u786e\u4fdd\u4e00\u7ec4\u6570\u636e\u5e93\u64cd\u4f5c\u5177\u5907 ACID \u7279\u6027\u3002</p>"},{"location":"java/ssm.html#1spring","title":"1\u3001Spring \u8fde\u63a5\u6570\u636e\u5e93\u7684\u65b9\u6cd5","text":"<p>\u200b   1\uff09\u5bfc\u5165\u4f9d\u8d56\uff1a\u6570\u636e\u5e93\u9a71\u52a8\u3001spring-boot-starter- data-jdbc</p> <p>\u200b   2\uff09\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\uff1a\u5728 xxx.properties \u4e2d\u7684 spring.datasource</p> <p>\u200b   3\uff09\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 DataSource\u3001 JDBCTemplate</p>"},{"location":"java/ssm.html#2_2","title":"2\u3001\u5f00\u542f\u4e8b\u52a1\u7ba1\u7406","text":"<p>\u200b   1\uff09\u5728\u542f\u52a8\u7c7b\u4e0a\u52a0\u4e00\u4e2a\u6ce8\u89e3\uff1a@EnableTransactionManagement \u6307\u660e\u5f00\u542f\u4e8b\u52a1\u7ba1\u7406</p> <p>\u200b   2\uff09\u4e4b\u540e\u5728\u9700\u8981\u4e8b\u52a1\u7ba1\u7406\u7684\u65b9\u6cd5\u4e0a\u6dfb\u52a0\u4e00\u4e2a @Transactional \u5373\u53ef\u8fdb\u884c\u4e8b\u52a1\u7ba1\u7406</p>"},{"location":"java/ssm.html#3_2","title":"3\u3001\u4e8b\u52a1\u7ba1\u7406\u7684\u539f\u7406","text":"<p>\u200b   Spring \u7684\u4e8b\u52a1\u7ba1\u7406\u662f\u57fa\u4e8e AOP\uff08\u9762\u5411\u5207\u9762\u7f16\u7a0b\uff09 + \u62e6\u622a\u5668\u6a21\u5f0f \u5b9e\u73b0\u7684\uff0c\u5176\u6838\u5fc3\u539f\u7406\u662f\u901a\u8fc7\u4ee3\u7406\u673a\u5236\uff0c\u5728\u76ee\u6807\u65b9\u6cd5\u6267\u884c\u524d\u540e\u81ea\u52a8\u63a7\u5236\u6570\u636e\u5e93\u4e8b\u52a1\u7684\u5f00\u542f\u3001\u63d0\u4ea4\u6216\u56de\u6eda\u3002</p>"},{"location":"java/ssm.html#31","title":"3.1 \u52a8\u6001\u4ee3\u7406","text":"<p>\u5f53\u4e00\u4e2a\u65b9\u6cd5\u88ab <code>@Transactional</code> \u6ce8\u89e3\u6807\u8bb0\u65f6\uff1a</p> <ul> <li>Spring \u5bb9\u5668\u4f1a\u4e3a\u8be5 Bean \u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\u5bf9\u8c61\uff08Proxy\uff09\u3002</li> <li>\u539f\u59cb\u5bf9\u8c61\u7684\u65b9\u6cd5\u8c03\u7528\u4f1a\u88ab\u4ee3\u7406\u62e6\u622a\u3002</li> <li>\u4ee3\u7406\u5728\u65b9\u6cd5\u6267\u884c\u524d\u5f00\u542f\u4e8b\u52a1\uff0c\u6267\u884c\u540e\u6839\u636e\u7ed3\u679c\u51b3\u5b9a\u63d0\u4ea4\u6216\u56de\u6eda\u3002</li> </ul>"},{"location":"java/ssm.html#32","title":"3.2 \u5173\u952e\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u4f5c\u7528 <code>PlatformTransactionManager</code> \u4e8b\u52a1\u7ba1\u7406\u5668\u63a5\u53e3\uff0c\u8d1f\u8d23\u5b9e\u9645\u7684\u4e8b\u52a1\u64cd\u4f5c\uff08\u5982 <code>DataSourceTransactionManager</code>\uff09\u3002 <code>@Transactional</code> \u58f0\u660e\u5f0f\u4e8b\u52a1\u6ce8\u89e3\uff0c\u5b9a\u4e49\u4e8b\u52a1\u5c5e\u6027\uff08\u4f20\u64ad\u884c\u4e3a\u3001\u9694\u79bb\u7ea7\u522b\u7b49\uff09\u3002 <code>TransactionInterceptor</code> \u4e8b\u52a1\u62e6\u622a\u5668\uff0cAOP \u7684\u901a\u77e5\u903b\u8f91\uff0c\u771f\u6b63\u6267\u884c\u201c\u5f00\u542f \u2192 \u6267\u884c \u2192 \u63d0\u4ea4/\u56de\u6eda\u201d\u7684\u6d41\u7a0b\u3002 <code>TransactionSynchronizationManager</code> \u7ed1\u5b9a\u5f53\u524d\u7ebf\u7a0b\u4e0e\u4e8b\u52a1\u8d44\u6e90\uff08\u5982 Connection\uff09\uff0c\u4fdd\u8bc1\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u4f7f\u7528\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u3002"},{"location":"java/ssm.html#33","title":"3.3 \u6267\u884c\u6d41\u7a0b","text":"<pre><code>1. \u8c03\u7528 @Transactional \u65b9\u6cd5\n        \u2193\n2. \u4ee3\u7406\u62e6\u622a\uff08TransactionInterceptor\uff09\n        \u2193\n3. \u83b7\u53d6\u4e8b\u52a1\u7ba1\u7406\u5668\uff08PlatformTransactionManager\uff09\n        \u2193\n4. \u5f00\u542f\u4e8b\u52a1\uff08doBegin\uff09 \u2192 \u83b7\u53d6 Connection \u5e76\u7ed1\u5b9a\u5230\u5f53\u524d\u7ebf\u7a0b\n        \u2193\n5. \u6267\u884c\u4e1a\u52a1\u65b9\u6cd5\uff08\u6240\u6709 DAO \u64cd\u4f5c\u5171\u4eab\u540c\u4e00 Connection\uff09\n        \u2193\n6. \u65b9\u6cd5\u6b63\u5e38\u7ed3\u675f \u2192 \u63d0\u4ea4\u4e8b\u52a1\n        \u2193\n7. \u5f02\u5e38\u629b\u51fa \u2192 \u56de\u6eda\u4e8b\u52a1\uff08\u9ed8\u8ba4 RuntimeException \u548c Error\uff09\n        \u2193\n8. \u6e05\u7406\u8d44\u6e90\uff08\u89e3\u7ed1 Connection\uff09\n</code></pre>"},{"location":"java/ssm.html#4transactional","title":"4\u3001@Transactional","text":"<p>\u200b   <code>@Transactional</code> \u662f Spring \u6846\u67b6\u63d0\u4f9b\u7684\u58f0\u660e\u5f0f\u4e8b\u52a1\u7ba1\u7406\u6ce8\u89e3\uff0c\u5f00\u53d1\u8005\u53ea\u9700\u5728\u65b9\u6cd5\u6216\u7c7b\u4e0a\u6dfb\u52a0\u8be5\u6ce8\u89e3\uff0c\u5373\u53ef\u81ea\u52a8\u83b7\u5f97\u4e8b\u52a1\u652f\u6301\uff0c\u65e0\u9700\u624b\u52a8\u7f16\u5199 <code>commit</code> \u548c <code>rollback</code> \u4ee3\u7801\u3002</p>"},{"location":"java/ssm.html#41","title":"4.1 \u8be5\u6ce8\u89e3\u7684\u5c5e\u6027","text":"<p>\u200b   timeout\uff1a\u5f53\u4e8b\u52a1\u8d85\u8fc7\u8fd9\u4e2a\u4e8b\u4ef6\u540e\uff0c\u5c31\u4f1a\u56de\u6eda\u3002</p> <p>\u200b   readOnly\uff1a\u53ea\u8bfb\u4f18\u5316\uff08\u4f18\u5316\u64cd\u4f5c\uff0c\u5c31\u4e0d\u9700\u8981\u5f00\u542f\u4e00\u5806\u4e8b\u52a1\u7ba1\u7406\u76f8\u5173\u7684\u4e1c\u897f\u4e86\uff09</p> <p>\u200b   rollbackFor\uff1aDefines zero (0) or more exception types, which must be subclasses of Throwable, indicating which exception types must cause a transaction rollback.</p> <p>\u200b   \u6ce8\uff1a\u8fd0\u884c\u65f6\u5f02\u5e38\u90fd\u56de\u6eda\uff0c\u800c\u7f16\u8bd1\u65f6\u5f02\u5e38\u4e0d\u56de\u6eda\u3002\u800crollbackFor\u5c31\u662f\u7528\u6765\u6307\u5b9a\u90a3\u4e9b\u5f02\u5e38\u9700\u8981\u56de\u6eda</p> <p>\u200b   \u4e0b\u9762\uff0c\u91cd\u70b9\u5c5e\u6027\u5355\u72ec\u4ecb\u7ecd</p>"},{"location":"java/ssm.html#42-isolation","title":"4.2 \u9694\u79bb\u7ea7\u522b isolation","text":"<p>\u200b   \u9694\u79bb\u6027\uff08Isolation\uff09 \u662f\u4e8b\u52a1 ACID \u7279\u6027\u4e2d\u7684 \"I\"\uff0c\u5b83\u63a7\u5236\u7684\u662f\uff1a\u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6\uff0c\u5f7c\u6b64\u4e4b\u95f4\u7684\u53ef\u89c1\u6027\u548c\u5f71\u54cd\u7a0b\u5ea6\u3002\u5982\u679c\u5b8c\u5168\u4e0d\u9694\u79bb \u2192 \u6570\u636e\u6df7\u4e71\u3002\u5982\u679c\u5b8c\u5168\u9694\u79bb \u2192 \u6027\u80fd\u6781\u5dee\uff0c\u51e0\u4e4e\u4e32\u884c\u6267\u884c\u3002\u6240\u4ee5\uff0c\u6570\u636e\u5e93\u63d0\u4f9b\u4e86 \u4e0d\u540c\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u5728\u6570\u636e\u4e00\u81f4\u6027\u548c\u5e76\u53d1\u6027\u80fd\u4e4b\u95f4\u505a\u6743\u8861\u3002</p> <p>\u200b   \u4e00\u4e9b\u5e76\u53d1\u95ee\u9898\u4ecb\u7ecd\uff1a</p> \u95ee\u9898 \u5b9a\u4e49 \u793a\u4f8b \u810f\u8bfb\uff08Dirty Read\uff09 \u4e00\u4e2a\u4e8b\u52a1\u8bfb\u53d6\u4e86\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5c1a\u672a\u63d0\u4ea4\u7684\u6570\u636e\u3002 \u4e8b\u52a1 A \u4fee\u6539\u4e86\u6570\u636e\u4f46\u672a\u63d0\u4ea4\uff0c\u4e8b\u52a1 B \u8bfb\u5230\u4e86\u8fd9\u4e2a\u4fee\u6539\uff1b\u5982\u679c A \u56de\u6eda\uff0cB \u8bfb\u5230\u7684\u5c31\u662f\u201c\u810f\u201d\u6570\u636e\u3002 \u4e0d\u53ef\u91cd\u590d\u8bfb\uff08Non-repeatable Read\uff09 \u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u4e24\u6b21\u8bfb\u53d6\u540c\u4e00\u884c\u6570\u636e\uff0c\u7ed3\u679c\u4e0d\u540c\u3002 \u4e8b\u52a1 A \u7b2c\u4e00\u6b21\u8bfb id=1 \u7684\u8bb0\u5f55\u4e3a name='\u5f20\u4e09'\uff1b\u4e8b\u52a1 B \u5c06\u5176\u6539\u4e3a '\u674e\u56db' \u5e76\u63d0\u4ea4\uff1bA \u518d\u6b21\u8bfb\u53d6\uff0c\u53d8\u6210\u4e86 '\u674e\u56db'\u3002 \u5e7b\u8bfb\uff08Phantom Read\uff09 \u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u4e24\u6b21\u6267\u884c\u76f8\u540c\u67e5\u8be2\uff0c\u8fd4\u56de\u7684\u884c\u6570\u4e0d\u540c\uff08\u51fa\u73b0\u4e86\u201c\u5e7b\u5f71\u201d\u884c\uff09\u3002 \u4e8b\u52a1 A \u67e5\u8be2 <code>age &gt; 18</code> \u6709 3 \u6761\u8bb0\u5f55\uff1b\u4e8b\u52a1 B \u63d2\u5165\u4e00\u6761 <code>age=20</code> \u7684\u8bb0\u5f55\u5e76\u63d0\u4ea4\uff1bA \u518d\u6b21\u67e5\u8be2\uff0c\u53d8\u6210 4 \u6761\u3002 <p>\u200b   \u9694\u79bb\u7ea7\u522b\uff1a</p> \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb \u8bf4\u660e READ UNCOMMITTED\uff08\u8bfb\u672a\u63d0\u4ea4\uff09 \u2705 \u5141\u8bb8 \u2705 \u5141\u8bb8 \u2705 \u5141\u8bb8 \u6700\u4f4e\u7ea7\u522b\uff0c\u6027\u80fd\u6700\u597d\uff0c\u4f46\u6570\u636e\u6700\u4e0d\u5b89\u5168\u3002 READ COMMITTED\uff08\u8bfb\u5df2\u63d0\u4ea4\uff09 \u274c \u7981\u6b62 \u2705 \u5141\u8bb8 \u2705 \u5141\u8bb8 \u5927\u591a\u6570\u6570\u636e\u5e93\u9ed8\u8ba4\u7ea7\u522b\uff08\u5982 Oracle\u3001SQL Server\uff09\u3002\u53ea\u80fd\u8bfb\u5df2\u63d0\u4ea4\u7684\u6570\u636e\u3002 REPEATABLE READ\uff08\u53ef\u91cd\u590d\u8bfb\uff09 \u274c \u7981\u6b62 \u274c \u7981\u6b62 \u2705 \u5141\u8bb8\uff08\u90e8\u5206\u6570\u636e\u5e93\u4e0d\u5141\u8bb8\uff09 MySQL \u9ed8\u8ba4\u7ea7\u522b\u3002\u4fdd\u8bc1\u4e8b\u52a1\u5185\u591a\u6b21\u8bfb\u53d6\u540c\u4e00\u6570\u636e\u7ed3\u679c\u4e00\u81f4\u3002 SERIALIZABLE\uff08\u4e32\u884c\u5316\uff09 \u274c \u7981\u6b62 \u274c \u7981\u6b62 \u274c \u7981\u6b62 \u6700\u9ad8\u7ea7\u522b\uff0c\u4e8b\u52a1\u4e32\u884c\u6267\u884c\uff0c\u907f\u514d\u6240\u6709\u5e76\u53d1\u95ee\u9898\uff0c\u4f46\u6027\u80fd\u6700\u5dee\u3002"},{"location":"java/ssm.html#43-propagation","title":"4.3 \u4f20\u64ad\u884c\u4e3a propagation","text":"<p>\u200b   \u4f20\u64ad\u884c\u4e3a\uff08Propagation Behavior\uff09 \u662f\u6307\uff1a\u5f53\u4e00\u4e2a\u4e8b\u52a1\u65b9\u6cd5\u88ab\u53e6\u4e00\u4e2a\u4e8b\u52a1\u65b9\u6cd5\u8c03\u7528\u65f6\uff0c\u4e8b\u52a1\u8be5\u5982\u4f55\u8fdb\u884c\u4f20\u64ad\u6216\u5904\u7406\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a  \"\u6211\u5df2\u7ecf\u5728\u4e00\u4e2a\u4e8b\u52a1\u91cc\u4e86\uff0c\u73b0\u5728\u53c8\u8c03\u7528\u4e86\u53e6\u4e00\u4e2a\u6807\u6709 <code>@Transactional</code> \u7684\u65b9\u6cd5\uff0c\u90a3\u8fd9\u4e2a\u65b0\u65b9\u6cd5\u662f\u52a0\u5165\u5f53\u524d\u4e8b\u52a1\uff1f\u65b0\u5efa\u4e00\u4e2a\u4e8b\u52a1\uff1f\u8fd8\u662f\u4e0d\u4f7f\u7528\u4e8b\u52a1\uff1f\u201d</p> <p>\u200b   \u8fd9\u5c31\u662f \u4e8b\u52a1\u7684\u4f20\u64ad\u884c\u4e3a \u8981\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <pre><code>\u7c7b\u6bd4\u7406\u89e3\n\n\u60f3\u8c61\u4f60\u6b63\u5728\u505a\u4e00\u987f\u996d\uff08\u5916\u5c42\u4e8b\u52a1\uff09\uff0c\u8fc7\u7a0b\u4e2d\u9700\u8981\u6d17\u83dc\u3001\u5207\u83dc\u3001\u7092\u83dc\u3002\n\n- \u5982\u679c\u201c\u6d17\u83dc\u201d\u4e5f\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u4efb\u52a1\uff08\u5185\u5c42\u65b9\u6cd5\uff09\uff0c\u4f46\u5b83\u5fc5\u987b\u548c\u505a\u996d\u5728\u540c\u4e00\u4e2a\u6d41\u7a0b\u4e2d\u5b8c\u6210 \u2192 \u90a3\u5b83\u5c31**\u52a0\u5165\u5f53\u524d\u4e8b\u52a1**\u3002\n- \u5982\u679c\u201c\u63a5\u4e2a\u7535\u8bdd\u201d\u662f\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5b83\u4e0d\u5f71\u54cd\u505a\u996d \u2192 \u5b83\u53ef\u4ee5**\u4e0d\u53c2\u4e0e\u4e8b\u52a1**\u3002\n- \u5982\u679c\u201c\u5c1d\u4e00\u53e3\u54b8\u6de1\u201d\u5931\u8d25\u4e86\uff0c\u4f60\u60f3\u56de\u6eda\u6574\u4e2a\u505a\u996d\u8fc7\u7a0b \u2192 \u90a3\u5b83\u5c31\u548c\u5916\u5c42\u4e8b\u52a1**\u7ed1\u5b9a\u5728\u4e00\u8d77**\u3002\n- \u5982\u679c\u201c\u70e7\u4e00\u58f6\u6c34\u201d\u662f\u53e6\u4e00\u4e2a\u72ec\u7acb\u4efb\u52a1\uff0c\u5373\u4f7f\u5b83\u5931\u8d25\u4e5f\u4e0d\u5f71\u54cd\u505a\u996d \u2192 \u5b83\u5e94\u8be5**\u5f00\u542f\u4e00\u4e2a\u65b0\u4e8b\u52a1**\u3002\n\n\u8fd9\u5c31\u662f\u4e0d\u540c\u4f20\u64ad\u884c\u4e3a\u7684\u73b0\u5b9e\u6620\u5c04\u3002\n\n\nSpring \u4e2d\u7684 7 \u79cd\u4f20\u64ad\u884c\u4e3a\n\n| \u4f20\u64ad\u884c\u4e3a | \u542b\u4e49 |\n|--------|------|\n| `REQUIRED`\uff08\u9ed8\u8ba4\uff09 | \u5982\u679c\u5f53\u524d\u6709\u4e8b\u52a1\uff0c\u5c31\u52a0\u5165\uff1b\u6ca1\u6709\u5c31\u65b0\u5efa\u4e00\u4e2a\u3002 |\n| `REQUIRES_NEW` | \u65e0\u8bba\u5f53\u524d\u662f\u5426\u6709\u4e8b\u52a1\uff0c\u90fd**\u6302\u8d77\u5f53\u524d\u4e8b\u52a1\uff0c\u65b0\u5efa\u4e00\u4e2a\u65b0\u4e8b\u52a1**\u3002 |\n| `SUPPORTS` | \u652f\u6301\u5f53\u524d\u4e8b\u52a1\uff0c\u4f46\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u4e5f\u4e0d\u521b\u5efa\u65b0\u4e8b\u52a1\uff08\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u8fd0\u884c\uff09\u3002 |\n| `NOT_SUPPORTED` | \u4e0d\u652f\u6301\u4e8b\u52a1\uff0c**\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u6267\u884c**\uff0c\u5982\u679c\u5f53\u524d\u6709\u4e8b\u52a1\u5219\u5c06\u5176\u6302\u8d77\u3002 |\n| `MANDATORY` | \u5fc5\u987b\u5728\u4e8b\u52a1\u4e2d\u8fd0\u884c\uff0c\u5982\u679c\u5f53\u524d\u6ca1\u6709\u4e8b\u52a1\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002 |\n| `NEVER` | \u4e0d\u80fd\u5728\u4e8b\u52a1\u4e2d\u8fd0\u884c\uff0c\u5982\u679c\u5f53\u524d\u6709\u4e8b\u52a1\uff0c\u5219\u629b\u51fa\u5f02\u5e38\u3002 |\n| `NESTED` | \u5982\u679c\u5f53\u524d\u6709\u4e8b\u52a1\uff0c\u5219\u5728\u5d4c\u5957\u4e8b\u52a1\u4e2d\u6267\u884c\uff1b\u5426\u5219\u65b0\u5efa\u4e00\u4e2a\u4e8b\u52a1\u3002\uff08\u7c7b\u4f3c `REQUIRED`\uff0c\u4f46\u53ef\u72ec\u7acb\u56de\u6eda\uff09 \n</code></pre>"},{"location":"java/ssm.html#springmvc","title":"\u56db\u3001SpringMvc\u2b50\u2b50","text":""},{"location":"java/ssm.html#1-requestmapping","title":"1. RequestMapping","text":"<p>\u200b   \u8def\u5f84\u6620\u5c04\uff1a\u8d1f\u8d23\u6620\u5c04\u65b9\u6cd5\u4e0e\u8bf7\u6c42\u8def\u5f84\u3002</p> <p>\u200b   \u8def\u5f84\u4f4d\u7f6e\u901a\u914d\u7b26\uff1a*\u5339\u914d\u4efb\u610f\u591a\u5b57\u7b26  ** \u5339\u914d\u4efb\u610f\u591a\u5c42\u8def\u5f84  \uff1f\u5339\u914d\u5355\u4e2a\u5b57\u7b26  \u5982\u679c\u6709\u591a\u4e2a\u65b9\u6cd5\u90fd\u80fd\u5339\u914d\u4e0a\u8bf7\u6c42\u8def\u5f84\uff0c\u5219\u6309\u7740\u7cbe\u786e\u5ea6\u6765\u5904\u7406\uff0c\u4e5f\u5c31\u662f\u8d8a\u7cbe\u786e\uff0c\u8d8a\u4f18\u5148\u3002</p>"},{"location":"java/ssm.html#_3","title":"\u8bf7\u6c42\u9650\u5b9a\uff1a","text":"<p>\u200b   1\uff09method</p> <p>\u200b   2\uff09params</p> <p>\u200b   3\uff09headers</p> <p>\u200b   4\uff09consumes</p> <p>\u200b   5\uff09produces</p>"},{"location":"java/ssm.html#2-springmvc","title":"2. SpringMvc \u4e2d\u7684\u8bf7\u6c42\u5904\u7406","text":""},{"location":"java/ssm.html#1keyvalue","title":"1\u3001\u63a5\u6536\u666e\u901a\u8bf7\u6c42\u53c2\u6570\uff08<code>?key=value</code>\uff09","text":"<p>\u200b   \u9002\u7528\u4e8e GET \u8bf7\u6c42\u7684\u67e5\u8be2\u53c2\u6570 \u6216 POST \u8bf7\u6c42\u7684\u8868\u5355\u6570\u636e\u3002\u76f4\u63a5\u7ed1\u5b9a\u6216\u8005\u7528 @RequestParam \u6ce8\u89e3</p>"},{"location":"java/ssm.html#2restful","title":"2\u3001\u63a5\u53d7\u8def\u5f84\u53d8\u91cf\uff08RESTful \u98ce\u683c\uff09","text":"<pre><code>@GetMapping(\"/user/{id}\")\npublic String getUserById(@PathVariable Long id) {\n    System.out.println(\"\u7528\u6237ID\uff1a\" + id);\n    return \"user\";\n}               \n</code></pre>"},{"location":"java/ssm.html#3jsonxml","title":"3\u3001\u63a5\u6536\u8bf7\u6c42\u4f53\uff08JSON/XML\uff09\u6570\u636e","text":"<pre><code>@PostMapping(\"/user\")\npublic String createUser(@RequestBody User user) {\n    System.out.println(\"\u521b\u5efa\u7528\u6237\uff1a\" + user.getName());\n    return \"created\";\n}\n</code></pre> <ul> <li>\u5ba2\u6237\u7aef\u8bbe\u7f6e <code>Content-Type: application/json</code></li> <li>\u540e\u7aef\u6709 Jackson/Gson \u7b49 JSON \u8f6c\u6362\u5668\uff08Spring Boot \u9ed8\u8ba4\u96c6\u6210\uff09</li> </ul>"},{"location":"java/ssm.html#4_2","title":"4\u3001\u63a5\u6536\u6587\u4ef6\u4e0a\u4f20","text":"<pre><code>@PostMapping(\"/upload\")\npublic String uploadFile(@RequestPart(\"file\") MultipartFile file,\n                         @RequestParam String description) {\n    System.out.println(\"\u6587\u4ef6\u540d\uff1a\" + file.getOriginalFilename());\n    System.out.println(\"\u63cf\u8ff0\uff1a\" + description);\n    return \"uploaded\";\n}\n</code></pre>"},{"location":"java/ssm.html#5-json","title":"5\u3001\u81ea\u52a8\u7ed1\u5b9a\u5bf9\u8c61\uff08\u8868\u5355\u6216 JSON\uff09","text":"<pre><code>public class User {\n    private String name;\n    private int age;\n    // getter/setter\n}\n\n@PostMapping(\"/user/form\")\npublic String createUserForm(User user) {\n    System.out.println(\"\u7528\u6237\uff1a\" + user.getName());\n    return \"success\";\n}\n</code></pre> <ul> <li>\u8868\u5355\u63d0\u4ea4 \u2192 \u4f7f\u7528 <code>User user</code></li> <li>JSON \u63d0\u4ea4 \u2192 \u5fc5\u987b\u52a0 <code>@RequestBody</code></li> </ul>"},{"location":"java/ssm.html#6header","title":"6\u3001\u63a5\u6536\u8bf7\u6c42\u5934\uff08Header\uff09\u4fe1\u606f","text":"<pre><code>@GetMapping(\"/info\")\npublic String getInfo(@RequestHeader(\"User-Agent\") String userAgent,\n                      @RequestHeader(\"Authorization\") String token) {\n    System.out.println(\"\u6d4f\u89c8\u5668\uff1a\" + userAgent);\n    System.out.println(\"Token\uff1a\" + token);\n    return \"info\";\n}\n</code></pre>"},{"location":"java/ssm.html#7-cookies","title":"7. \u63a5\u6536 Cookies","text":"<pre><code>@GetMapping(\"/cookie\")\npublic String getCookie(@CookieValue(\"JSESSIONID\") String sessionId) {\n    System.out.println(\"Session ID\uff1a\" + sessionId);\n    return \"cookie\";\n}\n</code></pre>"},{"location":"java/ssm.html#8http","title":"8\u3001\u83b7\u53d6\u6574\u4e2ahttp\u8bf7\u6c42","text":"<pre><code>    /**\n     *\n     * @param httpEntity \u5b83\u7684\u6cdb\u578b\u5c31\u662f\u8981\u628a http \u8bf7\u6c42\u4f53\u8f6c\u4e3a\u8fd9\u4e2a\u6cdb\u578b\n     * @return\n     */\n    @PostMapping(\"/test03\")\n    public String test03(HttpEntity&lt;User&gt; httpEntity){\n        // \u83b7\u5f97\u8bf7\u6c42\u5934\n        httpEntity.getHeaders().forEach((n, v) -&gt; System.out.println(n + \":\" + v));\n        // \u83b7\u5f97\u8bf7\u6c42\u53c2\u6570\n        System.out.println(\"user = \" +  httpEntity.getBody());\n        return \"ok_test03\";\n    }\n</code></pre>"},{"location":"java/ssm.html#3-springmvc","title":"3. SpringMvc \u4e2d\u7684\u54cd\u5e94\u5904\u7406","text":""},{"location":"java/ssm.html#1-json","title":"1. \u8fd4\u56dejson","text":"<p>\u200b   \u6ce8\u89e3 @ResponseBody \u80fd\u591f\u5c06\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u81ea\u52a8\u7684\u5c01\u88c5\u4e3ajson\uff0c\u73b0\u5728\u90fd\u7528\u7ec4\u5408\u6ce8\u89e3 @RestController</p>"},{"location":"java/ssm.html#2_3","title":"2. \u6587\u4ef6\u4e0b\u8f7d\uff08\u8fd4\u56de\u7684\u6570\u636e\u662f\u8ba9\u6d4f\u89c8\u5668\u4e0b\u8f7d\u7684\uff09","text":"<pre><code>  @RequestMapping(\"/test03\")\n    public ResponseEntity&lt;byte[]&gt; download() throws Exception{\n        FileInputStream fileInputStream = new FileInputStream(\"E:\\\\school_work\\\\glories\\\\\u5934\u50cf\\\\2.jpg\");\n\n        byte[] alls = fileInputStream.readAllBytes();\n\n        return ResponseEntity.ok().contentType(MediaType.APPLICATION_OCTET_STREAM).contentLength(alls.length)\n                .header(\"Content-Disposition\", \"attachment;filename=2.jpg\")\n                .body(alls);\n    }\n</code></pre> <p>\u95ee\u98981\uff1a\u6587\u4ef6\u540d\u5982\u679c\u662f\u4e2d\u6587\u4f1a\u4e71\u7801</p> <p>\u95ee\u98982\uff1a\u6587\u4ef6\u592a\u5927\u4f1a\u51fa\u73b0oom</p> <pre><code>@RequestMapping(\"/test03\")\n    public ResponseEntity&lt;InputStreamResource&gt; download() throws Exception{\n\n        FileInputStream fileInputStream = new FileInputStream(\"E:\\\\school_work\\\\glories\\\\\u5934\u50cf\\\\2.jpg\");\n        // \u4e00\u53e3\u6c14\u8bfb\u4f1a\u5f02\u5e38\n//        byte[] alls = fileInputStream.readAllBytes();\n        InputStreamResource resource = new InputStreamResource(fileInputStream)\n        // \u89e3\u51b3\u4e2d\u6587\u4e71\u7801\uff1a\u628a\u4e2d\u6587\u8f6c\u7801\u6210utf-8\n        String name = URLEncoder.encode(\"\u54c8\u54c8.jpg\", \"utf-8\");\n\n        return ResponseEntity.ok().contentType(MediaType.APPLICATION_OCTET_STREAM).contentLength(fileInputStream.available())\n                .header(\"Content-Disposition\", \"attachment;filename=\"+ name)\n                .body(resource);\n    }\n</code></pre>"},{"location":"java/ssm.html#spring-mvc","title":"\u4e94\u3001Spring Mvc \u7684\u6700\u4f73\u5b9e\u8df5\uff01\uff01\uff01\u2b50\u2b50\u2b50","text":""},{"location":"java/ssm.html#1-restful","title":"1. RESTful\u98ce\u683c\u2b50\u2b50\u2b50","text":"<p>\u200b   REST \u5c31\u662f\u628a\u4efb\u4f55web\u8bf7\u6c42\u770b\u4f5c\u662f\u5bf9\u8d44\u6e90\u7684\u64cd\u4f5c\uff0c\u5bf9\u540c\u4e00\u8d44\u6e90\u7684\u4e0d\u540c\u64cd\u4f5c\uff0c\u4ed6\u4eec\u7684\u8bf7\u6c42\u8def\u5f84\u662f\u4e00\u6837\u7684\uff0c\u5177\u4f53\u662f\u901a\u8fc7\u4e0d\u540c\u7684\u52a8\u4f5c\u6765\u533a\u5206\u4e0d\u540c\u5904\u7406\u65b9\u6cd5\u7684\u3002</p>"},{"location":"java/ssm.html#2_4","title":"2. \u62e6\u622a\u5668\u2b50\u2b50","text":""},{"location":"java/ssm.html#1_3","title":"1. \u6982\u5ff5","text":"<p>\u200b   \u62e6\u622a\u5668\uff08Interceptor\uff09 \u662f Spring MVC \u63d0\u4f9b\u7684\u4e00\u79cd\u673a\u5236\uff0c\u7528\u4e8e\u5728 \u8bf7\u6c42\u5904\u7406\u7684\u524d\u540e \u5bf9\u8bf7\u6c42\u8fdb\u884c\u9884\u5904\u7406\u6216\u540e\u5904\u7406\uff0c\u800c\u65e0\u9700\u4fee\u6539\u6bcf\u4e2a\u63a7\u5236\u5668\u7684\u4ee3\u7801\u3002\u5b83\u7c7b\u4f3c\u4e8e Servlet \u4e2d\u7684 Filter\uff08\u8fc7\u6ee4\u5668\uff09\uff0c\u4f46\u66f4\u8d34\u8fd1 Spring MVC \u7684\u6267\u884c\u6d41\u7a0b\uff0c\u4e3b\u8981\u7528\u4e8e\uff1a</p> <ul> <li>\u6743\u9650\u6821\u9a8c\uff08\u5982\u767b\u5f55\u68c0\u67e5\uff09</li> <li>\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u6027\u80fd\u76d1\u63a7\uff08\u7edf\u8ba1\u8bf7\u6c42\u8017\u65f6\uff09</li> <li>\u8bf7\u6c42\u53c2\u6570\u9884\u5904\u7406</li> <li>\u9632\u6b62\u91cd\u590d\u63d0\u4ea4</li> <li>\u7f16\u7801\u8bbe\u7f6e\u7b49</li> </ul>"},{"location":"java/ssm.html#2_5","title":"2. \u6267\u884c\u65f6\u673a\uff08\u4e0e\u8bf7\u6c42\u751f\u547d\u5468\u671f\u7684\u5173\u7cfb\uff09","text":"<p>\u200b   \u8bf7\u6c42 \u2192 preHandle() \u2192 (\u76ee\u6807\u65b9\u6cd5 execute) \u2192 postHandle() \u2192 (\u89c6\u56fe\u6e32\u67d3) \u2192 afterCompletion()</p>"},{"location":"java/ssm.html#3_3","title":"3. \u4e09\u4e2a\u6838\u5fc3\u65b9\u6cd5","text":"\u65b9\u6cd5 \u89e6\u53d1\u65f6\u673a \u8fd4\u56de\u503c\u542b\u4e49 <code>boolean preHandle(HttpServletRequest, HttpServletResponse, Object handler)</code> \u63a7\u5236\u5668\u65b9\u6cd5\u6267\u884c\u524d <code>true</code>\uff1a\u653e\u884c\uff0c\u7ee7\u7eed\u6267\u884c\uff1b<code>false</code>\uff1a\u4e2d\u65ad\uff0c\u4e0d\u518d\u6267\u884c\u540e\u7eed\u64cd\u4f5c <code>void postHandle(HttpServletRequest, HttpServletResponse, Object handler, ModelAndView modelAndView)</code> \u63a7\u5236\u5668\u65b9\u6cd5\u6267\u884c\u540e\uff0c\u89c6\u56fe\u6e32\u67d3\u524d \u901a\u5e38\u7528\u4e8e\u4fee\u6539 Model \u6216 View <code>void afterCompletion(HttpServletRequest, HttpServletResponse, Object handler, Exception ex)</code> \u6574\u4e2a\u8bf7\u6c42\u5b8c\u6210\u4e4b\u540e\uff08\u89c6\u56fe\u6e32\u67d3\u5b8c\u6bd5\uff09 \u7528\u4e8e\u8d44\u6e90\u6e05\u7406\u3001\u5f02\u5e38\u5904\u7406\u7b49 <p>\u26a0\ufe0f \u6ce8\u610f\uff1a - <code>postHandle</code> \u548c <code>afterCompletion</code> \u53ea\u6709\u5728 <code>preHandle</code> \u8fd4\u56de <code>true</code> \u65f6\u624d\u4f1a\u6267\u884c\u3002 - \u5982\u679c <code>preHandle</code> \u8fd4\u56de <code>false</code>\uff0c\u5219\u540e\u7eed\u90fd\u4e0d\u4f1a\u6267\u884c\u3002</p>"},{"location":"java/ssm.html#4_3","title":"4. \u5b9e\u73b0\u65b9\u5f0f","text":"<p>\u200b   Spring MVC \u4e2d\u5b9e\u73b0\u62e6\u622a\u5668\u6709\u4e24\u79cd\u4e3b\u8981\u65b9\u5f0f\uff1a\u7b2c\u4e8c\u79cd\u8fc7\u65f6\u4e86\uff0c\u5c31\u4e0d\u8bb0\u5f55\u4e86\u3002</p> <p>\u2705 \u65b9\u5f0f\u4e00\uff1a\u5b9e\u73b0 <code>HandlerInterceptor</code> \u63a5\u53e3\uff08\u63a8\u8350\uff09\uff0c</p> <pre><code>import org.springframework.web.servlet.HandlerInterceptor;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class LoginInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        // \u6a21\u62df\u767b\u5f55\u68c0\u67e5\n        Object user = request.getSession().getAttribute(\"user\");\n        if (user == null) {\n            response.sendRedirect(\"/login\"); // \u672a\u767b\u5f55\uff0c\u8df3\u8f6c\u5230\u767b\u5f55\u9875\n            return false; // \u4e2d\u65ad\u8bf7\u6c42\n        }\n        return true; // \u653e\u884c\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\n        // \u53ef\u4ee5\u4fee\u6539 modelAndView\uff0c\u6bd4\u5982\u6dfb\u52a0\u516c\u5171\u6570\u636e\n        System.out.println(\"postHandle: \u63a7\u5236\u5668\u6267\u884c\u5b8c\u6bd5\");\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n        // \u8bf7\u6c42\u7ed3\u675f\uff0c\u53ef\u7528\u4e8e\u6e05\u7406\u8d44\u6e90\n        System.out.println(\"afterCompletion: \u8bf7\u6c42\u5df2\u5b8c\u6210\");\n    }\n}\n</code></pre> <p>\u200b   \u5f53\u5199\u5b8c\u81ea\u5b9a\u4e49\u7684\u62e6\u622a\u5668\u540e\uff0c\u8981\u628a\u5b83\u6ce8\u518c\u5230 Spring MVC \u7684\u62e6\u622a\u5668\u94fe\u4e2d\u3002\uff08\u901a\u8fc7 WebMvcConfigurer\uff09</p> <pre><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new LoginInterceptor())\n                .addPathPatterns(\"/admin/**\")        // \u62e6\u622a\u54ea\u4e9b\u8def\u5f84\n                .excludePathPatterns(\"/login\", \"/css/**\", \"/js/**\"); // \u653e\u884c\u54ea\u4e9b\u8def\u5f84\n    }\n}   \n</code></pre>"},{"location":"java/ssm.html#5-interceptor","title":"5. Interceptor \u7684\u6267\u884c\u987a\u5e8f","text":"<p>\u200b   preHandle\u987a\u5e8f\u6267\u884c\uff0cpostHandle, afterCompletation \u5012\u5e8f\u6267\u884c\uff0c\u6709\u4e00\u4e2a\u62e6\u622a\u5668\u4e0d\u653e\u884c\uff0c\u6240\u6709 postHandle \u90fd\u4e0d\u80fd\u6267\u884c\uff0c \u90a3\u4e9b\u653e\u884c\u7684\u62e6\u622a\u5668\u7684 afterCompletation \u53ef\u4ee5\u6267\u884c\u3002</p>"},{"location":"java/ssm.html#6-interceptor-fliter","title":"6. Interceptor \u4e0e Fliter \u7684\u533a\u522b","text":"<p>\u200b    <code>Interceptor</code>\uff08\u62e6\u622a\u5668\uff09\u548c <code>Filter</code>\uff08\u8fc7\u6ee4\u5668\uff09\u90fd\u7528\u4e8e\u5bf9\u8bf7\u6c42\u8fdb\u884c\u9884\u5904\u7406\uff0c\u4f46 <code>Filter</code> \u662f Servlet \u89c4\u8303\u7684\u4e00\u90e8\u5206\uff0c\u4f5c\u7528\u4e8e\u6574\u4e2a Web \u8bf7\u6c42\u751f\u547d\u5468\u671f\uff0c\u80fd\u62e6\u622a\u6240\u6709\u8bf7\u6c42\uff08\u5305\u62ec\u9759\u6001\u8d44\u6e90\uff09\uff0c\u4e14\u4e0d\u4f9d\u8d56 Spring \u5bb9\u5668\uff1b\u800c <code>Interceptor</code> \u662f Spring MVC \u63d0\u4f9b\u7684\u673a\u5236\uff0c\u53ea\u62e6\u622a\u63a7\u5236\u5668\uff08Controller\uff09\u76f8\u5173\u7684\u8bf7\u6c42\uff0c\u53ef\u4ee5\u65b9\u4fbf\u5730\u6ce8\u5165 Spring Bean\uff0c\u6267\u884c\u65f6\u673a\u66f4\u7cbe\u7ec6\uff08\u5982 preHandle\u3001postHandle\uff09\uff0c\u66f4\u9002\u5408\u5728\u4e1a\u52a1\u903b\u8f91\u5c42\u8fdb\u884c\u6743\u9650\u6821\u9a8c\u3001\u65e5\u5fd7\u8bb0\u5f55\u7b49\u64cd\u4f5c</p>"},{"location":"java/ssm.html#3_4","title":"3. \u5f02\u5e38\u5904\u7406\u2b50\u2b50\u2b50","text":"<p>\u200b   \u5f02\u5e38\u5904\u7406\u5206\u4e3a\u4e24\u7c7b\uff1a\u7f16\u7a0b\u5f0f\uff08\u5982 <code>try-catch</code>\uff09\u548c \u58f0\u660e\u5f0f\u3002\u5728 Spring \u4e2d\uff0c\u63a8\u8350\u4f7f\u7528 \u58f0\u660e\u5f0f\u5f02\u5e38\u5904\u7406\uff0c\u56e0\u4e3a\u5b83\u66f4\u7b80\u6d01\u3001\u53ef\u7ef4\u62a4\u6027\u5f3a\uff0c\u80fd\u5b9e\u73b0\u5168\u5c40\u7edf\u4e00\u5904\u7406\u3002</p> <p> </p>"},{"location":"java/ssm.html#1_4","title":"1. \u5b9e\u73b0\u65b9\u5f0f","text":"<p>Spring MVC \u63d0\u4f9b\u4e86\u4e24\u4e2a\u6838\u5fc3\u6ce8\u89e3\u6765\u5b9e\u73b0\u58f0\u660e\u5f0f\u5f02\u5e38\u5904\u7406\uff1a</p>"},{"location":"java/ssm.html#exceptionhandler-controller","title":"\u65b9\u5f0f\u4e00\uff1a<code>@ExceptionHandler</code> \u2014\u2014 \u5904\u7406\u5355\u4e2a Controller \u7684\u5f02\u5e38","text":"<p>\u9002\u7528\u4e8e\u67d0\u4e2a\u63a7\u5236\u5668\u5185\u90e8\u7684\u5f02\u5e38\u5904\u7406\u3002</p> <pre><code>@RestController\npublic class UserController {\n\n    @GetMapping(\"/user/{id}\")\n    public User getUser(@PathVariable Long id) {\n        if (id == -1) {\n            throw new UserNotFoundException(\"\u7528\u6237\u4e0d\u5b58\u5728\");\n        }\n        return userService.findById(id);\n    }\n\n    // \u4f7f\u7528 @ExceptionHandler \u5904\u7406\u8be5 Controller \u5185\u90e8\u629b\u51fa\u7684\u5f02\u5e38\n    @ExceptionHandler(UserNotFoundException.class)\n    public ResponseEntity&lt;String&gt; handleUserNotFound(UserNotFoundException ex) {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(\"\u7528\u6237\u672a\u627e\u5230\uff1a\" + ex.getMessage());\n    }\n}\n</code></pre> <ul> <li>\u53ea\u4f5c\u7528\u4e8e\u5f53\u524d Controller</li> <li>\u53ef\u4ee5\u5904\u7406\u7279\u5b9a\u7c7b\u578b\u7684\u5f02\u5e38</li> <li>\u4e0d\u5f71\u54cd\u5176\u4ed6 Controller</li> </ul>"},{"location":"java/ssm.html#controlleradvice","title":"\u65b9\u5f0f\u4e8c\uff1a<code>@ControllerAdvice</code> \u2014\u2014 \u5168\u5c40\u5f02\u5e38\u5904\u7406","text":"<p>\u7528\u4e8e\u96c6\u4e2d\u5904\u7406 \u6240\u6709 Controller \u7684\u5f02\u5e38\uff0c\u662f\u5b9e\u73b0\u201c\u5168\u5c40\u7edf\u4e00\u5f02\u5e38\u5904\u7406\u201d\u7684\u6700\u4f73\u65b9\u5f0f\u3002</p> <pre><code>@ControllerAdvice\n@ResponseBody\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(UserNotFoundException.class)\n    public ResponseEntity&lt;String&gt; handleUserNotFound(UserNotFoundException ex) {\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).body(\"\u7528\u6237\u672a\u627e\u5230\uff1a\" + ex.getMessage());\n    }\n\n    @ExceptionHandler(Exception.class)\n    public ResponseEntity&lt;String&gt; handleGenericException(Exception ex) {\n        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(\"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\uff1a\" + ex.getMessage());\n    }\n}\n</code></pre> <ul> <li>\u4f7f\u7528 <code>@ControllerAdvice</code> \u6ce8\u89e3\u6807\u8bb0\u7c7b</li> <li>\u6240\u6709 Controller \u90fd\u4f1a\u81ea\u52a8\u5e94\u7528\u8be5\u5f02\u5e38\u5904\u7406\u5668</li> <li>\u53ef\u4ee5\u5904\u7406\u4efb\u610f\u7c7b\u578b\u5f02\u5e38\uff08\u5982 <code>Exception.class</code>\uff09</li> <li>\u652f\u6301\u8fd4\u56de JSON\u3001\u89c6\u56fe\u9875\u9762\u7b49</li> </ul>"},{"location":"java/ssm.html#2_6","title":"2. \u9879\u76ee\u4e2d\u6700\u4f73\u5b9e\u8df5","text":"<p>\u200b   \u5728\u5b9e\u9645\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u5f02\u5e38\u79cd\u7c7b\u7e41\u591a\uff0c\u65e0\u6cd5\u7a77\u5c3d\u6240\u6709\u60c5\u51b5\u3002\u56e0\u6b64\uff0c\u540e\u7aef\u5e94\u805a\u7126\u4e8e\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u7684\u6b63\u786e\u5b9e\u73b0\uff0c\u5f53\u9047\u5230\u975e\u6cd5\u72b6\u6001\u3001\u6570\u636e\u6821\u9a8c\u5931\u8d25\u3001\u8d44\u6e90\u4e0d\u5b58\u5728\u7b49\u5f02\u5e38\u60c5\u51b5\u65f6\uff0c\u65e0\u9700\u624b\u52a8\u5904\u7406\u6bcf\u4e00\u4e2a\u5f02\u5e38\uff0c\u800c\u662f\u901a\u8fc7\u4e3b\u52a8\u629b\u51fa\u6709\u610f\u4e49\u7684\u5f02\u5e38\uff0c\u63d0\u524d\u7ec8\u6b62\u5f53\u524d\u4e1a\u52a1\u6d41\u7a0b\u3002</p> <p>\u200b   \u8fd9\u4e9b\u5f02\u5e38\u7531\u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668\uff08\u5982 <code>@ControllerAdvice</code> + <code>@ExceptionHandler</code>\uff09\u7edf\u4e00\u6355\u83b7\uff0c\u8f6c\u6362\u4e3a\u6807\u51c6\u7684\u9519\u8bef\u54cd\u5e94\u683c\u5f0f\uff08\u5982 JSON \u9519\u8bef\u7801\u3001\u6d88\u606f\u63d0\u793a\uff09\uff0c\u8fd4\u56de\u7ed9\u524d\u7aef\u3002\u8fd9\u6837\u65e2\u4fdd\u8bc1\u4e86\u4ee3\u7801\u7684\u7b80\u6d01\u6027\u548c\u53ef\u7ef4\u62a4\u6027\uff0c\u53c8\u80fd\u8ba9\u524d\u7aef\u6e05\u6670\u611f\u77e5\u5230\u5f02\u5e38\u7c7b\u578b\u548c\u539f\u56e0\uff0c\u8fdb\u800c\u505a\u51fa\u76f8\u5e94\u7684\u7528\u6237\u63d0\u793a\u6216\u91cd\u8bd5\u64cd\u4f5c\u3002</p> <p>\u200b   </p>"},{"location":"java/ssm.html#_4","title":"\u5b9e\u73b0\u65b9\u5f0f:","text":"<p>\u200b   1\uff09\u5148\u81ea\u5b9a\u4e49\u4e00\u4e2a\u4e1a\u52a1\u5f02\u5e38\u7c7b\uff0c\u5c5e\u6027\u6709code\uff0cmes</p> <p>\u200b   2\uff09\u518d\u53bb\u7528\u679a\u4e3e\u7c7b\u5217\u51fa\u7cfb\u7edf\u4e2d\u6240\u6709\u53ef\u80fd\u7684\u4e1a\u52a1\u9519\u8bef</p> <p>\u200b   3\uff09\u5f53\u51fa\u73b0\u4e1a\u52a1\u9519\u8bef\u65f6\uff0c\u76f4\u63a5\u629b\u51fa\u4e1a\u52a1\u5f02\u5e38\u5373\u53ef</p> <p>\u200b   4\uff09\u4e4b\u540e\u5c31\u53ef\u4ee5\u4ea4\u7ed9\u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668\u6216\u8005\u662f\u672c\u7c7b\u4e0b\u7684\u5f02\u5e38\u5904\u7406\u5668\u5904\u7406\u4e86</p>"},{"location":"java/ssm.html#4_4","title":"4. \u6570\u636e\u6821\u9a8c\u2b50\u2b50\u2b50","text":"<p>\u200b   1) \u5bfc\u5165\u573a\u666f\u542f\u52a8\u5668</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u200b    2\uff09\u7f16\u5199\u6821\u9a8c\u6ce8\u89e3 @NotNull, @Max, @Min, @Email ...</p> <p>\u200b    3\uff09\u544a\u8bc9 spring MVC \u5f00\u542f\u6821\u9a8c @valid </p> <pre><code> public R add(@RequestBody @Valid Employee employee, BindingResult bindingResult)\n</code></pre> <p>\u200b    4\uff09\u83b7\u5f97\u6821\u9a8c\u7ed3\u679c\uff1aBindResult</p> <pre><code> public R add(@RequestBody @Valid Employee employee, BindingResult bindingResult){\n        if (!bindingResult.hasErrors()){\n            return R.success();\n        }\n        HashMap&lt;String, String&gt; errorMap = new HashMap&lt;&gt;();\n        bindingResult.getFieldErrors().forEach(fieldError -&gt; {\n            errorMap.put(fieldError.getField(), fieldError.getDefaultMessage());\n        });\n\n        return R.error(500, \"\u6821\u9a8c\u5931\u8d25\", errorMap);\n    }\n</code></pre>"},{"location":"java/ssm.html#1-bindresult","title":"1. BindResult","text":"<p>\u200b   \u5b83\u662f\u7528\u6765\u53bb\u83b7\u5f97\u6821\u9a8c\u7ed3\u679c\u7684\u3002\u53ef\u4ee5\u83b7\u5f97\u6821\u9a8c\u7684\u5b57\u6bb5\u4ee5\u53ca\u6821\u9a8c\u7684\u7ed3\u679c\u3002</p>"},{"location":"java/ssm.html#2_7","title":"2. \u5168\u5c40\u5f02\u5e38\u5904\u7406\u6821\u9a8c\u5931\u8d25","text":"<pre><code> // \u5904\u7406\u6821\u9a8c\u5f02\u5e38\n    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public R handleMethodArgumentNotValidException(MethodArgumentNotValidException e) {\n        // \u83b7\u5f97\u6821\u9a8c\u7ed3\u679c\n        BindingResult bindingResult = e.getBindingResult();\n        List&lt;FieldError&gt; fieldErrors = bindingResult.getFieldErrors();\n        HashMap&lt;String, String&gt;data = new HashMap&lt;&gt;();\n        fieldErrors.forEach(fieldError -&gt; {\n            data.put(fieldError.getField(), fieldError.getDefaultMessage());\n        });\n\n        return R.error(500, \"\u6821\u9a8c\u5931\u8d25\", data);\n    }\n</code></pre>"},{"location":"java/ssm.html#3_5","title":"3. \u81ea\u5b9a\u4e49\u6821\u9a8c\u5668","text":"<p>\u200b   1\uff09\u6b63\u5219\u8868\u8fbe\u5f0f</p> <pre><code>@Pattern(regexp=\"^\u7537|\u5973&amp;\" , message = \"\u6027\u522b\u53ea\u80fd\u662f\u7537\u6216\u5973\")\n</code></pre> <p>\u200b   2\uff09\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff08\u5199\u4e00\u4e2a\u81ea\u5b9a\u4e49\u6ce8\u89e3\uff0c\u7136\u540e\u7ed1\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u6821\u9a8c\u5668\uff09</p> <pre><code>==========================================================================================\n1\uff1a\u81ea\u5b9a\u4e49\u6821\u9a8c\u6ce8\u89e3\uff08\u6284\u6e90\u7801\u5373\u53ef\uff09\n@Documented\n@Constraint(\n        validatedBy = {GenderValidator.class}\n)\n@Target({ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n\npublic @interface Gender {\n    String message() default \"{jakarta.validation.constraints.Email.message}\";\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n\n\n}\n===================================================================================\n2\uff1a\u81ea\u5b9a\u4e49\u6821\u9a8c\u5668\uff08\u5b9e\u73b0ConstraintValidator\u63a5\u53e3\uff09\npublic class GenderValidator implements ConstraintValidator&lt;Gender, String&gt; {\n    /**\n     *\n     * @param s \u524d\u7aef\u4f20\u6765\u7684\u5c5e\u6027\n     * @param constraintValidatorContext \u6821\u9a8c\u4e0a\u4e0b\u6587\n     * @return\n     */\n    @Override\n    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {\n        return s.equals(\"\u7537\") || s.equals(\"\u5973\");\n    }\n}\n===================================================================================\n3\uff1a\u5e94\u7528\u81ea\u5df1\u7684\u6821\u9a8c\u5668\n@Constraint(\n        validatedBy = {GenderValidator.class}\n)\n</code></pre>"},{"location":"java/ssm.html#4_5","title":"4 \u9519\u8bef\u4fe1\u606f\u63d0\u793a\uff08\u56fd\u9645\u5316\uff0c\u5176\u5b9e\u6ca1\u5565\u7528\uff09","text":"<p>\u200b   \u56fd\u9645\u5316\u662f\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u6765\u5b8c\u6210\u7684</p> <p>\u200b   1\uff09\u914d\u7f6e\u63d0\u793a\u4fe1\u606f\u7684\u7f16\u7801\u65b9\u5f0f\u4ee5\u53ca\u4f4d\u7f6e\uff08\u9ed8\u8ba4\u662fmessages\uff09</p> <pre><code>spring.messages.encoding=UTF-8\nspring.messages.basename=i18n/messages_en_US\n</code></pre> <p>\u200b   2\uff09\u76f4\u63a5\u5728\u4e0d\u540c\u56fd\u5bb6\u7684\u914d\u7f6e\u6587\u4ef6\u4e0b\u5199\u5c31\u5b8c\u4e8b\u4e86</p> <pre><code># messages_en_US.properties\u4e0b\ngender.message=gender is allowed only for male or female\n# messages_zh_CH.properties\u4e0b\ngender.message=\u6027\u522b\u53ea\u80fd\u4e3a\u7537\u6216\u5973\n# messages\n\u9ed8\u8ba4\u73af\u5883\n</code></pre>"},{"location":"java/ssm.html#5-o","title":"5. \u5404\u79cdo\u7684\u5206\u5c42\u6a21\u578b","text":"<p>\u200b   \u5728\u4f20\u7edf\u7684 Java Web \u5f00\u53d1\u4e2d\uff0c\u5f88\u591a\u5f00\u53d1\u8005\u4e60\u60ef\u4e8e\u4f7f\u7528\u540c\u4e00\u4e2a POJO \u7c7b\uff08\u5982 <code>User</code>\uff09\u65e2\u4f5c\u4e3a\u6570\u636e\u5e93\u5b9e\u4f53\uff0c\u53c8\u4f5c\u4e3a\u63a5\u53e3\u8fd4\u56de\u7ed9\u524d\u7aef\u7684\u6570\u636e\u5bf9\u8c61\u3002\u8fd9\u79cd\u505a\u6cd5\u867d\u7136\u7b80\u5355\uff0c\u4f46\u5b58\u5728\u4e25\u91cd\u7684\u5b89\u5168\u9690\u60a3\u548c\u8bbe\u8ba1\u7f3a\u9677\u3002\u4f8b\u5982\uff0c\u6570\u636e\u5e93\u5b9e\u4f53\u4e2d\u901a\u5e38\u5305\u542b\u654f\u611f\u5b57\u6bb5\uff0c\u5982\u7528\u6237\u5bc6\u7801\u3001\u624b\u673a\u53f7\u3001\u8eab\u4efd\u8bc1\u53f7\u7b49\uff0c\u5982\u679c\u76f4\u63a5\u5c06\u8fd9\u4e2a\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3a JSON \u8fd4\u56de\u7ed9\u524d\u7aef\uff0c\u5c31\u53ef\u80fd\u5bfc\u81f4\u654f\u611f\u4fe1\u606f\u6cc4\u9732\u3002\u5373\u4f7f\u4f60\u5728\u5b57\u6bb5\u4e0a\u52a0\u4e86 <code>@JsonIgnore</code>\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u5c5e\u4e8e\u201c\u6253\u8865\u4e01\u5f0f\u201d\u7f16\u7a0b\uff0c\u96be\u4ee5\u7ef4\u62a4\uff0c\u4e14\u5bb9\u6613\u9057\u6f0f\u3002</p> <p>\u200b   \u66f4\u5408\u7406\u7684\u8bbe\u8ba1\u662f\u91c7\u7528\u5206\u5c42\u6a21\u578b\uff0c\u5c06\u4e0d\u540c\u7684\u804c\u8d23\u5206\u79bb\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5e94\u8be5\u4e3a\u4e0d\u540c\u573a\u666f\u5b9a\u4e49\u4e0d\u540c\u7684 Java Bean\uff1a\u4f7f\u7528 <code>Entity</code> \u7c7b\u4e0e\u6570\u636e\u5e93\u8868\u6620\u5c04\uff0c\u7528\u4e8e\u6301\u4e45\u5c42\u64cd\u4f5c\uff1b\u4f7f\u7528 <code>DTO</code>\uff08Data Transfer Object\uff09\u7c7b\u4e13\u95e8\u7528\u4e8e\u5411\u524d\u7aef\u8fd4\u56de\u6570\u636e\uff1b\u4f7f\u7528 <code>VO</code> \u6216 <code>Form</code> \u7c7b\u63a5\u6536\u524d\u7aef\u4f20\u6765\u7684\u8bf7\u6c42\u53c2\u6570\u3002\u8fd9\u6837\uff0c\u6bcf\u4e2a\u7c7b\u53ea\u627f\u62c5\u5355\u4e00\u804c\u8d23\uff0c\u7cfb\u7edf\u66f4\u52a0\u6e05\u6670\u3001\u5b89\u5168\u3001\u53ef\u7ef4\u62a4\u3002</p> <p>\u200b   \u7279\u522b\u662f\u5728\u6570\u636e\u8131\u654f\u573a\u666f\u4e0b\uff0c\u8fd9\u79cd\u5206\u5c42\u8bbe\u8ba1\u7684\u4f18\u52bf\u5c24\u4e3a\u660e\u663e\u3002\u6bd4\u5982\uff0c\u7528\u6237\u624b\u673a\u53f7 <code>13812345678</code> \u5728\u8fd4\u56de\u524d\u7aef\u65f6\u5e94\u663e\u793a\u4e3a <code>138****5678</code>\uff0c\u8eab\u4efd\u8bc1\u53f7\u4e5f\u5e94\u90e8\u5206\u9690\u85cf\u3002\u5982\u679c\u4f7f\u7528\u7edf\u4e00\u7684 POJO\uff0c\u4f60\u9700\u8981\u5728\u6bcf\u4e2a Controller \u4e2d\u624b\u52a8\u5904\u7406\u8131\u654f\u903b\u8f91\uff0c\u4ee3\u7801\u91cd\u590d\u4e14\u5bb9\u6613\u51fa\u9519\u3002\u800c\u901a\u8fc7 <code>DTO</code> \u7c7b\uff0c\u4f60\u53ef\u4ee5\u5728\u5176\u9759\u6001\u65b9\u6cd5\u6216\u6784\u9020\u51fd\u6570\u4e2d\u7edf\u4e00\u5b8c\u6210\u8131\u654f\u8f6c\u6362\uff0c\u4f8b\u5982\u63d0\u4f9b\u4e00\u4e2a <code>fromEntity()</code> \u65b9\u6cd5\uff0c\u5c06 <code>UserEntity</code> \u8f6c\u6362\u4e3a\u5df2\u8131\u654f\u7684 <code>UserDTO</code>\uff0c\u4ece\u800c\u786e\u4fdd\u6240\u6709\u63a5\u53e3\u8fd4\u56de\u7684\u6570\u636e\u90fd\u7ecf\u8fc7\u7edf\u4e00\u5904\u7406\u3002</p> <p>\u200b   \u6b64\u5916\uff0c\u4f7f\u7528 DTO \u8fd8\u80fd\u6709\u6548\u89e3\u8026\u6570\u636e\u5e93\u7ed3\u6784\u4e0e\u63a5\u53e3\u534f\u8bae\u3002\u5f53\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u65f6\uff08\u5982\u5b57\u6bb5\u91cd\u547d\u540d\u3001\u62c6\u5206\uff09\uff0c\u53ea\u9700\u8c03\u6574 Entity \u5230 DTO \u7684\u6620\u5c04\u903b\u8f91\uff0c\u800c\u65e0\u9700\u4fee\u6539\u5bf9\u5916\u63a5\u53e3\uff0c\u907f\u514d\u5f71\u54cd\u524d\u7aef\u4ee3\u7801\u3002\u540c\u6837\uff0c\u524d\u7aef\u9700\u6c42\u53d8\u5316\u65f6\uff0c\u4e5f\u53ef\u4ee5\u7075\u6d3b\u8c03\u6574 DTO \u5b57\u6bb5\uff0c\u800c\u4e0d\u5fc5\u6539\u52a8\u6570\u636e\u5e93\u8bbe\u8ba1\u3002\u8fd9\u79cd\u677e\u8026\u5408\u7ed3\u6784\u5927\u5927\u63d0\u5347\u4e86\u7cfb\u7edf\u7684\u53ef\u6269\u5c55\u6027\u548c\u56e2\u961f\u534f\u4f5c\u6548\u7387\u3002</p> <p>\u200b   \u4e3a\u4e86\u8fdb\u4e00\u6b65\u7b80\u5316 DTO \u4e0e Entity \u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u53ef\u4ee5\u5f15\u5165 MapStruct \u7b49\u6620\u5c04\u6846\u67b6\u3002\u5b83\u901a\u8fc7\u6ce8\u89e3\u5728\u7f16\u8bd1\u671f\u751f\u6210\u9ad8\u6548\u7684\u6620\u5c04\u4ee3\u7801\uff0c\u907f\u514d\u4e86\u624b\u52a8\u7f16\u5199\u5927\u91cf setter \u548c getter \u7684\u7e41\u7410\u5de5\u4f5c\uff0c\u540c\u65f6\u4fdd\u6301\u9ad8\u6027\u80fd\u3002\u76f8\u6bd4\u53cd\u5c04\u5de5\u5177\uff08\u5982 BeanUtils\uff09\uff0cMapStruct \u66f4\u5b89\u5168\u3001\u66f4\u5feb\u901f\u3002</p> <p>\u200b   \u603b\u4e4b\uff0c\u907f\u514d\u5c06\u6570\u636e\u5e93\u5b9e\u4f53\u7c7b\u76f4\u63a5\u66b4\u9732\u7ed9\u524d\u7aef\uff0c\u662f\u6784\u5efa\u5b89\u5168\u3001\u5065\u58ee Web \u5e94\u7528\u7684\u57fa\u672c\u539f\u5219\u3002\u901a\u8fc7\u5f15\u5165 DTO \u6a21\u5f0f\uff0c\u4e0d\u4ec5\u80fd\u5b9e\u73b0\u654f\u611f\u6570\u636e\u7684\u81ea\u52a8\u8131\u654f\uff0c\u8fd8\u80fd\u63d0\u5347\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002\u8fd9\u662f\u4e00\u79cd\u4ece\u201c\u80fd\u7528\u201d\u5230\u201c\u597d\u7528\u201d\u7684\u5de5\u7a0b\u601d\u7ef4\u5347\u7ea7\uff0c\u4e5f\u662f\u4f01\u4e1a\u7ea7\u5f00\u53d1\u4e2d\u7684\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"java/ssm.html#6_1","title":"6. \u65e5\u671f\u5904\u7406\u2b50","text":""},{"location":"java/ssm.html#1-jsonformat","title":"1. <code>@JsonFormat</code> \u7684\u4f5c\u7528","text":"<p>\u200b   \u5f53\u6211\u4eec\u628a Java \u5bf9\u8c61\u8f6c\u6362\u6210 JSON \u5b57\u7b26\u4e32\uff08\u6bd4\u5982\u63a5\u53e3\u8fd4\u56de\u7ed9\u524d\u7aef\uff09\u65f6\uff0c\u65e5\u671f\u5b57\u6bb5\u9ed8\u8ba4\u53ef\u80fd\u4ee5\u65f6\u95f4\u6233\uff08\u5982 <code>1672531200000</code>\uff09\u7684\u5f62\u5f0f\u8f93\u51fa\uff0c\u6216\u8005\u683c\u5f0f\u4e0d\u7edf\u4e00\uff08\u5982 <code>\"2023-01-01T00:00:00\"</code>\uff09\uff0c\u524d\u7aef\u96be\u4ee5\u76f4\u63a5\u5c55\u793a\u3002\u540c\u6837\uff0c\u524d\u7aef\u4f20\u6765\u7684\u65e5\u671f\u5b57\u7b26\u4e32\u4e5f\u53ef\u80fd\u56e0\u4e3a\u683c\u5f0f\u4e0d\u5339\u914d\u5bfc\u81f4\u89e3\u6790\u5931\u8d25\u3002</p> <p>\u200b   <code>@JsonFormat</code> \u5c31\u662f\u7528\u6765\u6307\u5b9a\u67d0\u4e2a\u5b57\u6bb5\u5728\u8f6c\u6210 JSON \u6216\u4ece JSON \u89e3\u6790\u65f6\u6240\u4f7f\u7528\u7684\u65e5\u671f\u683c\u5f0f\uff0c\u786e\u4fdd\u524d\u540e\u7aef\u5bf9\u65e5\u671f\u7684\u7406\u89e3\u4e00\u81f4\u3002</p>"},{"location":"java/ssm.html#2_8","title":"2. \u57fa\u672c\u7528\u6cd5","text":"<pre><code>import com.fasterxml.jackson.annotation.JsonFormat;\nimport java.util.Date;\n\npublic class User {\n\n    private String name;\n\n    @JsonFormat(pattern = \"yyyy-MM-dd HH:mm:ss\", timezone = \"GMT+8\")\n    private Date createTime;\n\n    // getter \u548c setter\n}\n</code></pre>"},{"location":"java/ssm.html#3_6","title":"3. \u5168\u5c40\u914d\u7f6e","text":"<p>\u200b   \u5982\u679c\u4e0d\u4f7f\u7528\u5168\u5c40\u914d\u7f6e\uff0c\u90a3\u4e48\u6bcf\u4e00\u4e2a\u65e5\u671f\u5b57\u6bb5\u90fd\u9700\u8981\u53bb\u5199 @JsonFormat\uff0c\u592a\u9ebb\u70e6\u4e86\uff0c\u5c24\u5176\u662f\u91c7\u7528 JavaBean \u5206\u5c42\u67b6\u6784\u3002\u6b64\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u5b9e\u73b0\u5168\u5c40\u914d\u7f6e\u3002</p> <pre><code># \u65e5\u671f\u5904\u7406\u914d\u7f6e\nspring.jackson.date-format=yyyy-MM-dd HH:mm:ss\nspring.jackson.time-zone=GMT+8\n</code></pre>"},{"location":"java/ssm.html#7","title":"7. \u63a5\u53e3\u6587\u6863","text":"<p>"},{"location":"linux/basic.html","title":"basic","text":""},{"location":"linux/basic.html#linux","title":"Linux \u7684\u6587\u4ef6\u76ee\u5f55","text":"<pre><code>a.  bin\u53ef\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\u6587\u4ef6\u5939\nb.  sbin \u8d85\u7ea7\u7528\u6237(root)\u53ef\u6267\u884c\u547d\u4ee4\u6587\u4ef6\u5939\nc.  etc \u7cfb\u7edf\u914d\u7f6e\u6587\u4ef6\u5939\u4f4d\u7f6e,\u7f51\u7edc\u914d\u7f6e,\u7528\u6237\u914d\u7f6e\u7b49\nd.  home \u5b58\u653e\u7528\u6237\u7684\u4e3b\u76ee\u5f55,\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\ne.  root \u662f\u8d85\u7ea7\u7528\u6237(root)\u7684\u4e3b\u76ee\u5f55\nf.  var \u5b58\u653e\u53ef\u53d8\u6587\u4ef6\u5939,\u4f8b\u5982:\u65e5\u5fd7\u6587\u4ef6,\u6570\u636e\u5e93\u6587\u4ef6\u7b49\ng.  tmp \u5b58\u653e\u4e34\u65f6\u6587\u4ef6\u4f4d\u7f6e,\u53ef\u4ee5\u6e05\u7406\nh.  dev \u5b58\u653e\u8bbe\u5907\u6587\u4ef6,\u7528\u6237\u7cfb\u7edf\u8bbf\u95ee\u8bbe\u5907\u6587\u4ef6,\u4f8b\u5982: \u952e\u76d8,\u6253\u5370\u673a\u7b49\u7b49\ni.  boot \u542f\u52a8\u7cfb\u7edf\u6240\u9700\u8981\u7684\u6587\u4ef6\nj.  opt \u7528\u4e8e\u5b58\u653e\u7b2c\u4e09\u65b9\u5f15\u7528,\u4f8b\u5982mysql\u548ctomcat\u670d\u52a1\u5668\u8f6f\u4ef6\u7b49\u7b49\nk.  usr \u5b58\u653e\u7cfb\u7edf\u53ef\u5171\u4eab\u7684\u8d44\u6e90,\u6587\u6863,\u8f6f\u4ef6\u7b49\u7b49\nl.  lib \u7cfb\u7edf\u542f\u52a8\u9700\u8981\u7684\u8fd0\u884c\u5e93\u6587\u4ef6\nm.  mnt \u7528\u4e8e\u4e34\u65f6\u52a0\u8f7d/\u6302\u8f7d\u5916\u90e8\u8bbe\u5907\u548c\u7cfb\u7edf\u6587\u4ef6 \u4f8b\u5982: \u5149\u76d8,usb\u9a71\u52a8\u7b49\n</code></pre>"},{"location":"linux/basic.html#vim","title":"Vim \u7f16\u8f91\u6587\u4ef6","text":""},{"location":"linux/basic.html#1-vim","title":"1. vim \u7684\u4e09\u91cd\u6a21\u5f0f","text":"<p>\u9996\u5148\uff0c\u7528 vim \u547d\u4ee4\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u7684\u6a21\u5f0f\u9ed8\u8ba4\u662f\u4e00\u822c\u6a21\u5f0f\uff0c\u901a\u8fc7 i / a / o \u53ef\u4ee5\u8fdb\u5165\u5230\u7f16\u8f91\u6a21\u5f0f\uff0c\u5f53\u7f16\u8f91\u5b8c\u6bd5\u540e\uff0c\u6309 esc \u53ef\u4ee5\u8fd4\u56de\u4e00\u822c\u6a21\u5f0f\uff0c\u7136\u540e\uff0c\u518d\u901a\u8fc7 : / / \u4ece\u4e00\u822c\u6a21\u5f0f\u5230\u4e86\u547d\u4ee4\u6a21\u5f0f\uff0c\u6765\u8fdb\u884c\u9000\u51fa\uff08:q)\uff0c\u9000\u51fa\u5e76\u4fdd\u5b58\uff08:wq)\uff0c\u5f3a\u5236\u63a8\u51fa\uff08:q!)\u7b49\u64cd\u4f5c\u3002</p> <p> </p>"},{"location":"linux/basic.html#2-vim","title":"2. vim\u76f8\u5173\u547d\u4ee4","text":"<p>\u67e5\u770b\u5f53\u524d\u76ee\u5f55\u6587\u4ef6</p> <pre><code>ls\nls -a \n</code></pre> <p>\u5149\u6807\u79fb\u52a8</p> <pre><code>n + G // \u79fb\u52a8\u5230 n \u884c\nG // \u79fb\u52a8\u5230\u6700\u540e\u4e00\u884c\ngg // \u79fb\u52a8\u5230\u9875\u5934\n</code></pre> <p>\u5220\u9664\u4e00\u884c\u3001word\u3001\u5b57\u6bcd</p> <pre><code>dd // \u5220\u9664\u4e00\u884c \ndnd //\u5220\u9664n\u884c\ndw // \u5220\u9664\u4e00\u4e2aword\nx / X // \u65b9\u5411\u4e0d\u540c\u7684\u5220\u9664\u5b57\u6bcd\n</code></pre> <p>\u590d\u5236\u4e0e\u7c98\u8d34</p> <pre><code>yy\nyny\nyw\np\n</code></pre> <p>\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\u7684\u65b9\u5f0f</p> \u6309\u952e \u529f\u80fd <code>i</code> \u5728\u5f53\u524d\u5149\u6807\u524d\u63d2\u5165 <code>a</code> \u5728\u5f53\u524d\u5149\u6807\u540e\u63d2\u5165 <code>o</code> \u5728\u5f53\u524d\u5149\u6807\u884c\u7684\u4e0b\u4e00\u884c\u63d2\u5165\u65b0\u884c <code>I</code> \u5728\u5f53\u524d\u5149\u6807\u6240\u5728\u884c\u7684\u884c\u9996\u63d2\u5165 <code>A</code> \u5728\u5f53\u524d\u5149\u6807\u6240\u5728\u884c\u7684\u884c\u5c3e\u63d2\u5165 <code>O</code> \u5728\u5f53\u524d\u5149\u6807\u884c\u7684\u4e0a\u4e00\u884c\u63d2\u5165\u65b0"},{"location":"linux/basic.html#3","title":"3. \u547d\u4ee4\u6a21\u5f0f\u4e0b\u7684\u4e00\u4e9b\u6307\u4ee4","text":"<p>\u8fdb\u5165\u547d\u4ee4\u6a21\u5f0f </p> <pre><code>:\n/\n</code></pre> <p>\u4e00\u4e9b\u9000\u51fa\u64cd\u4f5c</p> <pre><code>q\nwq\nq!\n</code></pre> <p>\u67e5\u627e</p> <pre><code>/word\n</code></pre> <p>\u663e\u793a\u884c\u53f7</p> <pre><code>set nu\nset nonu\n</code></pre> <p>\u5168\u5c40\u66ff\u6362\uff01</p> <pre><code>%s/old/new/g\n</code></pre>"},{"location":"linux/basic.html#linux_1","title":"Linux \u6838\u5fc3\u547d\u4ee4","text":"\u5e73\u53f0\u540d\u79f0 \u6838\u5fc3\u7279\u70b9 \u5728\u7ebf\u5730\u5740 Linux \u547d\u4ee4\u641c\u7d22 \ud83d\udd0d \u6848\u4f8b\u6700\u5168\uff0c\u652f\u6301\u5173\u952e\u8bcd\u79d2\u641c \u70b9\u51fb\u8bbf\u95ee \u83dc\u9e1f\u6559\u7a0b \ud83d\udcc2 \u6309\u529f\u80fd\u5206\u7c7b\uff0c\u9002\u5408\u7cfb\u7edf\u5b66\u4e60 \u70b9\u51fb\u8bbf\u95ee Linux \u5de5\u5177\u5feb\u67e5 \ud83d\udee0\ufe0f \u4fa7\u91cd\u4e8e\u5f00\u53d1\u5b9e\u6218\u4e0e\u6392\u67e5\u6280\u5de7 \u70b9\u51fb\u8bbf\u95ee"},{"location":"linux/basic.html#1","title":"1. \u5f00\u542f\u3001\u5173\u95ed\u670d\u52a1\u5668","text":"<pre><code>roboot -h now\nshutdown -h now\n</code></pre>"},{"location":"linux/basic.html#2","title":"2. \u670d\u52a1\u7ba1\u7406\u547d\u4ee4","text":"<pre><code>// \u4e34\u65f6\u8bbe\u7f6e\nsystemctl start xxx\nsystemctl restart xxx\nsystemctl stop  xxx\nsystemclt status xxx\n\n// \u6c38\u4e45\u8bbe\u7f6e\nsystemctl enable xxx\nsystemctl disable xxx\nsystemctl is-enabled xxx\nsystemctl list-unit-files\n</code></pre>"},{"location":"linux/basic.html#3_1","title":"3. \u6587\u4ef6\u76f8\u5173\u547d\u4ee4","text":""},{"location":"linux/basic.html#1-pwd-lp","title":"1. pwd -[LP]","text":"<p>pwd\uff1a\u6253\u5370\u5f53\u524d\u6240\u5728\u7684\u5de5\u4f5c\u5b8c\u6574\u8def\u5f84 print working directory</p> <pre><code>pwd // \u663e\u793a\u5f53\u524d\u903b\u8f91\u5730\u5740\npwd -L // \u903b\u8f91\u5730\u5740\npwd -P // \u7269\u7406\u5730\u5740\n</code></pre>"},{"location":"linux/basic.html#2-ls-a-l-s-s-t-ll","title":"2. ls[-a -l -s -S -t ...]  | ll","text":"<p>ls\uff1als\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u5355\u8bcdlist\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u5217\u51fa\u201d\uff0c\u5176\u529f\u80fd\u662f\u663e\u793a\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u53ca\u5176\u5c5e\u6027\u4fe1\u606f\uff0c\u662f\u6700\u5e38\u4f7f\u7528\u7684Linux\u547d\u4ee4\u4e4b\u200d\u4e00\u3002 \u9ed8\u8ba4\u4e0d\u6dfb\u52a0\u4efb\u4f55\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\uff0cls\u547d\u4ee4\u4f1a\u5217\u51fa\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u4fe1\u606f\uff0c\u5e38\u4e0ecd\u6216pwd\u547d\u4ee4\u642d\u914d\u4f7f\u7528\uff0c\u5341\u5206\u65b9\u4fbf\u3002\u5e26\u4e0a\u53c2\u6570\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u66f4\u591a\u7684\u4e8b\u60c5\u3002\u4f5c\u4e3a\u6700\u57fa\u7840\u3001\u6700\u9891\u7e41\u4f7f\u7528\u7684\u547d\u4ee4\uff0c\u6709\u5fc5\u8981\u4ed4\u7ec6\u4e86\u89e3\u5176\u5e38\u7528\u529f\u200d\u80fd\u3002  </p> <pre><code>ls [-a -l] [\u503c\uff1a\u6587\u4ef6\u5939\u540d]\n\u53c2\u6570\uff1a-a \u663e\u793a\u6240\u6709\u6587\u4ef6\uff0c\u5305\u542b\u9690\u85cf\u6587\u4ef6 -l \u8be6\u7ec6\u7f57\u5217\u4fe1\u606f -t \u6309\u521b\u5efa\u65f6\u95f4\u6392\u5e8f -S \u6309\u6587\u4ef6\u5927\u5c0f\u6392\u5e8f\n</code></pre>"},{"location":"linux/basic.html#3-cd-pl","title":"3. cd -[PL]","text":"<p>cd\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4change directory\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u66f4\u6539\u5f53\u524d\u6240\u5904\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u8def\u5f84\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\uff0c\u4e5f\u53ef\u4ee5\u662f\u76f8\u5bf9\u8def\u5f84\uff0c\u82e5\u7701\u7565\u4e0d\u5199\u5219\u4f1a\u8df3\u8f6c\u81f3\u5f53\u524d\u4f7f\u7528\u8005\u7684\u5bb6\u76ee\u200d\u5f55\u3002 </p> <pre><code>cd \u53c2\u6570 \u76ee\u5f55\u540d  \n\u2014L : \u5207\u6362\u5230\u8f6f\u8fde\u63a5\u7684\u4f4d\u7f6e\n-P \uff1a\u5207\u6362\u5230\u771f\u6b63\u6240\u5728\u7684\u4f4d\u7f6e\n~  \uff1a\u5207\u6362\u5230\u5f53\u524d\u7528\u6237\u7684\u5bb6\u76ee\u5f55 \u7b49\u4e8e cd\n- \uff1a\u5207\u6362\u5230\u4e0a\u4e00\u6b21\u6240\u5728\u76ee\u5f55\n.. \uff1a\u5207\u6362\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\n</code></pre>"},{"location":"linux/basic.html#4-mkdir-mpvz","title":"4. mkdir -[mpvz] \u76ee\u5f55\u540d","text":"<p>mkdir\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4make directories\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u521b\u5efa\u76ee\u5f55\u6587\u4ef6\u3002\u8be5\u547d\u4ee4\u7684\u4f7f\u7528\u7b80\u5355\uff0c\u4f46\u9700\u8981\u6ce8\u610f\uff0c\u82e5\u8981\u521b\u5efa\u7684\u76ee\u6807\u76ee\u5f55\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u4f1a\u63d0\u793a\u5df2\u5b58\u5728\u800c\u4e0d\u7ee7\u7eed\u521b\u5efa\uff0c\u4e0d\u8986\u76d6\u5df2\u6709\u6587\u4ef6\u3002\u82e5\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u4f46\u5177\u6709\u5d4c\u5957\u7684\u4f9d\u8d56\u5173\u7cfb\u65f6\uff0c\u4f8b\u5982/Dir1/Dir2/Dir3/Dir4/Dir5\uff0c\u8981\u60f3\u4e00\u6b21\u6027\u521b\u5efa\u5219\u9700\u8981\u52a0\u5165-p\u53c2\u6570\uff0c\u8fdb\u884c\u9012\u5f52\u64cd\u200d\u4f5c\u3002  </p> <pre><code>-m \u521b\u5efa\u76ee\u5f55\u7684\u540c\u65f6\u8bbe\u7f6e\u6743\u9650   \n-v \u663e\u793a\u6267\u884c\u8fc7\u7a0b\u8be6\u7ec6\u4fe1\u606f \n-p \u9012\u5f52\u521b\u5efa\u591a\u7ea7\u76ee\u5f55 \n-z \u8bbe\u7f6e\u76ee\u5f55\u5b89\u5168\u4e0a\u4e0b\u6587  \n</code></pre>"},{"location":"linux/basic.html#5-rmdir","title":"5. rmdir","text":"<p>\u4e86\u89e3\uff1a\u53ea\u80fd\u5220\u9664\u7a7a\u6587\u4ef6\u5939\uff0c\u6240\u4ee5\u4e86\u89e3\u5373\u53ef\uff0c\u53c2\u6570\u4e0emkdir\u5dee\u4e0d\u591a\uff0c  -v -p...</p>"},{"location":"linux/basic.html#6-touch","title":"6. touch","text":"<p>touch\u547d\u4ee4\u7684\u529f\u80fd\u662f\u521b\u5efa\u7a7a\u6587\u4ef6\u4e0e\u4fee\u6539\u65f6\u95f4\u6233\u3002\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u4f1a\u521b\u5efa\u4e00\u4e2a\u7a7a\u5185\u5bb9\u7684\u6587\u672c\u6587\u4ef6\uff1b\u5982\u679c\u6587\u4ef6\u5df2\u7ecf\u5b58\u5728\uff0c\u5219\u4f1a\u5bf9\u6587\u4ef6\u7684Atime\uff08\u8bbf\u95ee\u65f6\u95f4\uff09\u548cCtime\uff08\u4fee\u6539\u65f6\u95f4\uff09\u8fdb\u884c\u4fee\u6539\u64cd\u4f5c\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u5b8c\u6210\u6b64\u9879\u5de5\u4f5c\uff0c\u800c\u666e\u901a\u7528\u6237\u53ea\u80fd\u7ba1\u7406\u4e3b\u673a\u7684\u6587\u200d\u4ef6\u3002  </p> <pre><code>touch \u53c2\u6570 \u6587\u4ef6\u540d  \nvim test.txt // vim\u4f1a\u81ea\u52a8\u521b\u5efa\u6587\u4ef6\uff0c\u7f16\u8f91\u5b8c:wq\u5c31\u53ef\u4ee5\u4fdd\u5b58\necho \"xxxxxx\" &gt;&gt; xxx // \u56de\u76f4\u63a5\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5e76\u5199\u5165\"xxxxxx\"\n// todo\n</code></pre>"},{"location":"linux/basic.html#7-cp","title":"7. cp","text":"<p>cp\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u5355\u8bcdcopy\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u590d\u5236\u201d\uff0c\u5176\u529f\u80fd\u662f\u590d\u5236\u6587\u4ef6\u6216\u76ee\u5f55\u3002cp\u547d\u4ee4\u80fd\u591f\u5c06\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55\u590d\u5236\u5230\u6307\u5b9a\u4f4d\u7f6e\uff0c\u4ea6\u5e38\u7528\u4e8e\u6587\u4ef6\u7684\u5907\u4efd\u5de5\u4f5c\u3002-r\u53c2\u6570\u7528\u4e8e\u9012\u5f52\u64cd\u4f5c\uff0c\u590d\u5236\u76ee\u5f55\u65f6\u82e5\u5fd8\u8bb0\u6dfb\u52a0\u5219\u4f1a\u76f4\u63a5\u62a5\u9519\uff1b-f\u53c2\u6570\u5219\u7528\u4e8e\u5f53\u76ee\u6807\u6587\u4ef6\u5df2\u5b58\u5728\u65f6\u4f1a\u76f4\u63a5\u8986\u76d6\u800c\u4e0d\u518d\u8be2\u95ee\u3002\u8fd9\u4e24\u4e2a\u53c2\u6570\u5c24\u4e3a\u5e38\u7528\u3002  </p> <pre><code>cp \u53c2\u6570 \u6e90\u6587\u4ef6\u540d \u76ee\u6807\u6587\u4ef6\u540d\n</code></pre> <p> </p>"},{"location":"linux/basic.html#8-rm","title":"8. rm","text":"<p>rm\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u5355\u8bcdremove\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u6d88\u9664\u201d\uff0c\u5176\u529f\u80fd\u662f\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u4e00\u6b21\u53ef\u4ee5\u5220\u9664\u591a\u4e2a\u6587\u4ef6\uff0c\u6216\u9012\u5f52\u5220\u9664\u76ee\u5f55\u53ca\u5176\u5185\u7684\u6240\u6709\u5b50\u6587\u4ef6\u3002 rm\u4e5f\u662f\u4e00\u4e2a\u5f88\u5371\u9669\u7684\u547d\u4ee4\uff0c\u4f7f\u7528\u7684\u65f6\u5019\u8981\u7279\u522b\u5f53\u5fc3\uff0c\u5c24\u5176\u5bf9\u4e8e\u65b0\u624b\u66f4\u8981\u683c\u5916\u6ce8\u610f\u3002\u4f8b\u5982\uff0c\u6267\u884crm -rf /*\u547d\u4ee4\u4f1a\u6e05\u7a7a\u7cfb\u7edf\u4e2d\u6240\u6709\u7684\u6587\u4ef6\uff0c\u751a\u81f3\u65e0\u6cd5\u6062\u590d\u56de\u6765\u3002\u6240\u4ee5\u6211\u4eec\u5728\u6267\u884c\u4e4b\u524d\u4e00\u5b9a\u8981\u518d\u6b21\u786e\u8ba4\u5728\u5728\u54ea\u4e2a\u76ee\u5f55\u4e2d\u3001\u5230\u5e95\u8981\u5220\u9664\u4ec0\u4e48\u6587\u4ef6\uff0c\u8003\u8651\u597d\u540e\u518d\u6572\u51fbEnter\u952e\uff0c\u8981\u65f6\u523b\u4fdd\u6301\u6e05\u9192\u7684\u5934\u200d\u8111\u3002  </p> <p> </p>"},{"location":"linux/basic.html#9-mv","title":"9. mv","text":"<p>mv\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u5355\u8bcdmove\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u79fb\u52a8\u201d\uff0c\u5176\u529f\u80fd\u4e0e\u82f1\u6587\u542b\u4e49\u76f8\u540c\uff0c\u80fd\u591f\u5bf9\u6587\u4ef6\u8fdb\u884c\u526a\u5207\u548c\u91cd\u547d\u540d\u64cd\u4f5c\u3002\u8fd9\u662f\u4e00\u4e2a\u88ab\u9ad8\u9891\u4f7f\u7528\u7684\u6587\u4ef6\u7ba1\u7406\u547d\u4ee4\uff0c\u6211\u4eec\u9700\u8981\u7559\u610f\u5b83\u4e0e\u590d\u5236\u547d\u4ee4\u7684\u533a\u522b\u3002cp\u547d\u4ee4\u662f\u7528\u4e8e\u6587\u4ef6\u7684\u590d\u5236\u64cd\u4f5c\uff0c\u6587\u4ef6\u4e2a\u6570\u662f\u589e\u52a0\u7684\uff0c\u800cmv\u5219\u4e3a\u526a\u5207\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u5bf9\u6587\u4ef6\u8fdb\u884c\u79fb\u52a8\uff08\u642c\u5bb6\uff09\u64cd\u4f5c\uff0c\u6587\u4ef6\u4f4d\u7f6e\u53d1\u751f\u53d8\u5316\uff0c\u4f46\u603b\u4e2a\u6570\u5e76\u65e0\u589e\u200d\u52a0\u3002 \u5728\u540c\u4e00\u4e2a\u76ee\u5f55\u5185\u5bf9\u6587\u4ef6\u8fdb\u884c\u526a\u5207\u7684\u64cd\u4f5c\uff0c\u5b9e\u9645\u4e0a\u5e94\u7406\u89e3\u6210\u91cd\u547d\u540d\u64cd\u4f5c\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u7b2c\u4e00\u4e2a\u793a\u4f8b\u6240\u200d\u793a\u3002   </p> <pre><code>mv \u53c2\u6570 \u6e90\u6587\u4ef6\u540d \u76ee\u6807\u6587\u4ef6\u540d  \n</code></pre>"},{"location":"linux/basic.html#10","title":"10. \u67e5\u770b\u6587\u4ef6\u5185\u5bb9","text":"<p>cat</p> <p>cat\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4concatenate files and print\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u5728\u7ec8\u7aef\u8bbe\u5907\u4e0a\u663e\u793a\u6587\u4ef6\u5185\u5bb9\u3002\u5728Linux\u7cfb\u7edf\u4e2d\u6709\u5f88\u591a\u7528\u4e8e\u67e5\u770b\u6587\u4ef6\u5185\u5bb9\u7684\u547d\u4ee4\uff0c\u4f8b\u5982more\u3001tail\u3001head\u7b49\uff0c\u6bcf\u4e2a\u547d\u4ee4\u90fd\u6709\u5404\u81ea\u7684\u7279\u70b9\u3002cat\u547d\u4ee4\u9002\u5408\u67e5\u770b\u5185\u5bb9\u8f83\u5c11\u7684\u7eaf\u6587\u672c\u6587\u4ef6\u3002 \u5bf9\u4e8e\u5185\u5bb9\u8f83\u591a\u7684\u6587\u4ef6\uff0c\u4f7f\u7528cat\u547d\u4ee4\u67e5\u770b\u540e\u4f1a\u5728\u5c4f\u5e55\u4e0a\u5feb\u901f\u6eda\u5c4f\uff0c\u7528\u6237\u5f80\u5f80\u770b\u4e0d\u6e05\u6240\u663e\u793a\u7684\u5177\u4f53\u5185\u5bb9\uff0c\u53ea\u597d\u6309Ctrl+C\u7ec4\u5408\u952e\u4e2d\u65ad\u547d\u4ee4\u6267\u884c\uff0c\u6240\u4ee5\u5bf9\u4e8e\u5927\u6587\u4ef6\uff0c\u5e72\u8106\u7528more\u547d\u4ee4\u200d\u663e\u793a\u5427\u3002  </p> <pre><code>cat \u53c2\u6570 \u6587\u4ef6\u540d \u67e5\u770b\u4e00\u5c4f\u5e55\u663e\u793a\u7684\u975e\u52a8\u6001\u6587\u672c\uff08\u5c0f\u6587\u672c\uff09\n-n \u663e\u793a\u884c\u53f7\n</code></pre> <p>more</p> <p>more\u547d\u4ee4\u7684\u529f\u80fd\u662f\u5206\u9875\u663e\u793a\u6587\u672c\u6587\u4ef6\u7684\u5185\u5bb9\u3002\u5982\u679c\u6587\u672c\u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u8f83\u591a\u8f83\u957f\uff0c\u4f7f\u7528cat\u547d\u4ee4\u8bfb\u53d6\u540e\u5219\u5f88\u96be\u770b\u6e05\uff0c\u8fd9\u65f6\u4f7f\u7528more\u547d\u4ee4\u8fdb\u884c\u5206\u9875\u67e5\u770b\u5c31\u6bd4\u8f83\u5408\u9002\u4e86\uff0c\u8be5\u547d\u4ee4\u53ef\u4ee5\u628a\u6587\u672c\u5185\u5bb9\u4e00\u9875\u4e00\u9875\u5730\u663e\u793a\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\uff0c\u7528\u6237\u6bcf\u6309\u4e00\u6b21Enter\u952e\u5373\u5411\u4e0b\u4e00\u884c\uff0c\u6bcf\u6309\u4e00\u6b21\u7a7a\u683c\u952e\u5373\u5411\u4e0b\u4e00\u9875\uff0c\u76f4\u81f3\u770b\u5b8c\u4e3a\u6b62\u3002  </p> <pre><code>more \u53c2\u6570 \u6587\u4ef6\u540d\n\u4e00\u4e9b\u547d\u4ee4:\n= \u8f93\u51fa\u5f53\u524d\u884c\u6570\n:f \u8f93\u51fa\u6587\u4ef6\u540d\u4ee5\u53ca\u884c\u6570\n</code></pre> <p> </p> <p>less</p> <p>less\u547d\u4ee4\u7684\u529f\u80fd\u662f\u5206\u9875\u663e\u793a\u6587\u4ef6\u5185\u5bb9\u3002Less\u547d\u4ee4\u5206\u9875\u663e\u793a\u7684\u529f\u80fd\u4e0emore\u547d\u4ee4\u5f88\u76f8\u50cf\uff0c\u4f46more\u547d\u4ee4\u53ea\u80fd\u4ece\u524d\u5411\u540e\u6d4f\u89c8\u6587\u4ef6\u5185\u5bb9\uff0c\u800cless\u547d\u4ee4\u4e0d\u4ec5\u80fd\u4ece\u524d\u5411\u540e\u6d4f\u89c8\uff08\u6309PageDown\u952e\uff09\uff0c\u8fd8\u53ef\u4ee5\u4ece\u540e\u5411\u524d\u6d4f\u89c8\uff08\u6309PageUp\u952e\uff09\uff0c\u66f4\u52a0\u7075\u200d\u6d3b\u3002  </p> <pre><code>less \u53c2\u6570 \u6587\u4ef6\n\u7a7a\u683c\u7ffb\u9875 \u4e0a \u4e0b \u8fdb\u884c\u7ffb\u9875 q\u9000\u51fa /\u67e5\u627e\u5173\u952e\u5b57\n</code></pre> <p> </p> <p>head</p> <p>head\u547d\u4ee4\u7684\u529f\u80fd\u662f\u663e\u793a\u6587\u4ef6\u5f00\u5934\u7684\u5185\u5bb9\uff0c\u9ed8\u8ba4\u4e3a\u524d10\u884c\u3002  </p> <pre><code>head \u53c2\u6570 \u6587\u4ef6\u540d  \n-c \u8bbe\u7f6e\u663e\u793a\u5934\u90e8\u5185\u5bb9\u7684\u5b57\u7b26\u6570   \n-v \u663e\u793a\u6587\u4ef6\u540d\u7684\u5934\u4fe1\u606f \n-n \u8bbe\u7f6e\u663e\u793a\u884c\u6570 \n--help \u663e\u793a\u5e2e\u52a9\u4fe1\u606f \n-q \u4e0d\u663e\u793a\u6587\u4ef6\u540d\u7684\u5934\u4fe1\u606f   \n</code></pre> <p>tail</p> <p>tail\u547d\u4ee4\u7684\u529f\u80fd\u662f\u67e5\u770b\u6587\u4ef6\u5c3e\u90e8\u5185\u5bb9\uff0c\u4f8b\u5982\u9ed8\u8ba4\u4f1a\u5728\u7ec8\u7aef\u754c\u9762\u4e0a\u663e\u793a\u6307\u5b9a\u6587\u4ef6\u7684\u672b\u5c3e10\u884c\uff0c\u5982\u679c\u6307\u5b9a\u4e86\u591a\u4e2a\u6587\u4ef6\uff0c\u5219\u4f1a\u5728\u663e\u793a\u7684\u6bcf\u4e2a\u6587\u4ef6\u5185\u5bb9\u524d\u9762\u52a0\u4e0a\u6587\u4ef6\u540d\u6765\u52a0\u4ee5\u533a\u5206\u3002\u9ad8\u9636\u73a9\u6cd5\u7684-f\u53c2\u6570\u7684\u4f5c\u7528\u662f\u6301\u7eed\u663e\u793a\u6587\u4ef6\u7684\u5c3e\u90e8\u6700\u65b0\u5185\u5bb9\uff0c\u7c7b\u4f3c\u4e8e\u673a\u573a\u5019\u673a\u5385\u7684\u5927\u5c4f\u5e55\uff0c\u603b\u4f1a\u628a\u6700\u65b0\u7684\u6d88\u606f\u663e\u793a\u51fa\u6765 </p> <p>\u6ce8:\u53ea\u6709 echo \u8ffd\u52a0\u624d\u4f1a\u88ab\u8bc6\u522b</p> <pre><code>tail \u53c2\u6570 \u6587\u4ef6\u540d\n-c \u8bbe\u7f6e\u663e\u793a\u6587\u4ef6\u5c3e\u90e8\u7684\u5b57\u7b26\u6570   \n--pid \u5f53\u6307\u5b9aPID\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u81ea\u52a8\u9000\u51fa\u547d\u4ee4 \n-f \u6301\u7eed\u663e\u793a\u6587\u4ef6\u5c3e\u90e8\u6700\u65b0\u5185\u5bb9 \n--retry \u5f53\u6587\u4ef6\u65e0\u6743\u9650\u8bbf\u95ee\u65f6\uff0c\u4f9d\u7136\u5c1d\u8bd5\u6253\u5f00 \n-n \u8bbe\u7f6e\u663e\u793a\u6587\u4ef6\u5c3e\u90e8\u7684\u884c\u6570 \n</code></pre> <p>echo</p> <p>echo\u547d\u4ee4\u7684\u529f\u80fd\u662f\u5728\u7ec8\u7aef\u8bbe\u5907\u4e0a\u8f93\u51fa\u6307\u5b9a\u5b57\u7b26\u4e32\u6216\u53d8\u91cf\u63d0\u53d6\u540e\u7684\u503c\uff0c\u80fd\u591f\u7ed9\u7528\u6237\u4e00\u4e9b\u7b80\u5355\u7684\u63d0\u9192\u4fe1\u606f\uff0c\u4ea6\u53ef\u4ee5\u5c06\u8f93\u51fa\u7684\u6307\u5b9a\u5b57\u7b26\u4e32\u5185\u5bb9\u540c\u7ba1\u9053\u7b26\u4e00\u8d77\u4f20\u9012\u7ed9\u540e\u7eed\u547d\u4ee4\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\u4fe1\u606f\u8fdb\u884c\u4e8c\u6b21\u5904\u7406\uff0c\u8fd8\u53ef\u4ee5\u540c\u8f93\u51fa\u91cd\u5b9a\u5411\u7b26\u4e00\u8d77\u64cd\u4f5c\uff0c\u5c06\u4fe1\u606f\u76f4\u63a5\u5199\u5165\u6587\u4ef6\u3002\u5982\u9700\u63d0\u53d6\u53d8\u91cf\u503c\uff0c\u9700\u5728\u53d8\u91cf\u540d\u79f0\u524d\u52a0\u5165$\u7b26\u53f7\uff0c\u53d8\u91cf\u540d\u79f0\u4e00\u822c\u5747\u4e3a\u5927\u5199\u5f62\u200d\u5f0f\u3002  </p> <pre><code>echo \u53c2\u6570 \u5b57\u7b26\u4e32\u6216$\u53d8\u91cf\u540d  \n\n\u914d\u5408\u91cd\u5b9a\u5411\u7b26\n&gt; \u8986\u5199\n&gt;&gt; \u8ffd\u52a0\n</code></pre> <p>ln</p> <p>ln\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u5355\u8bcdlink\u7684\u7f29\u5199\uff0c\u4e2d\u6587\u8bd1\u4e3a\u201c\u94fe\u63a5\u201d\uff0c\u5176\u529f\u80fd\u662f\u4e3a\u67d0\u4e2a\u6587\u4ef6\u5728\u53e6\u5916\u4e00\u4e2a\u4f4d\u7f6e\u5efa\u7acb\u540c\u6b65\u7684\u94fe\u63a5\u3002Linux\u7cfb\u7edf\u4e2d\u7684\u94fe\u63a5\u6587\u4ef6\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u4e00\u79cd\u662f\u786c\u94fe\u63a5\uff0c\u53e6\u4e00\u79cd\u662f\u8f6f\u94fe\u63a5\u3002\u8f6f\u94fe\u63a5\u76f8\u5f53\u4e8eWindows\u7cfb\u7edf\u4e2d\u7684\u5feb\u6377\u65b9\u5f0f\u6587\u4ef6\uff0c\u539f\u59cb\u6587\u4ef6\u88ab\u79fb\u52a8\u6216\u5220\u9664\u540e\uff0c\u8f6f\u94fe\u63a5\u6587\u4ef6\u4e5f\u5c06\u65e0\u6cd5\u4f7f\u7528\uff1b\u786c\u94fe\u63a5\u5219\u662f\u5c06\u6587\u4ef6\u7684inode\u5c5e\u6027\u5757\u8fdb\u884c\u4e86\u590d\u5236\uff0c\u56e0\u6b64\u628a\u539f\u59cb\u6587\u4ef6\u79fb\u52a8\u6216\u5220\u9664\u540e\uff0c\u786c\u94fe\u63a5\u6587\u4ef6\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528\u3002  </p> <pre><code>\u521b\u5efa\u8f6f\u8fde\u63a5\uff08\u5feb\u6377\u65b9\u5f0f\uff09\nln -s \u539f\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939 \u8f6f\u8fde\u63a5\u540d\n\u5bf9\u8f6f\u8fde\u63a5\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u76f8\u5f53\u4e8e\u6e90\u6587\u4ef6\u7684\u52a8\u4f5c\uff0c\u8f6f\u8fde\u63a5\u540d\u8981\u548c\u6e90\u6587\u4ef6\u4e00\u81f4\n</code></pre>"},{"location":"linux/basic.html#4","title":"4. \u7528\u6237\u4ee5\u53ca\u6743\u9650\u547d\u4ee4","text":"<p>\u6dfb\u52a0\u4e00\u4e2a\u7528\u6237</p> <pre><code>useradd \u7528\u6237\u540d\n-g \u6307\u5b9a\u7ec4(\u6539\u7ec4\u5fc5\u987b\u5b58\u5728)\n\nuserdel username\n-f \u5f3a\u5236\u5220\u9664\n-r \u8fde\u76f8\u5173\u6570\u636e\u4e5f\u5220\u9664\n</code></pre> <p>\u4e3a\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801</p> <pre><code>passwd \u7528\u6237\u540d\n</code></pre> <p>\u4fee\u6539\u7528\u6237\u4e00\u4e9b\u5c5e\u6027</p> <pre><code>usermod \u53c2\u6570 \u7528\u6237\u540d\n-g \u4fee\u6539\u7528\u6237\u6240\u5728\u7ec4\n// \u4fee\u6539\u7528\u6237\u6240\u5c5e\u7ec4\nusermod -g \u7ec4\u540d \u7528\u6237\u540d\n</code></pre> <p>\u67e5\u770b\u7528\u6237\u662f\u5426\u5b58\u5728\u4ee5\u53ca\u76f8\u5173\u4fe1\u606f</p> <pre><code>id username\ncat /etc/passwd\ncat /etc/group\ncat /etc/sudoers\n</code></pre> <p>\u7ec4\u76f8\u5173\u547d\u4ee4</p> <pre><code>// \u6dfb\u52a0\u4e00\u4e2a\u7ec4\ngroupadd \u7ec4\u540d\n// \u5220\u9664\u7ec4\ngroupdel \u7ec4\u540d\n//\u67e5\u770b\u7ec4\ncat /etc/group\n</code></pre> <p>\u8d4b\u4e88\u6743\u9650</p> <pre><code>1. \u53bb /etc/sudoers \u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u6743\u9650 \u8d26\u53f7 ALL=(ALL) NOPASSWD:ALL\n2. \u4e4b\u540e\u5bf9\u5e94\u7528\u6237\u4f7f\u7528\u547d\u4ee4\u65f6\u524d\u9762 + sudo\n</code></pre> <p>\u7528\u6237\u7684\u5207\u6362</p> <pre><code>su username\nexit\nlogout \n</code></pre>"},{"location":"linux/basic.html#5","title":"5. \u6587\u4ef6\u6743\u9650\u547d\u4ee4","text":"<p>\u6587\u4ef6\u6743\u9650\u901a\u8fc710\u4f4d\u6765\u8868\u793a,\u7b2c\u4e00\u4f4d\u662f\u7c7b\u578b(-, l, d),\u540e9\u4f4d\u5206\u4e3a\u4e09\u7ec4,\u5206\u522b\u4ee3\u8868 \u6240\u6709\u8005, \u6240\u5728\u7ec4, \u5176\u4ed6\u4eba\u7684\u6743\u9650, \u5982\u56fe\u6240\u793a. \u540e\u9762\u5206\u522b\u662f\u6587\u4ef6\u6240\u6709\u8005\u548c\u6240\u5728\u7ec4.</p> <p> </p> <p>\u6743\u9650\u4fee\u6539\u547d\u4ee4</p> <p>chmod\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4change mode\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u6539\u53d8\u6587\u4ef6\u6216\u76ee\u5f55\u6743\u9650\u7684\u547d\u4ee4\u3002\u9ed8\u8ba4\u53ea\u6709\u6587\u4ef6\u7684\u6240\u6709\u8005\u548c\u7ba1\u7406\u5458\u53ef\u4ee5\u8bbe\u7f6e\u6587\u4ef6\u6743\u9650\uff0c\u666e\u901a\u7528\u6237\u53ea\u80fd\u7ba1\u7406\u81ea\u5df1\u6587\u4ef6\u7684\u6743\u9650\u5c5e\u6027\u3002 \u8bbe\u7f6e\u6743\u9650\u65f6\u53ef\u4ee5\u4f7f\u7528\u6570\u5b57\u6cd5\uff0c\u4ea6\u53ef\u4f7f\u7528\u5b57\u6bcd\u8868\u8fbe\u5f0f\uff0c\u5bf9\u4e8e\u76ee\u5f55\u6587\u4ef6\uff0c\u5efa\u8bae\u52a0\u5165-R\u53c2\u6570\u8fdb\u884c\u9012\u5f52\u64cd\u4f5c\uff0c\u8fd9\u610f\u5473\u7740\u4e0d\u4ec5\u5bf9\u4e8e\u76ee\u5f55\u672c\u8eab\uff0c\u800c\u4e14\u4e5f\u5bf9\u76ee\u5f55\u5185\u7684\u5b50\u6587\u4ef6/\u76ee\u5f55\u8fdb\u884c\u65b0\u6743\u9650\u7684\u8bbe\u5b9a\u3002</p> <pre><code>chmod \u53c2\u6570\u503c [u+r, g+w, o+x] \u6587\u4ef6/\u76ee\u5f55\u540d\n\u8eab\u4efd\u8868\u793a: u g o a\n\u6570\u5b57\u6cd5 r 4 w 2 x 1\n-R \u9012\u5f52\u5904\u7406\n-v \u663e\u793a\u6267\u884c\u8fc7\u7a0b\n-f \u4fee\u6539\u5931\u8d25\u540e\u4e0d\u63d0\u793a\u4fe1\u606f\n</code></pre> <p>\u4fee\u6539\u6240\u6709\u8005/\u7ec4</p> <p>chown\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4change owner\u7684\u7f29\u5199\uff0c\u5176\u529f\u80fd\u662f\u6539\u53d8\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u7528\u6237\u548c\u7528\u6237\u7ec4\u4fe1\u606f\u3002\u7ba1\u7406\u5458\u53ef\u4ee5\u6539\u53d8\u4e00\u5207\u6587\u4ef6\u7684\u6240\u5c5e\u4fe1\u606f\uff0c\u800c\u666e\u901a\u7528\u6237\u53ea\u80fd\u6539\u53d8\u81ea\u5df1\u6587\u4ef6\u7684\u6240\u5c5e\u4fe1\u606f.</p> <pre><code>chown \u53c2\u6570 \u6240\u5c5e\u4e3b:\u6240\u5c5e\u7ec4 \u6587\u4ef6\u540d  \n</code></pre>"},{"location":"linux/basic.html#6","title":"6. \u67e5\u8be2\u6587\u4ef6","text":""},{"location":"linux/basic.html#61-find","title":"6.1 find","text":"<p>find\u547d\u4ee4\u7684\u529f\u80fd\u662f\u6839\u636e\u7ed9\u5b9a\u7684\u8def\u5f84\u548c\u6761\u4ef6\u67e5\u627e\u76f8\u5173\u6587\u4ef6\u6216\u76ee\u5f55\uff0c\u5176\u53c2\u6570\u7075\u6d3b\u65b9\u4fbf\uff0c\u4e14\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u7ed3\u5408\u7ba1\u9053\u7b26\u540e\u80fd\u591f\u5b9e\u73b0\u66f4\u52a0\u590d\u6742\u7684\u529f\u80fd\uff0c\u662fLinux\u7cfb\u7edf\u8fd0\u7ef4\u4eba\u5458\u5fc5\u987b\u638c\u63e1\u7684\u547d\u4ee4\u4e4b\u4e00\u3002 </p> <p>find\u547d\u4ee4\u901a\u5e38\u8fdb\u884c\u7684\u662f\u4ece\u6839\u76ee\u5f55\uff08/\uff09\u5f00\u59cb\u7684\u5168\u76d8\u641c\u7d22\uff0c\u6709\u522b\u4e8ewhereis\u3001which\u3001locate\u7b49\u6709\u6761\u4ef6\u6216\u90e8\u5206\u6587\u4ef6\u7684\u641c\u7d22\u3002\u5bf9\u4e8e\u670d\u52a1\u5668\u8d1f\u8f7d\u8f83\u9ad8\u7684\u60c5\u51b5\uff0c\u5efa\u8bae\u4e0d\u8981\u5728\u9ad8\u5cf0\u65f6\u671f\u4f7f\u7528find\u547d\u4ee4\u7684\u6a21\u7cca\u641c\u7d22\uff0c\u8fd9\u4f1a\u76f8\u5bf9\u6d88\u8017\u8f83\u591a\u7684\u7cfb\u7edf\u8d44\u6e90\u3002  </p> <p> </p>"},{"location":"linux/basic.html#62-grep","title":"6.2 grep","text":"<p>grep\u547d\u4ee4\u6765\u81ea\u82f1\u6587\u8bcd\u7ec4global search regular expression and print out the line\u7684\u7f29\u5199\uff0c\u610f\u601d\u662f\u7528\u4e8e\u5168\u9762\u641c\u7d22\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5e76\u5c06\u7ed3\u679c\u8f93\u51fa\u3002\u4eba\u4eec\u901a\u5e38\u4f1a\u5c06grep\u547d\u4ee4\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u642d\u914d\u4f7f\u7528\uff0c\u53c2\u6570\u4f5c\u4e3a\u641c\u7d22\u8fc7\u7a0b\u4e2d\u7684\u8865\u5145\u6216\u5bf9\u8f93\u51fa\u7ed3\u679c\u7684\u7b5b\u9009\uff0c\u547d\u4ee4\u6a21\u5f0f\u5341\u5206\u7075\u200d\u6d3b\u3002  </p> <pre><code>grep \u53c2\u6570(\u53ef\u4ee5\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32) \u6587\u4ef6\u540d\n</code></pre> <p> </p>"},{"location":"linux/basic.html#7","title":"7. \u6587\u4ef6\u89e3\u538b\u7f29","text":""},{"location":"linux/basic.html#71-gzip","title":"7.1 gzip","text":"<p>\u53ea\u80fd\u538b\u7f29\u6587\u4ef6\uff0c\u538b\u7f29\u6587\u4ef6\u7684\u540e\u7f00\u540d \u539f\u540d.gz   \u538b\u7f29\u4ee5\u540e\u539f\u6587\u4ef6\u6d88\u5931\uff0c\u89e3\u538b\u4ee5\u540egz\u538b\u7f29\u5305\u4e5f\u6d88\u5931</p> <pre><code>\u538b\u7f29\u6587\u4ef6\uff1a gzip \u6587\u4ef6\u540d\n\u89e3\u538b\u6587\u4ef6\uff1a gunzip \u6587\u4ef6\u540d.gz\n</code></pre>"},{"location":"linux/basic.html#72-zip","title":"7.2 zip","text":"<pre><code>\u538b\u7f29\u6587\u4ef6: zip \u538b\u7f29\u6587\u4ef6\u540d.zip \u6587\u4ef6\u540d\n\u538b\u7f29\u6587\u4ef6\u5939: zip -r \u538b\u7f29\u6587\u4ef6\u5939\u540d.zip \u6587\u4ef6\u5939\n\u89e3\u538b\u6587\u4ef6/\u6587\u4ef6\u8d3e unzip \u538b\u7f29\u6587\u4ef6\u540d.zip -d /\u89e3\u538b\u7684\u4f4d\u7f6e\n</code></pre>"},{"location":"linux/basic.html#73-tar","title":"7.3 tar","text":"<p>tar\u547d\u4ee4\u7684\u529f\u80fd\u662f\u538b\u7f29\u548c\u89e3\u538b\u7f29\u6587\u4ef6\uff0c\u80fd\u591f\u5236\u4f5c\u51faLinux\u7cfb\u7edf\u4e2d\u5e38\u89c1\u7684tar\u3001tar.gz\u3001tar.bz2\u7b49\u683c\u5f0f\u7684\u538b\u7f29\u5305\u6587\u4ef6\u3002\u5bf9\u4e8eRHEL 7\u3001CentOS 7\u7248\u672c\u53ca\u4ee5\u540e\u7684\u7cfb\u7edf\uff0c\u89e3\u538b\u7f29\u65f6\u4e0d\u6dfb\u52a0\u683c\u5f0f\u53c2\u6570\uff08\u5982z\u6216j\uff09\uff0c\u7cfb\u7edf\u4e5f\u80fd\u81ea\u52a8\u8fdb\u884c\u5206\u6790\u5e76\u89e3\u538b\u3002\u628a\u8981\u4f20\u8f93\u7684\u6587\u4ef6\u5148\u538b\u7f29\u518d\u4f20\u8f93\uff0c\u80fd\u591f\u5f88\u597d\u5730\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff0c\u65b9\u4fbf\u5206\u4eab\u3002  </p> <pre><code>\u5f52\u7eb3\u6587\u4ef6\ntar -cvf xxx.tar \u8981\u5f52\u7eb3\u7684\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\n-f \u6307\u5b9a\u64cd\u4f5c\u7684\u6587\u4ef6\n-z \u89e3\u538b\u7f29\n-c \u5f52\u7eb3\n-x \u89e3\u7eb3\n\u6253\u5305\uff1a tar -cvf xxx.tar \u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\n\u6253\u5305+\u538b\u7f29\uff1atar -czvf xxx.tar.gz \u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\n\u89e3\u5305\uff1a tar -xvf xxx.tar -C /\u89e3\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u5939\n\u89e3\u538b+\u89e3\u5305\uff1atar -zxvf xxx.tar.gz -C /\u89e3\u5230\u6307\u5b9a\u7684\u6587\u4ef6\u5939\n</code></pre>"},{"location":"linux/basic.html#linux-docker","title":"Linux \u4e0b\u4e00\u4e9b\u5e94\u7528\u7684\u5b89\u88c5\uff08\u975e docker)","text":""},{"location":"linux/basic.html#1-jdk-tomcat","title":"1. \u5b89\u88c5 JDK \u4e0e Tomcat","text":"<p>\u6ce8\uff1a\u6240\u6709\u7aef\u53e3\u90fd\u6ce8\u610f\u4e00\u4e0b\u5f00\u6ca1\u5f00\u653e\uff08\u4e91\u670d\u52a1\u5668\uff09\uff0c\u7136\u540e\u9632\u706b\u5899\u8981\u8bb0\u5f97\u5173</p>"},{"location":"linux/basic.html#jdk","title":"JDK","text":"<p>1\u3001\u5148\u53bb\u5b98\u7f51\u4e0b\u4e00\u4e2a jdk \u7684tar.gz \u7248\u672c</p> <p>2\u3001\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e tar -zxvf \u5c31\u53ef\u4ee5\u89e3\u538b + \u89e3\u7eb3\uff08opt\uff09</p> <p>3\u3001\u914d\u73af\u5883\u53d8\u91cf\uff1avim /etc/profile.d/my_env.sh\uff08\u5728profile.d\u4e0b\u9762\u65b0\u5efa\u4f60\u7684\u73af\u5883\u53d8\u91cf\u6587\u4ef6.sh\uff09</p> <pre><code>#JAVA_HOME\nJAVA_HOME=/opt/jdk-17.0.12\nPATH=$PATH:$JAVA_HOME/bin\nexport PATH JAVA_HOME\n</code></pre> <p>4\u3001source /etc/profile.d/my_env.s</p>"},{"location":"linux/basic.html#tomcat","title":"Tomcat","text":"<p>\u76f4\u63a5\u53bb\u5b98\u7f51\u627e\u5230\u5bf9\u5e94\u7248\u672c\uff1atomcat 10.x \u7136\u540e\u4e0b\u8f7d\u89e3\u538b\u5373\u53ef</p>"},{"location":"linux/basic.html#2-mysql","title":"2. \u5b89\u88c5mysql","text":"<p>1) \u5148\u53bb\u5b98\u7f51\u4e0a\u4e0b\u8f7d\u548c\u4f60\u7684 linux \u5339\u914d\u7684\u7248\u672c\uff0c\u6700\u597d\u662fxxx.tar\uff0cRPM Bundle \u662f\u4e00\u4e2a\u6253\u5305\u597d\u7684 .tar.gz \u6587\u4ef6\uff0c\u5305\u542b\u4e86\u6240\u6709\u5fc5\u8981\u7684 RPM \u5305\uff08\u670d\u52a1\u5668\u3001\u5ba2\u6237\u7aef\u3001\u5e93\u7b49\uff09\u3002 <pre><code>\u901a\u8fc7\u547d\u4ee4\uff1acat /etc/redhat-release \u67e5\u770b\u7248\u672c\n</code></pre></p> <p>2) \u7136\u540e\uff0c\u628a .tar \u89e3\u7eb3\u4e86\uff0c\u5c31\u5230\u7684\u82e5\u5e72\u4e2a.rpm</p> <p>3) \u4e4b\u540e\uff0c\u6309\u987a\u5e8f\u901a\u8fc7 rpm -ivh xxx.rpm \u6765\u5b89\u88c5\uff0c\u987a\u5e8f\u4e3a\uff1a <pre><code>   1\uff09mysql-community-common-8.0.30-1.el7.x86_64.rpm\n   2\uff09mysql-community-client-plugins-8.0.30-1.el7.x86_64.rpm\n   3\uff09mysql-community-libs-8.0.30-1.el7.x86_64.rpm\n   4\uff09mysql-community-icu-data-files-8.0.30-1.el7.x86_64.rpm\n   5\uff09mysql-community-icu-data-files-8.0.30-1.el7.x86_64.rpm\n   6\uff09mysql-community-server-8.0.30-1.el7.x86_64.rpm\n</code></pre> 4) \u5b89\u88c5\u5b8c\u6bd5\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 mysqladmin --version \u68c0\u67e5\u662f\u5426\u5b89\u88c5\u6210\u529f</p>"},{"location":"linux/basic.html#21-mysql","title":"2.1 \u4e0e mysql \u670d\u52a1\u76f8\u5173\u7684\u547d\u4ee4","text":"<p>\u542f\u52a8\u670d\u52a1</p> <pre><code>#\u521d\u59cb\u5316\u670d\u52a1\nmysqld --initialize --user=root\n\n# \u542f\u52a8\u670d\u52a1\nsystemclt start mysqld\n\n# \u9047\u5230\u7684\u9519\u8bef\uff08\u6743\u9650\u4e0d\u8db3\uff0c\u521b\u5efa\u4e0d\u4e86\u6587\u4ef6\uff09\n\u89e3\u51b3\uff1a\nchown -R mysql:mysql /var/lib/mysql\nchmod -R 777 /var/lib/mysql\n</code></pre> <p>\u627e\u521d\u59cb\u5316\u5bc6\u7801\u4ee5\u53ca\u91cd\u7f6e\u5bc6\u7801</p> <pre><code># \u627e\u521d\u59cb\u5316\u5bc6\u7801\ncat /var/log/mysqld.log\ngrep \"temporary password\" \\var\\log\\mysqld.log\n# \u91cd\u7f6e\u5bc6\u7801\nALTER USER 'root'@'localhost' IDENTIFIED BY 'liuqiang';\n</code></pre> <p>\u53bb\u914d\u7f6e\u54ea\u4e9b\u4e3b\u673a\u53ef\u4ee5\u8fde\u63a5\u5f53\u524dmysql</p> <pre><code># \u4fee\u6539\u8868\nupdate user set host='%' where user='root';\n# \u4fee\u6539\u5b8cmysql\u5e95\u5c42\u8868\uff0c\u8bb0\u5f97\u66f4\u65b0 \nFLUSH PRIVILEGES;\n</code></pre>"},{"location":"linux/basic.html#3-nginx","title":"3. \u5b89\u88c5 nginx","text":""},{"location":"linux/basic.html#1_1","title":"1 \u5b89\u88c5\u8fc7\u7a0b","text":"<p>\u914d\u7f6eNginx yum\u5b58\u50a8\u5e93</p> <pre><code>\u521b\u5efa/etc/yum.repos.d/nginx.repo\u6587\u4ef6\nsudo vim /etc/yum.repos.d/nginx.repo\n\n\u589e\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n</code></pre> <p>\u5728\u7ebf\u5b89\u88c5Nginx</p> <pre><code>sudo yum install nginx\n</code></pre> <p>\u542f\u52a8Nginx</p> <pre><code>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8Nginx\nsudo systemctl start nginx\n\n\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770bNginx\u8fd0\u884c\u72b6\u6001\nsudo systemctl status nginx\n\n\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsudo systemctl enable nginx\n</code></pre> <p>\u8bbf\u95eeNginx\u670d\u52a1\u9ed8\u8ba4\u9996\u9875: \u8bbf\u95ee<code>http://192.168.10.101</code>\uff0c\u80fd\u8bbf\u95ee\u5230\u5982\u4e0b\u9875\u9762\uff0c\u5219\u8bc1\u660eNginx\u8fd0\u884c\u6b63\u5e38\u3002</p>"},{"location":"linux/basic.html#2_1","title":"2 \u6838\u5fc3\u76ee\u5f55\u4ee5\u53ca\u6587\u4ef6","text":"<ol> <li> <p>\u914d\u7f6e\u6587\u4ef6\u76f8\u5173</p> <ul> <li><code>/etc/nginx/</code>\uff1a\u4e3b\u8981\u7684Nginx\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u3002</li> <li><code>/etc/nginx/nginx.conf</code>\uff1aNginx\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6\uff0c\u5305\u542b\u5168\u5c40\u914d\u7f6e\u4fe1\u606f\u3002</li> <li><code>/etc/nginx/conf.d/</code>\uff1a\u8fd9\u4e2a\u76ee\u5f55\u901a\u5e38\u5305\u542b\u4e00\u4e9b\u9644\u52a0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e3b\u914d\u7f6e\u6587\u4ef6<code>/etc/nginx/nginx.conf</code>\u4f1a\u5f15\u5165\u8be5\u76ee\u5f55\u7684\u6240\u6709\u6587\u4ef6\u3002</li> </ul> </li> <li> <p>\u65e5\u5fd7\u76f8\u5173</p> </li> <li> <p><code>/var/log/nginx/</code>\uff1aNginx\u7684\u65e5\u5fd7\u6587\u4ef6\u76ee\u5f55\uff0c\u5305\u62ec\u8bbf\u95ee\u65e5\u5fd7\u548c\u9519\u8bef\u65e5\u5fd7\u3002</p> <ul> <li><code>/var/log/nginx/access.log</code>\uff1a\u8bbf\u95ee\u65e5\u5fd7\uff0c\u8bb0\u5f55\u6240\u6709\u8fdb\u5165\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u3002</li> <li><code>/var/log/nginx/error.log</code>\uff1a\u9519\u8bef\u65e5\u5fd7\uff0c\u8bb0\u5f55\u670d\u52a1\u5668\u5904\u7406\u8fc7\u7a0b\u4e2d\u7684\u9519\u8bef\u4fe1\u606f\u3002</li> </ul> </li> <li> <p>\u9759\u6001\u8d44\u6e90</p> <ul> <li>/usr/share/nginx/html -&gt;\u9759\u6001\u8d44\u6e90</li> </ul> </li> </ol>"},{"location":"linux/basic.html#3_2","title":"3 \u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e","text":"<p>\u7531\u4e8eNginx\u4e2d\u53ef\u5b58\u5728\u591a\u4e2a\u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e\uff0c\u6545\u63a5\u6536\u5230\u4e00\u4e2a\u8bf7\u6c42\u540e\uff0cNginx\u9996\u5148\u8981\u786e\u5b9a\u8bf7\u6c42\u4ea4\u7ed9\u54ea\u4e2a\u865a\u62df\u4e3b\u673a\u8fdb\u884c\u5904\u7406\u3002\u8fd9\u5f88\u663e\u7136\u662f\u6839\u636e<code>server_name</code>\u548c<code>listen</code>\u8fdb\u884c\u5224\u65ad\u7684\u3002\u4f8b\u5982\u4e0a\u8ff0\u7684\u8bf7\u6c42\u8def\u5f84http://115.190.231.171/hello-nginx\uff0c\u5c31\u4f1a\u5339\u914d\u5230\u4ee5\u4e0b\u7684\u865a\u62df\u4e3b\u673a</p> <pre><code>server{\n    listen 8080;\n    server_name 115.190.231.171;\n    location /hello-nginx{\n        root /usr/share/nginx/html/;\n        index index.html;\n    }\n}\n\n#\u5176\u4ed6\u547d\u4ee4\nnginx -t \nnginx -s reload\n</code></pre>"},{"location":"linux/basic.html#4_1","title":"4 \u53cd\u5411\u4ee3\u7406","text":"<pre><code>server{\n    listen 8080;\n    server_name 115.190.231.171;\n    location / {\n         proxy_pass http://www.atguigu.com;\n    }\n\n}\n</code></pre>"},{"location":"linux/basic.html#5_1","title":"5 \u5b89\u5168\u6a21\u5f0f","text":"<pre><code>sudo setenforce 0 \u662f\u4e00\u4e2a\u7528\u4e8e\u7ba1\u7406 SELinux\uff08Security-Enhanced Linux\uff09\u7b56\u7565\u7684\u547d\u4ee4\u3002\n\n\u89e3\u91ca\uff1a\nsudo: \u8fd9\u4e2a\u547d\u4ee4\u7528\u4e8e\u4ee5\u8d85\u7ea7\u7528\u6237\u6743\u9650\uff08root \u6743\u9650\uff09\u6267\u884c\u540e\u7eed\u7684\u547d\u4ee4\u3002\u5b83\u8981\u6c42\u7528\u6237\u8f93\u5165\u5bc6\u7801\uff0c\u4ee5\u786e\u8ba4\u6709\u6743\u9650\u6267\u884c\u9ad8\u6743\u9650\u7684\u64cd\u4f5c\u3002\n\nsetenforce: \u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u52a8\u6001\u8bbe\u7f6e SELinux \u6a21\u5f0f\u7684\u547d\u4ee4\u3002SELinux \u6709\u4e09\u79cd\u5de5\u4f5c\u6a21\u5f0f\uff1aEnforcing\uff08\u5f3a\u5236\uff09\u3001Permissive\uff08\u5bbd\u5bb9\uff09\u3001Disabled\uff08\u7981\u7528\uff09\u3002setenforce \u547d\u4ee4\u5141\u8bb8\u4f60\u5207\u6362 Enforcing \u548c Permissive \u6a21\u5f0f\u3002\n\nEnforcing \u6a21\u5f0f\uff1aSELinux \u4f1a\u5f3a\u5236\u6267\u884c\u6240\u6709\u7684\u5b89\u5168\u7b56\u7565\uff0c\u5bf9\u4e0d\u7b26\u5408\u7b56\u7565\u7684\u64cd\u4f5c\u8fdb\u884c\u963b\u6b62\uff0c\u5e76\u8bb0\u5f55\u4e8b\u4ef6\u3002\nPermissive \u6a21\u5f0f\uff1aSELinux \u4f1a\u5141\u8bb8\u6240\u6709\u64cd\u4f5c\uff0c\u4f46\u4f1a\u8bb0\u5f55\u8fdd\u53cd\u5b89\u5168\u7b56\u7565\u7684\u4e8b\u4ef6\uff0c\u4e0d\u4f1a\u963b\u6b62\u4efb\u4f55\u64cd\u4f5c\u3002\n0: \u8fd9\u4e2a\u6570\u5b57\u8868\u793a\u5c06 SELinux \u5207\u6362\u5230 Permissive \u6a21\u5f0f\u3002\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e0b\uff0cSELinux \u4e0d\u4f1a\u963b\u6b62\u4efb\u4f55\u64cd\u4f5c\uff0c\u53ea\u4f1a\u8bb0\u5f55\u6f5c\u5728\u7684\u8fdd\u89c4\u884c\u4e3a\u3002\n\n\u7efc\u4e0a\uff1a\nsudo setenforce 0 \u547d\u4ee4\u7684\u4f5c\u7528\u662f\u5c06 SELinux \u7684\u6a21\u5f0f\u8bbe\u7f6e\u4e3a Permissive\u3002\u8fd9\u610f\u5473\u7740 SELinux \u4f1a\u505c\u6b62\u5f3a\u5236\u6267\u884c\u5b89\u5168\u7b56\u7565\uff0c\u53ea\u4f1a\u8bb0\u5f55\u4efb\u4f55\u8fdd\u53cd\u7b56\u7565\u7684\u64cd\u4f5c\uff0c\u800c\u4e0d\u4f1a\u771f\u6b63\u963b\u6b62\u5b83\u4eec\u3002\u901a\u5e38\uff0c\u7ba1\u7406\u5458\u4f1a\u5728\u6392\u67e5 SELinux \u76f8\u5173\u95ee\u9898\u65f6\u4f7f\u7528\u8fd9\u4e2a\u547d\u4ee4\uff0c\u4ee5\u4fbf\u4e0d\u88ab\u7b56\u7565\u9650\u5236\u5f71\u54cd\u7cfb\u7edf\u7684\u6b63\u5e38\u64cd\u4f5c\u3002\n\n\u6ce8\u610f\uff1a\n\u8fd9\u4e2a\u547d\u4ee4\u4ec5\u4f1a\u5728\u5f53\u524d\u4f1a\u8bdd\u4e2d\u751f\u6548\u3002\u5982\u679c\u9700\u8981\u6c38\u4e45\u7981\u7528 SELinux \u6216\u66f4\u6539\u914d\u7f6e\uff0c\u9700\u8981\u4fee\u6539 SELinux \u914d\u7f6e\u6587\u4ef6\uff08\u901a\u5e38\u662f /etc/selinux/config\uff09\u3002\n\u5728\u67d0\u4e9b\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5c06 SELinux \u8bbe\u7f6e\u4e3a Permissive \u53ef\u80fd\u4f1a\u5e26\u6765\u5b89\u5168\u9690\u60a3\uff0c\u56e0\u4e3a\u5b83\u4e0d\u518d\u5f3a\u5236\u6267\u884c\u5b89\u5168\u7b56\u7565\u3002\n</code></pre>"},{"location":"linux/basic.html#4-minio","title":"4. \u5b89\u88c5 minio","text":"<p>\u8fd8\u662f\u53bb\u5b98\u7f51\u4e0b\u8f7d minio \u7684 rpm \u5305</p> <pre><code>wget https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20241029160148.0.0-1.x86_64.rpm -O minio.rpm\n</code></pre> <p>\u7136\u540e\u76f4\u63a5\u5b89\u88c5</p> <pre><code>dnf|yum install minio.rpm\n\nrpm -ivh xxx.rpm\n</code></pre> <p>\u4e4b\u540e\u5c31\u53ef\u4ee5\u542f\u52a8 minio \u670d\u52a1\u5668\u4e86</p> <pre><code>mkdir ~/minio\nminio server ~/minio --console-address :9001\n\n// \u540e\u53f0\u542f\u52a8\nnohup minio server ./minioPath/data &gt; ./minioPath/minio.log 2&gt;&amp;1 &amp;\nRootUser: minioadmin\nRootPass: minioadmin\n</code></pre> <p>\u914d\u7f6e minio \u7684\u6570\u636e\u5b58\u653e\u4f4d\u7f6e\u4ee5\u53ca\u540e\u53f0\u542f\u52a8</p> <pre><code>// 1. \u7f16\u5199MinIO\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\nvim /etc/systemd/system/minio.service\n\n// 2. \u5185\u5bb9\u5982\u4e0b\uff0c\u5177\u4f53\u53ef\u53c2\u8003MinIO[\u5b98\u65b9\u6587\u6863]\n\n(https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html#create-the-systemd-service-file)\u3002\n\n[Unit]\nDescription=MinIO\nDocumentation=https://min.io/docs/minio/linux/index.html\nWants=network-online.target\nAfter=network-online.target\nAssertFileIsExecutable=/usr/local/bin/minio\n\n[Service]\nWorkingDirectory=/usr/local\nProtectProc=invisible\nEnvironmentFile=-/etc/default/minio\nExecStartPre=/bin/bash -c \"if [ -z \\\"${MINIO_VOLUMES}\\\" ]; then echo \\\"Variable MINIO_VOLUMES not set in /etc/default/minio\\\"; exit 1; fi\"\nExecStart=/usr/local/bin/minio server $MINIO_OPTS $MINIO_VOLUMES\nRestart=always\nLimitNOFILE=65536\nTasksMax=infinity\nTimeoutStopSec=infinity\nSendSIGKILL=no\n\n[Install]\nWantedBy=multi-user.target\n\n// 3. \u7f16\u5199 EnvironmentFile \u6587\u4ef6\nvim /etc/default/minio\n\nMINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\nMINIO_VOLUMES=/root/minio/data\nMINIO_OPTS=\"--console-address :9001\"\n\n\nmkdir /data\nchmod -R 777 /root/minio/data\n</code></pre> \u914d\u7f6e\u9879 \u8bf4\u660e \u5907\u6ce8 <code>EnvironmentFile</code> \u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u7528\u4e8e\u5b9a\u4e49\u73af\u5883\u53d8\u91cf <code>ExecStart</code> \u670d\u52a1\u542f\u52a8\u547d\u4ee4 \u6838\u5fc3\u542f\u52a8\u811a\u672c <code>MINIO_OPTS</code> \u542f\u52a8\u9009\u9879\u53c2\u6570 \u53ef\u9009\uff0c\u5f15\u7528\u4e8e\u73af\u5883\u6587\u4ef6 <code>MINIO_VOLUMES</code> \u6570\u636e\u5b58\u50a8\u8def\u5f84 \u5fc5\u586b\uff0c\u6307\u5b9a\u5b58\u50a8\u4f4d\u7f6e <code>Restart</code> \u81ea\u52a8\u91cd\u542f\u7b56\u7565 \u4fdd\u8bc1\u670d\u52a1\u9ad8\u53ef\u7528 <p>\u81ea\u5b9a\u4e49\u6876\u89c4\u5219</p> <pre><code>{\n  \"Statement\" : [ {\n    \"Action\" : \"s3:GetObject\",\n    \"Effect\" : \"Allow\",\n    \"Principal\" : \"*\",\n    \"Resource\" : \"arn:aws:s3:::test/*\"\n  } ],\n  \"Version\" : \"2012-10-17\"\n}\n</code></pre> <p>minio\u901a\u7528\u6a21\u677f</p> <pre><code>@Test  \nvoid testMinioClient() throws Exception {  \n    // \u68c0\u67e5\u5e76\u521b\u5efa\u6876  \n    boolean exists = minioClient.bucketExists(  \n            BucketExistsArgs.builder().bucket(BUCKET_NAME).build()  \n    );  \n\n    if (!exists) {  \n        minioClient.makeBucket(  \n                MakeBucketArgs.builder().bucket(BUCKET_NAME).build()  \n        );  \n\n        String policy = \"\"\"  \n            {              \"Statement\": [{                \"Action\": \"s3:GetObject\",                \"Effect\": \"Allow\",                \"Principal\": \"*\",                \"Resource\": \"arn:aws:s3:::%s/*\"              }],              \"Version\": \"2012-10-17\"            }            \"\"\".formatted(BUCKET_NAME);  \n\n        minioClient.setBucketPolicy(  \n                SetBucketPolicyArgs.builder()  \n                        .bucket(BUCKET_NAME)  \n                        .config(policy)  \n                        .build()  \n        );  \n    }  \n\n    // \u4e0a\u4f20\u6587\u4ef6\uff08\u4ece\u6d4b\u8bd5\u8d44\u6e90\u76ee\u5f55\uff09  \n    URL resource = getClass().getClassLoader().getResource(\"test-file.txt\");  \n    if (resource == null) {  \n        throw new IllegalStateException(\"Test file 'test-file.txt' not found in resources!\");  \n    }  \n    Path filePath = Paths.get(resource.toURI());  \n    long fileSize = Files.size(filePath);  \n\n    try (InputStream inputStream = Files.newInputStream(filePath)) {  \n        minioClient.putObject(  \n                PutObjectArgs.builder()  \n                        .bucket(BUCKET_NAME)  \n                        .object(\"remote-file.txt\")  \n                        // \u8f93\u5165\u6d41\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u5206\u7247\u5927\u5c0f\uff0c\u9ed8\u8ba4\u5206\u7247\u5927\u5c0f\uff085MB) \n                        .stream(inputStream, fileSize, -1)  \n                        .contentType(\"text/plain\")  \n                        .build()  \n        );  \n    }  \n}\n</code></pre>"},{"location":"linux/basic.html#x1","title":"x1. \u8f6f\u4ef6\u5305\u7ba1\u7406","text":"<pre><code>1. \u67e5\u8be2\nrpm -qa | grep \u5173\u952e\u5b57 \u67e5\u770b\u5b89\u88c5\u4e86\u67d0\u4e2a\u8f6f\u4ef6 [\u67e5\u8be2\u5b89\u88c5\u4e86\u54ea\u4e9b\u8f6f\u4ef6 grep \u7b5b\u9009]\nrpm -ql \u8f6f\u4ef6\u540d \u67e5\u770b\u8f6f\u4ef6\u5b89\u88c5\u7684\u6587\u4ef6\u5939 [\u8f6f\u4ef6\u5b89\u88c5\u7684\u4f4d\u7f6e]\n\n2. \u5378\u8f7d\nrpm -e \u8f6f\u4ef6\u540d \u5378\u8f7d\u8f6f\u4ef6,\u5982\u679c\u8981\u5378\u8f7d\u7684\u8f6f\u4ef6\u5176\u4ed6\u8f6f\u4ef6\u4f9d\u8d56,\u5378\u8f7d\u5931\u8d25 [\u5982\u679c\u6709\u522b\u7684\u8f6f\u4ef6\u4f9d\u8d56\u6211,\u6211\u5c31\u5378\u8f7d\u5931\u8d25]\nrpm -e --nodeps \u8f6f\u4ef6\u540d \u5f3a\u5236\u5378\u8f7d [\u4e0d\u5173\u522b\u7684\u8f6f\u4ef6\u662f\u5426\u4f9d\u8d56\u6211,\u6211\u90fd\u5f3a\u5236\u5378\u8f7d]\n\n3. \u5b89\u88c5\uff08yum\uff09\nrpm -ivh --nodeps \u8f6f\u4ef6\u5305.rpm [--nodeps \u5f3a\u5236\u5b89\u88c5,\u5c31\u7b97\u73af\u5883\u4e0d\u8db3\u5b89\u88c5\u6210\u529f,\u8fd0\u884c\u4e0d\u8d77\u6765! ]\n</code></pre>"},{"location":"linux/basic.html#x2","title":"x2. \u5207\u6362\u7b2c\u4e09\u65b9\u6e90","text":"<pre><code>centos7\u505c\u6b62\u5b98\u65b9\u7ef4\u62a4,\u5207\u6362\u6570\u636e\u6e90\u4e3a\u963f\u91cc\u6e90\u65b9\u53ef\u4f7f\u7528\nwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\nyum -y install \u8f6f\u4ef6\u540d\n</code></pre>"},{"location":"linux/basic.html#_1","title":"\u5176\u4ed6\u547d\u4ee4\u603b\u7ed3","text":"<p>\u67e5\u770b\u7aef\u53e3\u53f7\u662f\u5426\u88ab\u5360\u7528</p> <pre><code>ss -tuln | grep \"port\"\n</code></pre> <p>\u67e5\u770b\u7aef\u53e3\u5177\u4f53\u5e94\u7528\u4fe1\u606f</p> <pre><code>lsof -i:port;\n</code></pre>"},{"location":"middleware/minio.html","title":"minio","text":""},{"location":"middleware/minio.html#_1","title":"\u57fa\u7840\u6982\u5ff5","text":"<ul> <li>\u5bf9\u8c61\uff08Object\uff09 </li> </ul> <p>\u5bf9\u8c61\u662f\u5b9e\u9645\u7684\u6570\u636e\u5355\u5143\uff0c\u4f8b\u5982\u6211\u4eec\u4e0a\u4f20\u7684\u4e00\u4e2a\u56fe\u7247\u3002</p> <ul> <li>\u5b58\u50a8\u6876\uff08Bucket\uff09</li> </ul> <p>\u5b58\u50a8\u6876\u662f\u7528\u4e8e\u7ec4\u7ec7\u5bf9\u8c61\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u5939\u3002\u6bcf\u4e2a\u5b58\u50a8\u6876\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u5bf9\u8c61\u3002</p> <ul> <li>\u7aef\u70b9\uff08Endpoint\uff09 </li> </ul> <p>\u7aef\u70b9\u662fMinIO\u670d\u52a1\u5668\u7684\u7f51\u7edc\u5730\u5740\uff0c\u7528\u4e8e\u8bbf\u95ee\u5b58\u50a8\u6876\u548c\u5bf9\u8c61\uff0c\u4f8b\u5982<code>http://192.168.10.101:9000</code></p> <p>\u6ce8\u610f\uff1a</p> <p><code>9000</code>\u4e3aMinIO\u7684API\u7684\u9ed8\u8ba4\u7aef\u53e3\uff0c\u524d\u8fb9\u914d\u7f6e\u7684<code>9001</code>\u4ee5\u4e3a\u7ba1\u7406\u9875\u9762\u7aef\u53e3\u3002</p> <ul> <li>Access Key \u548c Secret Key</li> </ul> <p>Access Key\u662f\u7528\u4e8e\u6807\u8bc6\u548c\u9a8c\u8bc1\u8bbf\u95ee\u8005\u8eab\u4efd\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u76f8\u5f53\u4e8e\u7528\u6237\u540d\u3002</p> <p>Secret Key\u662f\u4e0eAccess Key\u5173\u8054\u7684\u5bc6\u7801\uff0c\u7528\u4e8e\u9a8c\u8bc1\u8bbf\u95ee\u8005\u7684\u8eab\u4efd\u3002</p>"},{"location":"middleware/minio.html#minio","title":"MinIO\u7ba1\u7406\u9875\u9762\u64cd\u4f5c","text":""},{"location":"middleware/minio.html#_2","title":"\u767b\u5f55","text":"<p>\u7ba1\u7406\u9875\u9762\u7684\u5730\u5740\u4e3ahttp://192.168.10.101:9001\uff0c\u767b\u5f55\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e3a\u90e8\u7f72\u65f6\u5728<code>EnvironmentFile</code>\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684\u5982\u4e0b\u53c2\u6570</p> <pre><code>MINIO_ROOT_USER=minioadmin\nMINIO_ROOT_PASSWORD=minioadmin\n</code></pre>"},{"location":"middleware/minio.html#bucket","title":"\u521b\u5efa bucket","text":""},{"location":"middleware/minio.html#_3","title":"\u4e0a\u4f20\u56fe\u7247","text":"<p>\u627e\u5230\u76ee\u6807\u6876</p> <p> </p> <p>\u4e0a\u4f20\u56fe\u7247</p> <p> </p>"},{"location":"middleware/minio.html#_4","title":"\u627e\u5230\u56fe\u7247","text":"<p>\u7531\u4e8eMinIO\u63d0\u4f9b\u4e86HTTP\u8bbf\u95ee\u529f\u80fd\uff0c\u6240\u4ee5\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u76f4\u63a5\u8bbf\u95ee\u5bf9\u8c61\u3002\u5bf9\u8c61URL\u4e3aMinIO\u7684<code>Endpoint</code>+<code>\u5bf9\u8c61\u7684\u5b58\u50a8\u8def\u5f84</code>\uff0c\u4f8b\u5982\u4e0b\u56fe\u4e2d\u7684\u56fe\u7247\u5bf9\u8c61\u7684URL\u4e3a : http:192.168.10.101:9000/test/\u516c\u5bd3-\u5916\u89c2.jpg\u3002</p> <p> </p>"},{"location":"middleware/minio.html#_5","title":"\u8bbf\u95ee\u6743\u9650","text":"<p>\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\uff0c\u4f7f\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u4e0a\u8ff0URL\uff0c\u4f1a\u5f97\u5230\u5982\u4e0b\u54cd\u5e94\uff0c\u5f88\u663e\u7136\u662f\u6ca1\u6709\u8bbf\u95ee\u6743\u9650\u3002</p> <pre><code>&lt;Error&gt;\n    &lt;Code&gt;AccessDenied&lt;/Code&gt;\n    &lt;Message&gt;Access Denied.&lt;/Message&gt;\n    &lt;Key&gt;\u516c\u5bd3-\u5916\u89c2.jpg&lt;/Key&gt;\n    &lt;BucketName&gt;test&lt;/BucketName&gt;\n    &lt;Resource&gt;/test/\u516c\u5bd3-\u5916\u89c2.jpg&lt;/Resource&gt;\n    &lt;RequestId&gt;177BC92022FC5684&lt;/RequestId&gt;\n    &lt;HostId&gt;dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8&lt;/HostId&gt;\n&lt;/Error&gt;\n</code></pre> <p>\u82e5\u60f3\u7ee7\u7eed\u8bbf\u95ee\u56fe\u7247\uff0c\u9700\u8981\u4fee\u6539\u56fe\u7247\u6240\u5728\u6876\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5982\u4e0b\u56fe\u6240\u793a</p> <p> </p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u53ef\u9009\u7684\u8bbf\u95ee\u6743\u9650\u5171\u6709\u4e09\u4e2a\u9009\u9879\uff0c\u5206\u522b\u662f<code>Private</code>\u3001<code>Public</code>\u548c<code>Custom</code>\uff0c\u5177\u4f53\u8bf4\u660e\u5982\u4e0b</p> <ul> <li><code>Private</code></li> </ul> <p>\u53ea\u5141\u8bb8\u6876\u7684\u6240\u6709\u8005\u5bf9\u8be5\u6876\u8fdb\u884c\u8bfb\u5199\u3002</p> <ul> <li><code>Public</code></li> </ul> <p>\u5141\u8bb8\u6240\u6709\u4eba\u5bf9\u8be5\u6876\u8fdb\u884c\u8bfb\u5199\u3002</p> <ul> <li><code>Custom</code></li> </ul> <p>\u81ea\u5b9a\u4e49\u8bbf\u95ee\u6743\u9650\u3002</p> <p>\u82e5\u60f3\u5c06\u6743\u9650\u8bbe\u7f6e\u4e3a\u53ea\u5141\u8bb8\u6240\u6709\u8005\u5199\uff0c\u4f46\u5141\u8bb8\u6240\u6709\u4eba\u8bfb\uff0c\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u8bbf\u95ee\u6743\u9650\u3002\u81ea\u5b9a\u4e49\u8bbf\u95ee\u6743\u9650\uff0c\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u89c4\u5b9a\u683c\u5f0f\u7684JSON\u5b57\u7b26\u4e32\u8fdb\u884c\u63cf\u8ff0\uff0c\u5177\u4f53\u683c\u5f0f\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p> <p>\u4f8b\u5982\u4ee5\u4e0bJSON\u5b57\u7b26\u4e32\u8868\u8fbe\u7684\u542b\u4e49\u662f\uff1a\u5141\u8bb8(<code>Allow</code>)\u6240\u6709\u4eba(<code>*</code>)\u8bfb\u53d6(<code>s3:GetObject</code>)\u6307\u5b9a\u6876(<code>test</code>)\u7684\u6240\u6709\u5185\u5bb9\u3002</p> <pre><code>{\n  \"Statement\" : [ {\n    \"Action\" : \"s3:GetObject\",\n    \"Effect\" : \"Allow\",\n    \"Principal\" : \"*\",\n    \"Resource\" : \"arn:aws:s3:::test/*\"\n  } ],\n  \"Version\" : \"2012-10-17\"\n}\n</code></pre> <p>\u5c06<code>test</code>\u6876\u8bbf\u95ee\u6743\u9650\u8bbe\u7f6e\u4e3a<code>Custom</code>\uff0c\u5e76\u6dfb\u52a0\u4e0a\u8ff0\u5185\u5bb9,\u6539\u6210\u81ea\u5df1\u7684\u6876\u540d\uff01</p> <p>\u91cd\u65b0\u8bbf\u95eehttp:192.168.10.101:9000/test/\u516c\u5bd3-\u5916\u89c2.jpg\uff0c\u89c2\u5bdf\u662f\u5426\u6b63\u5e38\u3002</p>"},{"location":"middleware/minio.html#minio-java-sdk","title":"MinIO Java SDK","text":"<p>MinIO\u63d0\u4f9b\u4e86\u591a\u79cd\u8bed\u8a00\u7684SDK\u4f9b\u5f00\u53d1\u8005\u4f7f\u7528\uff0c\u672c\u9879\u76ee\u9700\u8981\u7528\u5230Java SDK\uff0c\u4e0b\u9762\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u6848\u4f8b\u719f\u6089\u4e00\u4e0b\u5176\u57fa\u672c\u7528\u6cd5\uff0c\u5177\u4f53\u5185\u5bb9\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p> <ol> <li> <p>\u521b\u5efa\u4e00\u4e2aMaven\u9879\u76ee</p> </li> <li> <p>\u5f15\u5165\u5982\u4e0b\u4f9d\u8d56</p> </li> </ol> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.minio&lt;/groupId&gt;\n    &lt;artifactId&gt;minio&lt;/artifactId&gt;\n    &lt;version&gt;8.5.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <ol> <li>\u7f16\u5199\u5982\u4e0b\u5185\u5bb9</li> </ol> <pre><code>package person.ltb;\n\n\nimport io.minio.*;\nimport io.minio.errors.*;\n\nimport java.io.IOException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\n\npublic class Minio {\n    public static void main(String[] args) throws ServerException, InsufficientDataException, ErrorResponseException, IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException, XmlParserException, InternalException {\n        // \u8fde\u63a5\u53c2\u6570\n        String endpoint = \"http://43.143.165.110:9000\";\n        String accessKey = \"minioadmin\";\n        String accessSecret = \"minioadmin\";\n\n\n        // \u521b\u5efaMinioClient\u5bf9\u8c61\n        MinioClient minioClient = MinioClient.builder()\n                .endpoint(endpoint)\n                .credentials(accessKey, accessSecret)\n                .build();\n\n        // \u5982\u679c\u6876\u4e0d\u5b58\u5728\uff0c\u5c31\u53bb\u521b\u5efa\u4e00\u4e2a\u65b0\u6876\n        String bucketName = \"lease\";\n        boolean found = minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());\n\n        if (!found) {\n            // \u521b\u5efa\u6876\n            minioClient.makeBucket(MakeBucketArgs.builder().bucket(bucketName).build());\n            String policy = \"\"\"\n                     {\n                          \"Statement\" : [ {\n                            \"Action\" : \"s3:GetObject\",\n                            \"Effect\" : \"Allow\",\n                            \"Principal\" : \"*\",\n                            \"Resource\" : \"arn:aws:s3:::hello-minio/*\"\n                          } ],\n                          \"Version\" : \"2012-10-17\"\n                    }\n                    \"\"\";\n\n            minioClient.setBucketPolicy(SetBucketPolicyArgs.builder().bucket(bucketName).config(policy).build());\n        } else {\n            System.out.println(\"Bucket already exists.\");\n        }\n\n        // \u4e0a\u4f20\u4e00\u5f20\u56fe\u7247\n        minioClient.uploadObject(\n                UploadObjectArgs.builder()\n                        .bucket(bucketName)\n                        .object(\"test.png\")\n                        .filename(\"C:\\\\Users\\\\xx\\\\Pictures\\\\sy\\\\1.png\")\n                        .build()\n        );\n\n        // \u62fc\u63a5\u8bbf\u95ee\u5730\u5740\n        String url = endpoint + \"/\" + bucketName + \"/\" + \"test.png\";\n\n        System.out.println(url);\n    }\n}\n</code></pre> <ol> <li>\u8fd0\u884c\u6d4b\u8bd5</li> </ol> <p>\u8fd0\u884c\u4e0a\u8ff0\u4ee3\u7801\uff0c\u7136\u540e\u67e5\u770bMinIO\u7ba1\u7406\u9875\u9762\uff0c\u89c2\u5bdf\u662f\u5426\u4e0a\u4f20\u6210\u529f\u3002</p>"},{"location":"middleware/redis.html","title":"redis","text":""},{"location":"middleware/redis.html#no-sql-redis","title":"No Sql \u4ee5\u53ca Redis \u7684\u4e00\u4e9b\u7279\u6027","text":"<p>NoSQL\uff08Not Only SQL\uff09 \u662f\u4e00\u7c7b\u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u7edf\u79f0\uff0c\u65e8\u5728\u89e3\u51b3\u4f20\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u5728\u9ad8\u5e76\u53d1\u3001\u5927\u6570\u636e\u91cf\u3001\u7075\u6d3b\u6570\u636e\u6a21\u578b\u7b49\u573a\u666f\u4e0b\u7684\u74f6\u9888\u3002</p> <p>Redis \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5185\u5b58\u578b\u952e\u503c\u6570\u636e\u5e93\uff0c\u5c5e\u4e8e NoSQL \u4e2d\u7684\u952e\u503c\u5b58\u50a8\u7c7b\u578b\u3002</p>"},{"location":"middleware/redis.html#redis","title":"\u5b89\u88c5 redis","text":"<ol> <li> <p>\u53bb redis \u5b98\u7f51\u4e0b\u8f7d redis\uff0c\u9ed8\u8ba4\u5c31\u662f .tar.gz\uff0c\u7136\u540e\u89e3\u538b</p> </li> <li> <p>redis \u9700\u8981 c \u73af\u5883 <pre><code>yum -y install gcc\ngcc --version\n</code></pre></p> </li> <li> <p>\u8fdb\u5165 redis \u76ee\u5f55\uff0c\u7136\u540e\u7f16\u8bd1 redis <pre><code>make \u7f16\u8bd1\nmake install \u5b89\u88c5\n\n# \u5b89\u88c5\u5931\u8d25\nmake disclean \n</code></pre></p> </li> <li> <p>\u9ed8\u8ba4\u5b89\u88c5\u5230\u4e86 usr \u91cc\u9762\uff0c\u4e0d\u9700\u8981\u81ea\u5df1\u914d\u73af\u5883\u53d8\u91cf\u4e86\uff08\u547d\u4ee4\u6240\u5728\u4f4d\u7f6e\uff1a/usr/local/bin\uff09</p> </li> </ol>"},{"location":"middleware/redis.html#redis_1","title":"Redis \u914d\u7f6e\u3001\u542f\u52a8","text":"<pre><code>1\u3001\u5c06\u524d\u53f0\u542f\u52a8\u6539\u4e3a\u540e\u53f0\u542f\u52a8\n309 \u884c\u9644\u8fd1\uff1adaemonize no\n\n2\u3001\u5c06 bind ip \u6ce8\u89e3\u6389\uff0c\u8fd9\u6837\u5176\u4ed6 host \u624d\u80fd\u8fde\u63a5\n87 \u884c\u9644\u8fd1\uff1abind 127.0.0.1 -::1\n3\u3001\u53d6\u6d88\u5bc6\u7801\u4fdd\u62a4\n111 \u884c\u9644\u8fd1\uff1aprotected-mode yes --&gt; no\n</code></pre>"},{"location":"middleware/redis.html#redis_2","title":"Redis \u5e38\u89c1\u6570\u636e\u7c7b\u578b\u548c\u64cd\u4f5c\u547d\u4ee4","text":""},{"location":"middleware/redis.html#1","title":"1. \u5e38\u89c1\u6570\u636e\u7c7b\u578b","text":"<p>redis\u7684\u5b58\u50a8\u65f6 key-value\u5f62\u5f0f\u7684,\u8fd9\u91cc\u7684\u4e94\u5927\u7c7b\u578b\u6307\u7684\u662f value\u7684\u4e94\u79cd\u6570\u636e\u7c7b\u578b!</p> <p>1) String 2. List 3. Set 4. Hash 5. Zset</p>"},{"location":"middleware/redis.html#2-key","title":"2. key \u76f8\u5173\u6307\u4ee4","text":""},{"location":"middleware/redis.html#3-string","title":"3. String \u76f8\u5173\u6307\u4ee4","text":"<p>String\u662fRedis\u6700\u57fa\u672c\u7684\u7c7b\u578b\uff0c\u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u4e0eMemcached\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b\uff0c\u4e00\u4e2akey\u5bf9\u5e94\u4e00\u4e2avalue\u3002</p> <p>String\u7c7b\u578b\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684\u3002\u610f\u5473\u7740Redis\u7684string\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6570\u636e\u3002\u6bd4\u5982jpg\u56fe\u7247\u6216\u8005\u5e8f\u5217\u5316\u7684\u5bf9\u8c61\u3002</p> <p>String\u7c7b\u578b\u662fRedis\u6700\u57fa\u672c\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e00\u4e2aRedis\u4e2d\u5b57\u7b26\u4e32value\u6700\u591a\u53ef\u4ee5\u662f512M</p> <p> </p>"},{"location":"middleware/redis.html#4-list","title":"4. List \u76f8\u5173\u6307\u4ee4","text":"<p>redis \u73b0\u5728\u7684 list \u5e95\u5c42\u7ed3\u6784\u5c31\u662f Quicklist, Quicklist \u5c31\u662f Redis \u7528\u6765\u5b9e\u73b0 List \u7684\u5e95\u5c42\u6570\u636e\u7ed3\u6784 \u2014\u2014 \u8bf4\u767d\u4e86\uff0c\u5b83\u662f\u4e00\u4e2a\u300c\u7528\u53cc\u5411\u94fe\u8868\u4e32\u8d77\u6765\u7684\u591a\u4e2a\u5c0f\u538b\u7f29\u5217\u8868\u300d\u3002</p> <p>\u989d, \u6574\u7406\u7b14\u8bb0\u770b\u5230\u81ea\u5df1\u4ee5\u524d\u521d\u5b66 redis \u8fd8\u6709\u70b9\u611f\u6168, hhh, redis \u5e95\u5c42\u6570\u636e\u7ed3\u6784\u5728\u516b\u80a1\u7b14\u8bb0\u91cc, \u4e4b\u540e\u4e5f\u4f1a\u642c\u5230\u6211\u7684\u535a\u5ba2\u4e0a!</p> <p> </p>"},{"location":"middleware/redis.html#5-set","title":"5. Set \u76f8\u5173\u6307\u4ee4","text":"<p>Redis \u7684 Set \u7c7b\u578b\u662f\u4e00\u4e2a\u4e0d\u5141\u8bb8\u91cd\u590d\u5143\u7d20\u7684\u96c6\u5408\uff0c\u5143\u7d20\u5b58\u50a8\u7684\u987a\u5e8f\u4e0d\u6309\u7167\u63d2\u5165\u7684\u987a\u5e8f\uff0c\u56e0\u6b64\u5c5e\u4e8e\u65e0\u5e8f\u96c6\u5408\u3002\u4e00\u4e2a Set \u6700\u591a\u53ef\u4ee5\u5b58\u50a8 2^32 - 1 \u4e2a\u5143\u7d20\uff0c\u8fd9\u4e0e\u6570\u5b66\u4e2d\u7684\u96c6\u5408\u6982\u5ff5\u7c7b\u4f3c\u3002Set \u7c7b\u578b\u4e0d\u4ec5\u652f\u6301\u589e\u3001\u5220\u3001\u6539\u3001\u67e5\u7b49\u64cd\u4f5c\uff0c\u8fd8\u652f\u6301\u591a\u4e2aSet\u4e4b\u95f4\u7684\u4ea4\u96c6\u3001\u5e76\u96c6\u548c\u5dee\u96c6\u8fd0\u7b97</p> <pre><code>typedef struct dictht { \ndictEntry **table;//\u54c8\u5e0c\u8868\u6570\u7ec4 \nunsigned long size;//\u54c8\u5e0c\u8868\u5927\u5c0f \nunsigned long sizemask;//\u63a9\u7801\u5927\u5c0f\uff0c\u7528\u4e8e\u8ba1\u7b97\u7d22\u5f15\u503c\uff0c\u603b\u662f\u7b49\u4e8esize-1 \nunsigned long used;//\u54c8\u5e0c\u8868\u4e2d\u7684\u5df2\u6709\u8282\u70b9\u6570 \n} dictht;\n</code></pre> <p> </p>"},{"location":"middleware/redis.html#6-zset","title":"6. Zset \u76f8\u5173\u6307\u4ee4","text":"<p>ZSet \u5e95\u5c42\u662f \u8df3\u8868\uff08skiplist\uff09 + \u54c8\u5e0c\u8868\uff08hash table\uff09\uff1a</p> <p> </p>"},{"location":"middleware/redis.html#7-hash","title":"7. Hash \u76f8\u5173\u6307\u4ee4","text":"<p>\u5176\u4ed6\u5e38\u7528\u547d\u4ee4 : </p> <pre><code>hgetall key\nhlen key\nhkeys key\nkvals key\nhincrby key field increment\nhsetnx key field vaul\n</code></pre>"},{"location":"middleware/redis.html#jedis","title":"Jedis","text":"<p>\u5bfc\u5165\u4f9d\u8d56</p> <pre><code>&lt;dependency&gt;  \n    &lt;groupId&gt;redis.clients&lt;/groupId&gt;  \n    &lt;artifactId&gt;jedis&lt;/artifactId&gt;  \n    &lt;version&gt;2.9.0&lt;/version&gt;  \n&lt;/dependency&gt;  \n&lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;  \n&lt;dependency&gt;  \n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;  \n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;  \n    &lt;version&gt;5.8.1&lt;/version&gt;  \n    &lt;scope&gt;test&lt;/scope&gt;  \n&lt;/dependency&gt;\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u83b7\u53d6\u8fde\u63a5\uff0c\u6267\u884c\u65b9\u6cd5\u4e86</p> <pre><code>Jedis jedis = new Jedis(\"192.168.6.101\",6379);\njedis.xxx (\u8fd9\u91cc\u7684\u65b9\u6cd5\u540d\u5c31\u662f redis \u7684\u547d\u4ee4\u540d)\n</code></pre>"},{"location":"middleware/redis.html#spring-data-redis","title":"Spring data redis","text":"<p>1\uff09\u5bfc\u5165\u76f8\u5173\u573a\u666f\u542f\u52a8\u5668\u4ee5\u53ca\u4f9d\u8d56\uff08spring-boot-starter-data-redis\uff0c spring-boot-starter-web\uff1a\u8981\u7684\u662fjson\u4ee5\u53ca\u8fde\u63a5\u6c60\u4f9d\u8d56 commons-pool2\uff09</p> <p><pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.5&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre> 2\uff09\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u4fe1\u606f\uff0c\u6700\u91cd\u8981\u7684\uff1aspring.data.redis.host | port</p> <p><pre><code>spring:  \n  data:  \n    redis:  \n      host: 47.94.86.115  \n      port: 6379  \n#      jedis:  \n#        pool:  \n#          enabled: true  \n#          max-active: 8  \n#          max-idle: 5  \n#          max-wait: 100  \n#      client-type: jedis  \n#  # redis\u8fde\u63a5\u6c60\u914d\u7f6e  \n## \u542b\u4e49\uff1a\u8fd9\u4e2a\u5c5e\u6027\u6307\u5b9a\u662f\u5426\u542f\u7528 Lettuce \u8fde\u63a5\u6c60\u3002  \n#  spring.data.redis.lettuce.pool.enabled=true  \n#  # \u542b\u4e49\uff1a\u8fd9\u4e2a\u5c5e\u6027\u5b9a\u4e49\u4e86\u8fde\u63a5\u6c60\u4e2d\u5141\u8bb8\u7684\u6700\u5927\u6d3b\u52a8\u8fde\u63a5\u6570\u3002  \n#  spring.data.redis.lettuce.pool.max-active=8  \n#  # \u542b\u4e49\uff1a\u8fd9\u4e2a\u5c5e\u6027\u5b9a\u4e49\u4e86\u8fde\u63a5\u6c60\u4e2d\u5141\u8bb8\u7684\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\u6570\u3002  \n#  spring.data.redis.lettuce.pool.max-idle=5  \n#  # \u542b\u4e49\uff1a\u8fd9\u4e2a\u5c5e\u6027\u5b9a\u4e49\u4e86\u5728\u83b7\u53d6\u8fde\u63a5\u65f6\u6700\u957f\u7684\u7b49\u5f85\u65f6\u95f4\uff08\u4ee5\u6beb\u79d2\u4e3a\u5355\u4f4d\uff09\u3002  \n#  spring.data.redis.lettuce.pool.max-wait=100\n</code></pre> \u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u5668\uff08\u624b\u52a8\u6ce8\u518c\u4e00\u4e2aredistemplate)</p> <pre><code>@Configuration  \npublic class RedisTemplateConfig {  \n\n    @Bean  \n    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory connectionFactory){  \n        // \u521b\u5efaRedisTemplate\u5bf9\u8c61  \n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();  \n        // \u8bbe\u7f6e\u8fde\u63a5\u5de5\u5382  \n        template.setConnectionFactory(connectionFactory);  \n        // \u521b\u5efaJSON\u5e8f\u5217\u5316\u5de5\u5177  \n        GenericJackson2JsonRedisSerializer jsonRedisSerializer =  \n                new GenericJackson2JsonRedisSerializer();  \n        // \u8bbe\u7f6eKey\u7684\u5e8f\u5217\u5316  \n        template.setKeySerializer(RedisSerializer.string());  \n        template.setHashKeySerializer(RedisSerializer.string());  \n        // \u8bbe\u7f6eValue\u7684\u5e8f\u5217\u5316  \n        template.setValueSerializer(jsonRedisSerializer);  \n        template.setHashValueSerializer(jsonRedisSerializer);  \n        // \u8fd4\u56de\u4fee\u6539\u7684\u6a21\u677f\u5bf9\u8c61  \n        return template;  \n    }  \n}\n</code></pre>"},{"location":"middleware/redis.html#_1","title":"\u4e8b\u52a1\u548c\u9501","text":""},{"location":"middleware/redis.html#1_1","title":"1. \u6982\u5ff5","text":"<p>\u5728redis\u4e2d\uff0c\u4e8b\u52a1\u5c31\u662f\u4e00\u7cfb\u5217\u547d\u4ee4\u7ec4\u4e2a\u961f\uff08QUEUE\uff09\uff0c\u4f46\u662f\u4e0d\u50cf mysql\uff0credis \u7684\u4e8b\u52a1\u662f\u6ca1\u6709 ACID \u7684\u3002</p> <p>\u800c\u9501\u662f\u56e0\u4e3a\u5728\u4e8b\u52a1\u8fd8\u6ca1\u6267\u884c\u4e4b\u524d\uff0c\u4e5f\u5c31\u662f\u7ec4\u961f\u671f\u95f4\uff0c\u5f53\u524d\u4e8b\u52a1\u8981\u8bbf\u95ee\u7684\u6570\u636e\u53ef\u80fd\u88ab\u5176\u4ed6\u547d\u4ee4\u6240\u4fee\u6539\uff0c\u4ece\u800c\u5bfc\u81f4\u810f\u8bfb\u3002</p>"},{"location":"middleware/redis.html#2","title":"2. \u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// \u4e8b\u52a1\nmulti  \u5f00\u542f\u4e8b\u52a1\nexec \u6267\u884c\u4e8b\u52a1\ndiscard \u53d6\u6d88\u4e8b\u52a1\n\n// \u9501\nwatch key1 key2 ... \n</code></pre>"},{"location":"middleware/redis.html#3","title":"3. \u60b2\u89c2\u9501\u548c\u4e50\u89c2\u9501","text":"<p>\u60b2\u89c2\u9501\u7684\u610f\u601d\u5c31\u662f\u60b2\u89c2\u7684\u8ba4\u4e3a\u4e8b\u52a1\u8981\u8bbf\u95ee\u7684\u6570\u636e\u4f1a\u88ab\u5176\u4ed6\u547d\u4ee4\u6216\u8005\u4e8b\u52a1\u6240\u4fee\u6539\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u7ed9\u6570\u636e\u4e0a\u9501\uff0c\u8ba9\u522b\u4eba\u5728\u6211\u6240\u6267\u884c\u8fc7\u7a0b\u4e2d\u4e0d\u80fd\u4f7f\u7528\u8fd9\u4e2a\u6570\u636e\uff0c\u56e0\u6b64\uff0c\u60b2\u89c2\u9501\u6027\u80fd\u4f1a\u5dee\u70b9\u3002 \u800c\u4e50\u89c2\u9501\u5c31\u662f\u8ba4\u4e3a\u672c\u6b21\u8981\u8bbf\u95ee\u7684\u6570\u636e\u4e0d\u4f1a\u88ab\u5176\u4ed6\u547d\u4ee4\u6216\u8005\u4e8b\u52a1\u6240\u4fee\u6539\uff0c\u5c31\u7b97\u5176\u4ed6\u4e8b\u52a1\u6216\u547d\u4ee4\u8981\u4fee\u6539\uff0c\u4e5f\u8ba9\u4ed6\u4eec\u53bb\u4fee\u6539\uff0c\u6211\u5728\u91cd\u65b0\u5f00\u4e00\u6b21\u4e8b\u52a1\u5c31\u884c\u4e86\u3002 java\u7528\u7684\u662f\u60b2\u89c2\u9501\u673a\u5236\uff0c\u800credis\u662f\u4e50\u89c2\u9501\u673a\u5236\u3002</p>"},{"location":"middleware/redis.html#lua","title":"Lua \u811a\u672c","text":"<p>Lua \u662f\u4e00\u95e8\u8f7b\u91cf\u7ea7\u3001\u53ef\u5d4c\u5165\u7684\u811a\u672c\u8bed\u8a00\uff0c\u8bbe\u8ba1\u76ee\u6807\u662f\u9ad8\u6548\u3001\u7b80\u6d01\u3001\u53ef\u6269\u5c55\uff0c\u5e38\u7528\u4e8e\u6e38\u620f\u5f00\u53d1\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\u548c\u9ad8\u6027\u80fd\u670d\u52a1\u4e2d\uff08\u5982 Redis\uff09\u3002 \u5728 redis \u4e2d\uff0clua\u53ef\u4ee5\u4e00\u6b21\u6267\u884c\u591a\u6761redis\u547d\u4ee4\uff0c\u4ece\u800c\u51cf\u5c11\u4e0eredis\u7684\u8fde\u63a5\u6b21\u6570\uff0c\u63d0\u5347\u6027\u80fd\u3002\u540c\u65f6\uff0c\u8fd9\u4e9b redis \u547d\u4ee4\u662f\u539f\u5b50\u7684\uff0c\u590d\u5408\u7684\u3002\u4e5f\u5c31\u662f\u8981\u4e48\u5168\u90e8\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\u3002</p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <ol> <li>\u7f16\u5199 lua \u811a\u672c\uff0c\u5c06 lua \u811a\u672c\u5b58\u5230 resources \u4e0b</li> <li>\u6211\u4eec\u9700\u8981\u5c06 lua \u811a\u672c\u8f6c\u4e3a resource \u5bf9\u8c61\uff0c\u7136\u540e\u518d\u8f6c\u4e3a RedisScript \u5bf9\u8c61\u5e76\u6ce8\u518c\u5230 ioc \u5bb9\u5668\u4e2d\u3002</li> <li>\u7136\u540e\uff0c\u901a\u8fc7 script.execute() \u65b9\u6cd5\u5c31\u53ef\u4ee5\u8c03\u7528\u8fd9\u4e2a lua \u811a\u672c\u3002</li> </ol> <pre><code>@Bean\npublic RedisScript&lt;Boolean&gt; booleanRedisScript(){\n    //\u52a0\u8f7d\u811a\u672c\u6587\u4ef6\n    Resource resource = new ClassPathResource(\"lua/change.lua\");\n\n    //\u53c2\u65701\uff1a \u52a0\u8f7d\u811a\u672c\u7684\u8d44\u6e90\u5bf9\u8c61 \u53c2\u65702\uff1a \u8fd4\u56de\u503c\u7c7b\u578b\n    RedisScript&lt;Boolean&gt; booleanRedisScript = RedisScript.of(resource, Boolean.class);\n\n    return booleanRedisScript;\n}\n</code></pre>"},{"location":"middleware/redis.html#redis_3","title":"Redis \u7684\u6301\u4e45\u5316\u7b56\u7565","text":""},{"location":"middleware/redis.html#1-rdb","title":"1. RDB","text":"<p>\u5728\u6307\u5b9a\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u96c6\u5feb\u7167\u5199\u5165\u78c1\u76d8\uff0c\u751f\u6210\u4e00\u4e2a dump.rdb \u6587\u4ef6</p> <pre><code>// \u6301\u4e45\u5316\u6587\u4ef6\u540d\u5b57\u914d\u7f6e\ndbfilename dump.rdb \uff08481\u884c\uff09\n\n// dump.rdb \u5b58\u653e\u7684\u4f4d\u7f6e\ndir ./ \uff08\u9ed8\u8ba4\u914d\u7f6e\uff09\n</code></pre> <p>\u89e6\u53d1\u6301\u4e45\u5316\u7684\u65b9\u6cd5\uff1a <pre><code>save  # \u5728\u4e3b\u8fdb\u7a0b\u53bb\u8fdb\u884c\u6301\u4e45\u5316\nbgsave # \u5f02\u6b65 \nshutdown \nflushall\n\n// \u5b98\u65b9\u63d0\u4f9b\u7684\u914d\u7f6e\nsave 900 1 # \u5728900\u79d2\uff0815\u5206\u949f\uff09\u5185\uff0c\u5982\u679c\u81f3\u5c11\u67091\u4e2a\u952e\u53d1\u751f\u6539\u53d8\uff0c\u5219\u6267\u884cRDB\u6301\u4e45\u5316\nsave 300 10 # \u5728300\u79d2\uff085\u5206\u949f\uff09\u5185\uff0c\u5982\u679c\u81f3\u5c11\u670910\u4e2a\u952e\u53d1\u751f\u6539\u53d8\uff0c\u5219\u6267\u884cRDB\u6301\u4e45\u5316\nsave 60 10000 # \u572860\u79d2\u5185\uff0c\u5982\u679c\u81f3\u5c11\u670910,000\u4e2a\u952e\u53d1\u751f\u6539\u53d8\uff0c\u5219\u6267\u884cRDB\u6301\u4e45\u5316\n\u6ce8\u610f: \u5468\u671f\u4e00\u5b9a\u6267\u884c\u5b8c\u6bd5\u624d\u4f1a\u89e6\u53d1\u6301\u4e45\u5316!\u4e0d\u4f1a\u4e2d\u9014\u89e6\u53d1! \u6240\u4ee5rdb\u81ea\u52a8\u5907\u4efd\u53ef\u80fd\u4f1a\u4e22\u5931\u6570\u636e\n</code></pre></p>"},{"location":"middleware/redis.html#2-aof","title":"2. AOF","text":"<p>\u8bb0\u5f55\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684\u6bcf\u4e00\u4e2a\u5199\u547d\u4ee4\uff0c\u4ee5\u534f\u8bae\u683c\u5f0f\u8ffd\u52a0\u5230 appendonly.aof \u6587\u4ef6\u672b\u5c3e\u3002\u91cd\u542f\u65f6\u901a\u8fc7\u6267\u884c\u547d\u4ee4\u6062\u590d\u6570\u636e</p> <pre><code>// \u6301\u4e45\u5316\u7684\u6587\u4ef6\u540d\u914d\u7f6e \nappendfilename \"appendonly.aof\"\n\n// \"appendonly.aof \u5b58\u653e\u7684\u4f4d\u7f6e\ndir ./\n\n// \u5199\u7684\u9891\u7387\nappendfsync always\nappendfsync everysec \u9ed8\u8ba4\u7528\u8fd9\u4e2a\nappendfsync no\n\n// \u662f\u5426\u5f00\u542f\nappendonly no --&gt; yes\n</code></pre> <p>\u91cd\u5199\u538b\u7f29\u673a\u5236\uff1a  1.  aof \u624d\u6709\u91cd\u5199\u673a\u5236  2.  aof \u5b58\u50a8\u5199\u547d\u4ee4\u7684\u6587\u672c\u6587\u4ef6  3.  \u91cd\u5199\u4f1a\u51cf\u5c11 aof \u6587\u4ef6\u7684\u5927\u5c0f\uff0c aof \u91cd\u5199\u4fdd\u8bc1\u5b58\u7684\u662f\u80fd\u591f\u6062\u590d\u6570\u636e\u7684\u6700\u5c0f\u6307\u4ee4\u96c6  4. aof \u53ef\u4ee5\u81ea\u52a8\u89e6\u53d1\u91cd\u5199\uff0c\u4e5f\u53ef\u4ee5\u624b\u52a8\u89e6\u53d1\uff1abgrewriteaof <pre><code>auto-aof-rewrite-percentage : 150% #\u589e\u91cf\u767e\u5206\u6bd4\nauto-aof-rewrite-min-size : 100MB #\u8bbe\u7f6e\u7b2c\u4e00\u6b21\u538b\u7f29\u7684\u57fa\u51c6\u503c\n\u7b2c\u4e00\u6b21: 100+(100*150%) = 250MB -&gt; 80MB\n\u7b2c\u4e8c\u6b21: 80+80*150% = 200MB -&gt; .....\n</code></pre></p> <p>\u9009\u62e9\u5efa\u8bae\uff1a     a.  \u5b98\u7f51\u63a8\u8350\u4e24\u4e2a\u90fd\u5f00\u542f\uff0c\u5f00\u542f\u7684AOF\u4f18\u5148\u751f\u6548     b.  \u975e\u654f\u611f\u6570\u636e\uff0c\u5efa\u8baeRDB     c.  \u5355\u7eaf\u7684\u7f13\u5b58\uff0c\u5efa\u8bae\u90fd\u4e0d\u5f00\u542f     d.  \u654f\u611f\u6570\u636e\uff0c\u5efa\u8bae\u90fd\u5f00\u542f</p>"},{"location":"middleware/redis.html#redis_4","title":"Redis \u4e3b\u4ece","text":"<p>\u4e3b\u4ece\u662f\u6765\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\u7684\uff0c\u4e3b\u8d1f\u8d23\u5199\u5165\u6570\u636e\u5e76\u8d1f\u8d23\u5c06\u6570\u636e\u5199\u5165\u4ece\uff0c\u4ece\u8d1f\u8d23\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u4e14\u63a5\u53d7\u4e3b\u53d1\u6765\u7684\u540c\u6b65\u6570\u636e\u3002</p>"},{"location":"middleware/redis.html#1_2","title":"1. \u4e3b\u4ece\u5b9e\u73b0\u65b9\u6cd5","text":"<p>\u51c6\u5907\u591a\u4efd\u914d\u7f6e\u6587\u4ef6</p> <p><pre><code>include /root/myredis/redis.conf\npidfile /var/run/redis_6379.pid\nport 6379\ndbfilename dump6379.rdb\n</code></pre> \u542f\u52a8\u8fd9\u4e09\u53f0 redis \u670d\u52a1</p> <pre><code>redis-server xxx.conf\n</code></pre> <p>\u6784\u5efa\u4e3b\u4ece\u6a21\u5f0f</p> <pre><code>slave of ip port --&gt; replicaof ip port\ninfo replication\uff08\u67e5\u770b\u89d2\u8272\uff09\n</code></pre>"},{"location":"middleware/redis.html#2_1","title":"2. \u4e3b\u4ece\u5b9e\u73b0\u539f\u7406","text":"<p>a.  \u5168\u91cf\u590d\u5236: \u5c0f\u5f1f\u8fde\u63a5\u5230\u4e3b\u673a\uff0c\u4e3b\u673a\u7b2c\u4e00\u6b21\u4f1a\u5c06\u6240\u6709\u6570\u636e\u90fd\u4f20\u9012\u7ed9\u5c0f\u5f1f\uff01\uff08\u5168\u91cf\uff09 b.  \u589e\u91cf\u590d\u5236\uff1a\u540e\u7eed\u7684\u4e3b\u673a\u6570\u636e\u66f4\u65b0\uff0c\u90fd\u5c5e\u4e8e\u589e\u91cf\u590d\u5236\uff0c\u5f97\u5230\u7684\u65b0\u6570\u636e\u4f1a\u7acb\u5373\u540c\u6b65\u7ed9\u5c0f\u5f1f\uff08\u589e\u5f3a\uff09 c.  \u4e3b\u4ece\u6a21\u5f0f\u901a\u8fc7\u5168\u91cf+\u589e\u91cf\u63d0\u9ad8\u4e86\u6027\u80fd\u7684\u540c\u65f6\uff0c\u4e5f\u80fd\u4fdd\u8bc1\u4efb\u610f\u65f6\u523b\u52a0\u5165\u7684\u5c0f\u5f1f\u90fd\u6709\u4e3b\u673a\u7684\u5168\u90e8\u6570\u636e d.  \u6211\u4eec\u5fc5\u987b\u77e5\u9053\uff0c\u4e3b\u4ece\u6a21\u5f0f\u6570\u636e\u662f\u6709\u5ef6\u8fdf\u6027\u7684\uff01\uff08\u4e3b\u673a-\u300b\u5199\u5165\u6570\u636e-\u300b\u4ece\u673a\u6ca1\u6709\u8bfb\u5230\uff09</p>"},{"location":"middleware/redis.html#3_1","title":"3. \u54e8\u5175\u673a\u5236","text":"<p>\u54e8\u5175\u7684\u5b58\u5728\u5c31\u662f\u5f53\u4e3b\u673a\u51fa\u73b0\u6545\u969c\u65f6\uff0c\u81ea\u52a8\u7684\u9009\u62e9\u4e00\u4e2a\u4ece\u673a\u5f53\u4f5c\u4e3b\u673a\uff0c\u7136\u540e\u8ba9\u5176\u4ed6\u4ece\u673a\u90fd\u6267\u884c replicaof ip host\uff0c\u4ece\u800c\u5b9e\u73b0\u6362\u4e3b\uff0c\u5f53\u66fe\u7ecf\u7684\u4e3b\u673a\u56de\u6765\u540e\uff0c\u4e5f\u4f1a\u53d8\u6210\u5f53\u524d\u4e3b\u673a\u7684\u4ece\u673a\u3002</p> <p>\u7f16\u5199\u54e8\u5175\u914d\u7f6e</p> <pre><code>sentinel monitor mymaster 127.0.0.1 6379 1\n</code></pre> <p>\u542f\u52a8\u54e8\u5175\u6a21\u5f0f</p> <pre><code>redis-sentinel sentinel.conf\n</code></pre>"},{"location":"middleware/redis.html#redis_5","title":"redis \u96c6\u7fa4","text":"<p>Redis \u96c6\u7fa4\uff08Redis Cluster\uff09\u662f Redis \u5b98\u65b9\u63d0\u4f9b\u7684\u5206\u5e03\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u7528\u4e8e\u5b9e\u73b0\u6570\u636e\u5206\u7247\uff08sharding\uff09\u3001\u9ad8\u53ef\u7528\u548c\u6c34\u5e73\u6269\u5c55\u3002</p> <p>\u6838\u5fc3\u7279\u6027\uff1a</p> <ul> <li>\u81ea\u52a8\u5206\u7247\uff1a\u5c06\u6570\u636e\u5206\u6563\u5230\u591a\u4e2a\u8282\u70b9\uff08\u6700\u591a 16384 \u4e2a\u54c8\u5e0c\u69fd\uff09</li> <li>\u9ad8\u53ef\u7528\uff1a\u6bcf\u4e2a\u4e3b\u8282\u70b9\u53ef\u914d\u7f6e\u4ece\u8282\u70b9\uff0c\u4e3b\u8282\u70b9\u6545\u969c\u65f6\u81ea\u52a8\u6545\u969c\u8f6c\u79fb</li> <li>\u53bb\u4e2d\u5fc3\u5316\uff1a\u65e0\u4e2d\u5fc3\u4ee3\u7406\uff0c\u5ba2\u6237\u7aef\u76f4\u8fde\u4efb\u610f\u8282\u70b9\uff0c\u96c6\u7fa4\u5185\u90e8\u81ea\u52a8\u91cd\u5b9a\u5411</li> <li>\u5199\u80fd\u529b\u6269\u5c55\uff1a\u591a\u4e3b\u67b6\u6784\uff0c\u7a81\u7834\u5355\u673a\u5199\u6027\u80fd\u74f6\u9888</li> </ul> <p>\u6838\u5fc3\u539f\u7406\uff1a - Redis \u96c6\u7fa4\u5c06\u6574\u4e2a\u952e\u7a7a\u95f4\u5212\u5206\u4e3a 16384 \u4e2a\u54c8\u5e0c\u69fd\uff08hash slots\uff09 - \u6bcf\u4e2a key \u901a\u8fc7 <code>CRC16(key) % 16384</code> \u8ba1\u7b97\u51fa\u6240\u5c5e\u69fd\u4f4d - \u6bcf\u4e2a\u4e3b\u8282\u70b9\u8d1f\u8d23\u4e00\u90e8\u5206\u69fd\u4f4d\uff08\u4f8b\u5982 3 \u4e3b\u8282\u70b9\uff1a0-5460, 5461-10922, 10923-16383\uff09</p> <p>\u6bcf\u4e2a\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6</p> <pre><code>include /root/myredis/redis.conf\nport 6379\npidfile \"/var/run/redis_6379.pid\"\ndbfilename \"dump6379.rdb\"\ncluster-enabled yes\ncluster-config-file nodes-6379.conf\ncluster-node-timeout 15000\n</code></pre> <p>\u5c06\u591a\u4e2a redis \u7ec4\u6210\u96c6\u7fa4</p> <pre><code># \u6bcf\u4e2a\u670d\u52a1\u90fd\u8981\u6e05\u7a7a\nredis-cli --cluster create --cluster-replicas 1 172.17.14.36:6379 172.17.14.36:6380 172.17.14.36:6381 172.17.14.36:6382 172.17.14.36:6383 172.17.14.36:6384\n</code></pre> <p>\u8fde\u63a5\u96c6\u7fa4</p> <pre><code># \u767b\u5f55\u5fc5\u987b\u662f-c\u94fe\u63a5\u7684\u96c6\u7fa4\u4e0d\u662f\u6bcf\u4e2a\u8282\u70b9\nredis-cli -c -p 6383\n\n# \u67e5\u770b\u96c6\u7fa4\u4e2d\u8282\u70b9\ncluster nodes \u67e5\u770b\u8282\u70b9\u5173\u7cfb\n\n# redis\u96c6\u7fa4\u7684\u6570\u636e\u5b58\u50a8\uff08\u96c6\u7fa4\uff0c\u771f\u6b63\u7684\u80fd\u89e3\u51b3\u6570\u636e\u7684\u5e76\u53d1\u5199\u95ee\u9898\uff01\uff09\n\u5b58\u50a8\u8fc7\u7a0b\uff1a key =&gt; CRC16(key) =\u300b \u6574\u6570 =\u300b %16384 =&gt; index =&gt; \u5b58\u50a8\u5230\u5bf9\u5e94\u7684slot\n\u8282\u70b9 A \u8d1f\u8d23\u5904\u7406 0 \u53f7\u81f3 5460 \u53f7\u63d2\u69fd\u3002\n\u8282\u70b9 B \u8d1f\u8d23\u5904\u7406 5461 \u53f7\u81f3 10922 \u53f7\u63d2\u69fd\u3002\n\u8282\u70b9 C \u8d1f\u8d23\u5904\u7406 10923 \u53f7\u81f3 16383 \u53f7\u63d2\u69fd\u3002\n\nset name xx -&gt; slot -&gt; redirect -&gt; master\u8282\u70b9 -\u300b \u5b58\u50a8\u6570\u636e\n\n#\u4e00\u6b21\u8bbe\u7f6e\u591a\u5bf9\u952e\u503c\u5bf9\nmset key{1} key{1} ....{1}slot\u503c\u8fdb\u884c\u5b58\u50a8\n</code></pre> <p>\u8ba1\u7b97 key \u7684slot</p> <pre><code>- cluster keyslot key \u8ba1\u7b97key\u5e94\u8be5\u4fdd\u5b58\u5728\u90a3\u4e2a\u63d2\u69fd\n- cluster countkeysinslot slot\u7684\u503c \u8ba1\u7b97\u67d0\u4e2a\u63d2\u69fd\u4e2d\u4fdd\u5b58\u7684key\u7684\u6570\u91cf\n- CLUSTER GETKEYSINSLOT \\&lt;slot&gt;\\&lt;count&gt; \u8fd4\u56de count \u4e2a slot \u69fd\u4e2d\u7684\u952e\u3002\n</code></pre> <p>\u96c6\u7fa4\u6545\u969c\u6062\u590d</p> <pre><code>1. \u5355\u4e2a\u5206\u533a\u7684master\u6302\u4e86\n\u96c6\u7fa4\u5185\u90e8\u81ea\u5e26\u54e8\u5175\n\u4e3b\u8282\u70b9\u6302\u4e86\u4ee5\u540e\uff0c\u81ea\u52a8\u9009\u4e3e\u4e1b\u8282\u70b9\u5f53\u9009\u4e3b\u8282\u70b9\n\n2. \u5355\u4e2a\u5206\u533a\u90fd\u6302\u4e86\n- redis.conf\u4e2dcluster-require-full-coverage \u4e3ayes \u90a3\u4e48\uff0c\u6574\u4e2a\u96c6\u7fa4\u90fd\u6302\u6389\n- redis.conf\u4e2dcluster-require-full-coverage \u4e3ano \u90a3\u4e48\uff0c\u53ea\u6709\u8be5\u63d2\u69fd\u6570\u636e\u5168\u90fd\u4e0d\u80fd\u4f7f\u7528\u3002\n</code></pre>"},{"location":"tools/docker.html","title":"docker","text":""},{"location":"tools/docker.html#docker","title":"\u4ec0\u4e48\u662fdocker","text":"<p>Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5bb9\u5668\u5316\u5e73\u53f0\uff0c\u7528\u4e8e\u5c06\u5e94\u7528\u53ca\u5176\u4f9d\u8d56\u6253\u5305\u5230\u8f7b\u91cf\u3001\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\u3002</p>"},{"location":"tools/docker.html#docker_1","title":"docker \u67b6\u6784","text":"<ul> <li>\u955c\u50cf\uff08Image\uff09\uff1a\u53ea\u8bfb\u6a21\u677f\uff0c\u7528\u4e8e\u521b\u5efa\u5bb9\u5668\u3002</li> <li>\u5bb9\u5668\uff08Container\uff09\uff1a\u955c\u50cf\u7684\u8fd0\u884c\u5b9e\u4f8b\u3002</li> <li>Docker Hub\uff1a\u5b98\u65b9\u955c\u50cf\u4ed3\u5e93\uff0c\u53ef\u62c9\u53d6/\u63a8\u9001\u955c\u50cf\u3002</li> </ul>"},{"location":"tools/docker.html#docker_2","title":"\u5b89\u88c5docker","text":"<p>\u5148\u53bb\u5b89\u88c5c,c++\u73af\u5883</p> <pre><code>yum install gcc\nyum install gcc-c++\n</code></pre> <p>\u518d\u53bb\u5b89\u88c5\u4e00\u4e9bdocker\u7684\u4f9d\u8d56</p> <pre><code>yum install -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n</code></pre> <p>\u6dfb\u52a0\u955c\u50cf\u6e90</p> <pre><code># 12\u67081\u65e5\uff0c\u53d1\u73b0\u8fd9\u4e2a\u6e90\u6709\u95ee\u9898\nsudo yum-config-manager \\\n    --add-repo \\\n    https://download.docker.com/linux/centos/docker-ce.repo\n\n# \u6e05\u534e\u6e90\nsed -i 's+https://download.docker.com+https://mirrors.tuna.tsinghua.edu.cn/docker-ce+' /etc/yum.repos.d/docker-ce.repo\n</code></pre> <p>\u5b89\u88c5docker</p> <pre><code># \u4e00\u4e2a\u4e00\u4e2a\u5b89\u88c5\uff0c\u4e0d\u7136\u6709\u95ee\u9898\nyum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n# \u4e00\u952e\u5b89\u88c5\ncurl -fsSL https://github.com/tech-shrimp/docker_installer/releases/download/latest/linux.sh| bash -s docker --mirror Aliyun\n</code></pre> <p>\u5220\u9664 docker</p> <pre><code>yum remove docker \\  \n                  docker-client \\  \n                  docker-client-latest \\  \n                  docker-common \\  \n                  docker-latest \\  \n                  docker-latest-logrotate \\  \n                  docker-logrotate \\  \n                  docker-engine\n</code></pre>"},{"location":"tools/docker.html#docker_3","title":"docker\u7684\u914d\u7f6e","text":"<p>\u914d\u7f6e\u4ed3\u5e93</p> <pre><code>sudo mkdir -p /etc/docker \nsudo tee /etc/docker/daemon.json &lt;&lt;-'EOF' { \"registry-mirrors\": [\"https://kf7vf3vo.mirror.aliyuncs.com\"] } EOF \nsudo systemctl daemon-reload \nsudo systemctl restart docker\n</code></pre> <p>\u5b8c\u6574\u914d\u7f6e\u5982\u4e0b\uff08\u73b0\u5728\u963f\u91cc\u7684\u4ed3\u5e93\u4e0d\u5bf9\u5916\u5f00\u653e\u4e86\uff0c\u53ea\u80fd\u963f\u91cc\u4e91\u7684\u4e91\u670d\u52a1\u5668\u624d\u80fd\u7528\uff09<code>ps: \u5b9e\u5728\u6ca1\u6e90\u7528\u6211\u610f\u601d\u6302\u7740\u68af\u5b50\u4e0b\u5230\u672c\u5730, \u7136\u540e\u4ece\u672c\u673a\u4f20\u5230 docker</code></p> <pre><code>\u5751\uff1a\u6700\u540e\u4e0d\u8981\u6709\u9017\u53f7\uff01\uff01\n {\n  \"registry-mirrors\": [\n        \"https://docker.m.daocloud.io\",\n        \"https://docker.1panel.live\",\n        \"https://docker.xuanyuan.me\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://registry.dockermirror.com\",\n        \"https://hub-mirror.c.163.com\"\n        ]\n}\n\n// \u817e\u8baf\u4e91\u670d\u52a1\u5668\u7684\u914d\u7f6e\n {\n  \"registry-mirrors\": [\n        \"https://docker.m.daocloud.io\",\n        \"https://docker.1panel.live\",\n        \"https://docker.xuanyuan.me\",\n        \"https://docker.mirrors.ustc.edu.cn\",\n        \"https://registry.dockermirror.com\",\n        \"https://hub-mirror.c.163.com\",\n        \"https://mirror.ccs.tencentyun.com\"\n        ]\n}\n</code></pre> <p>\u914d\u7f6e\u5141\u8bb8\u8fdc\u7a0b\u8fde\u63a5\uff08\u4e3a\u4e86\u540e\u7eed\u628aspringboot\u9879\u76ee\u6253\u5305\u6210\u955c\u50cf\uff0c\u4e0a\u4f20\u5230docker\uff09</p> <ul> <li><code>-H tcp://0.0.0.0:2375</code>\uff1a\u5f00\u542f TCP \u7aef\u53e3\u76d1\u542c\uff0c\u5141\u8bb8\u6240\u6709 IP \u8bbf\u95ee\uff08\u751f\u4ea7\u73af\u5883\u5efa\u8bae\u9650\u5236 IP\uff09\u3002</li> <li><code>-H fd://</code>\uff1a\u4fdd\u7559\u9ed8\u8ba4 Unix socket \u65b9\u5f0f\uff08\u672c\u5730\u901a\u4fe1\u4ecd\u53ef\u7528\uff09\u3002</li> <li><code>2375</code> \u662f Docker \u9ed8\u8ba4\u7684\u8fdc\u7a0b API \u7aef\u53e3\u3002 <pre><code>// 1. \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\nvim /lib/systemd/system/docker.service\n\n// 2. \u4fee\u6539\u914d\u7f6e\nExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock\nExecStart=/usr/bin/dockerd -H tcp://0.0.0.0:2375 -H fd:// --containerd=/run/containerd/containerd.sock\n\n// 3. \u91cd\u542f\u670d\u52a1\nsystemctl daemon-reload        # \u91cd\u8f7d systemd \u914d\u7f6e\nsystemctl restart docker       # \u91cd\u542f Docker \u670d\u52a1\n</code></pre></li> </ul>"},{"location":"tools/docker.html#docker_4","title":"docker\u5e38\u7528\u547d\u4ee4","text":"<p>\u955c\u50cf\u662f\u7531\u5f88\u591a\u5c42\u7ec4\u6210\u7684\uff0c\u8fd9\u6837\u7684\u597d\u5904\u662f\u5c42\u662f\u516c\u7528\u7684\uff0c\u8fd9\u6837\u4e0b\u8f7d\u5176\u4ed6\u955c\u50cf\u65f6\u53ef\u4ee5\u590d\u7528\u4e4b\u524d\u4e0b\u8f7d\u8fc7\u7684\u5c42\u3002</p>"},{"location":"tools/docker.html#1","title":"1. \u955c\u50cf\u76f8\u5173","text":"<pre><code>//  \u67e5\u770b\u4e2d\u592e\u4ed3\u5e93\ndocker search \u955c\u50cf\u5173\u952e\u5b57:\u7248\u672c  \n\n// \u67e5\u770b\u672c\u5730\u955c\u50cf\ndocker images -a \n\n// \u62c9\u53d6\u955c\u50cf\ndocker pull \u955c\u50cf\u540d\u79f0:\u7248\u672c\u53f7 \n\n//\u5220\u9664\u955c\u50cf\ndocker rmi --force | -f id/\u955c\u50cf\u540d\u79f0:\u7248\u672c\u53f7 \n\n// \u5220\u9664\u6240\u6709\nddocker rmi -f $(docker images -aq)\n\n// \u4ece\u672c\u5730\u52a0\u8f7d\u955c\u50cf\uff08\u4e5f\u5c31\u662f\u628atar --&gt; \u955c\u50cf\uff09\ndocker load -i xxx.tar  \n</code></pre>"},{"location":"tools/docker.html#2","title":"2. \u5bb9\u5668\u76f8\u5173","text":"<pre><code>// \u67e5\u770b\u5bb9\u5668\ndocker ps -aq\n-a : \u6240\u6709  \u4e0d\u52a0-a\u5c31\u662f\u53ea\u770b\u6b63\u5728\u8fd0\u884c\u65f6\u7684\n-q : \u67e5id\n\n// \u521b\u5efa\u5bb9\u5668\n-i\uff1a\u8868\u793a\u8fd0\u884c\u5bb9\u5668\n-t\uff1a\u8868\u793a\u5bb9\u5668\u542f\u52a8\u540e\u4f1a\u8fdb\u5165\u5176\u547d\u4ee4\u884c\u3002\u52a0\u5165\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\uff0c\u5bb9\u5668\u521b\u5efa\u5c31\u80fd\u767b\u5f55\u8fdb\u53bb\u3002\u5373\u5206\u914d\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u3002\n--name :\u4e3a\u521b\u5efa\u7684\u5bb9\u5668\u547d\u540d\u3002\n-v\uff1a\u8868\u793a\u76ee\u5f55\u6620\u5c04\u5173\u7cfb\uff08\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u76ee\u5f55\uff0c\u540e\u8005\u662f\u6620\u5c04\u5230\u5bbf\u4e3b\u673a\u4e0a\u7684\u76ee\u5f55\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\uff0dv\u505a\u591a\u4e2a\u76ee\u5f55\u6216\u6587\u4ef6\u6620\u5c04\u3002\u6ce8\u610f\uff1a\u6700\u597d\u505a\u76ee\u5f55\u6620\u5c04\uff0c\u5728\u5bbf\u4e3b\u673a\u4e0a\u505a\u4fee\u6539\uff0c\u7136\u540e\u5171\u4eab\u5230\u5bb9\u5668\u4e0a\u3002\n-d\uff1a\u5728run\u540e\u9762\u52a0\u4e0a-d\u53c2\u6570,\u5219\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b88\u62a4\u5f0f\u5bb9\u5668\u5728\u540e\u53f0\u8fd0\u884c\uff08\u8fd9\u6837\u521b\u5efa\u5bb9\u5668\u540e\u4e0d\u4f1a\u81ea\u52a8\u767b\u5f55\u5bb9\u5668\uff0c\u5982\u679c\u53ea\u52a0-i -t\u4e24\u4e2a\u53c2\u6570\uff0c\u521b\u5efa\u540e\u5c31\u4f1a\u81ea\u52a8\u8fdb\u53bb\u5bb9\u5668\uff09\u3002\n-p\uff1a\u8868\u793a\u7aef\u53e3\u6620\u5c04\uff0c\u524d\u8005\u662f\u5bbf\u4e3b\u673a\u7aef\u53e3\uff0c\u540e\u8005\u662f\u5bb9\u5668\u5185\u7684\u6620\u5c04\u7aef\u53e3\u3002\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a-p\u505a\u591a\u4e2a\u7aef\u53e3\u6620\u5c04\n\n\n\u4ea4\u4e92\u578b\u5bb9\u5668\uff1a\u5177\u6709\u548c\u7528\u6237\u4ea4\u4e92\u7684\u8f93\u5165\u548c\u8f93\u51fa\u7ec8\u7aef\uff0c\u5bb9\u5668\u521b\u5efa\u540e\u81ea\u52a8\u8fdb\u5165\u5bb9\u5668\uff0c\u9996\u6b21\u9000\u51faexit\u5bb9\u5668\u540e\uff0c\u5bb9\u5668\u81ea\u52a8\u5173\u95ed\u3002\n\u5bb9\u5668\u542f\u52a8\u4e86\uff0c\u4f46\u5bb9\u5668\u91cc\u9762\u7684\u7a0b\u5e8f\u6ca1\u81ea\u5df1\u542f\u52a8\n// \u521b\u5efa\u5bb9\u5668\u5e76\u8fdb\u5165\u5b83\u3001\u540c\u65f6\u7528\u7ec8\u7aef\u4e8e\u5b83\u4ea4\u4e92\ndocker run --name \u5bb9\u5668\u540d \u955c\u50cf\u540d:\u7248\u672c\u53f7\neg: docker run -it -p 8888:8080 --name tomcat tomcat /bin/bash\n\n// \u8fdb\u5165\u4ea4\u4e92\u5f0f\u5bb9\u5668\ndocker exec -it \u5bb9\u5668\u540d /bin/bash\n\n// \u521b\u5efa\u5b88\u62a4\u578b\u5bb9\u5668\n\u5b88\u62a4\u578b\u5bb9\u5668\uff1a\u6ca1\u6709\u548c\u7528\u6237\u4ea4\u4e92\u7ec8\u7aef\uff0c\u9700\u8981\u4f7f\u7528docker exec\u8fdb\u5165\u5bb9\u5668\uff0c\u9000\u51fa\u540e\uff0c\u5bb9\u5668\u4e0d\u4f1a\u5173\u95ed\u3002\ndocker run -id --name -p xxxx:xxxx \u955c\u50cf\u540d\uff1a\u7248\u672c\u53f7\n\n\n// \u8fd0\u884c\u5bb9\u5668\ndocker start xxx\n\n// \u505c\u6b62\u5bb9\u5668\ndocker stop xxx\n\n// \u91cd\u542f\u5bb9\u5668\ndocker restart xxx\n\n// \u5220\u9664\u5bb9\u5668     \ndocker rm xxx\n\n// \u5220\u9664\u6240\u6709\u5bb9\u5668\ndocker rm $(docker ps -aq)\n\n// \u8fdb\u5165\u5bb9\u5668\ndocker exec -it xxx /bin/bash \n\n// \u4fee\u6539\u5bb9\u5668\u7684\u4e00\u4e9b\u5c5e\u6027\ndocker update \u5bb9\u5668\u540d \u53c2\u6570 \u53c2\u6570\u503c\neg: docker update xxx --restart alaways\n// \u9000\u51fa\u5bb9\u5668         \nexit\n</code></pre>"},{"location":"tools/docker.html#3","title":"3. \u5176\u4ed6\u547d\u4ee4","text":"<p>\u65e5\u5fd7\u76f8\u5173</p> <pre><code>// \u67e5\u770b\u5bb9\u5668\u5185\u8fdb\u7a0b\u7684\u65e5\u5fd7\ndocker logs -f \u5bb9\u5668\u540d / id\n\n// \u67e5\u770b\u5bb9\u5668\u8be6\u60c5\u4fe1\u606f\ndocker inspect \u5bb9\u5668\u540d / id\n</code></pre> <p>\u5bbf\u4e3b\u673a\u4e0edocker\u5bb9\u5668\u7684\u6587\u4ef6\u4f20\u9012</p> <pre><code>// \u5bbf\u4e3b\u673a\u7684\u6587\u4ef6\u4e0e\u5bb9\u5668\u8fdb\u884c\u4ea4\u4e92\ndocker cp \u5bbf\u4e3b\u673a\u7684\u6587\u4ef6\u8def\u5f84 \u5bb9\u5668\u540d:\u8981\u62f7\u8d1d\u5230\u8be5\u5bb9\u5668\u7684\u8def\u5f84\n\ndocker \u5bb9\u5668\u540d:\u8981\u62f7\u8d1d\u5230\u8be5\u5bb9\u5668\u7684\u8def\u5f84 cp \u5bbf\u4e3b\u673a\u7684\u6587\u4ef6\u8def\u5f84\n</code></pre> <p>\u5907\u4efd\u4e0e\u8fc1\u79fb</p> <p> </p> <pre><code>// 1. \u5148\u901a\u8fc7\u5bb9\u5668\u53bb\u521b\u5efa\u4e00\u4e2a\u955c\u50cf\ndocker commit \u5bb9\u5668\u540d/id \u955c\u50cf\u540d\neg:docker commit redis01 myredis_image\n// 2. \u628a\u955c\u50cf\u5f52\u7eb3\u6210tar\u5305\ndocker save -o tar\u5305\u7684\u6587\u4ef6\u540d \u955c\u50cf\u540d\u79f0/id\neg:docker save -o ./images/redis_image.tar myredis_image\n\n// 3. \u628atar\u5305\u91cd\u5199\u52a0\u8f7d\u4e3a\u955c\u50cf\ndocker load -i \u955c\u50cftar\u6587\u4ef6\u540d\u79f0\neg: docker load -i /opt/images/\n</code></pre>"},{"location":"tools/docker.html#docker_5","title":"docker \u6570\u636e\u5377","text":""},{"location":"tools/docker.html#1_1","title":"1. \u6982\u5ff5","text":"<p>Docker \u6570\u636e\u5377\uff08Volumes\uff09 \u662f\u5bbf\u4e3b\u673a\uff08Host\uff09\u4e0e\u5bb9\u5668\uff08Container\uff09\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u5171\u4eab\u548c\u6301\u4e45\u5316\u7684\u7279\u6b8a\u76ee\u5f55\u3002</p>"},{"location":"tools/docker.html#2_1","title":"2. \u6570\u636e\u5377\u76f8\u5173\u547d\u4ee4","text":"<p>\u67e5\u770b\u6570\u636e\u5377</p> <pre><code>docker volume ls\ndocker volume inspect \u6570\u636e\u5377\u540d\u79f0\n</code></pre> <p>\u521b\u5efa\u6570\u636e\u5377</p> <pre><code>docker volume create \u6570\u636e\u5377\u540d\u79f0\n</code></pre> <p>\u5220\u9664\u6570\u636e\u5377</p> <pre><code>docker volume rm \u6570\u636e\u5377\u540d\u79f0\n</code></pre> <p>\u6570\u636e\u5377\u7684\u6302\u8f7d\uff08\u4e5f\u5c31\u662f\u548c\u54ea\u4e2a\u5bb9\u5668\u7ed1\u5b9a\uff09</p> <pre><code> docker run -id -p xxx: xxx --name xxx -v \u6570\u636e\u5377\u540d\u5b57:/data redis:7.0.15\n \u89e3\u91ca\uff1a\u6570\u636e\u5377\u540d\u5b57:/data\n /data \u662f\u5bb9\u5668\u5185\u90e8\u7684\u6570\u636e\n\n \u6ce8\uff1a\u5377\u540d\u524d\u9762\u4e0d\u80fd\u6709 / \uff0c\u5982\u679c\u6709/\uff0c\u5c31\u662f\u76ee\u5f55\u6302\u8f7d\uff0c\u8fd9\u6837\u7684\u6302\u8f7d\u65b9\u5f0f\u90fd\u4e0d\u9700\u8981\u521b\u5efa\u5377\u4e86\n\nDocker\u6302\u8f7d\u4e3b\u673a\u76ee\u5f55Docker\u8bbf\u95ee\u51fa\u73b0cannot open directory .: Permission denied\n\u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u6302\u8f7d\u76ee\u5f55\u540e\u591a\u52a0\u4e00\u4e2a--privileged=true\u53c2\u6570\u5373\u53ef\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1\u3001\u5982\u679c\u6570\u636e\u5377\u6ca1\u6709\u63d0\u524d\u521b\u5efa\u597d\uff0c\u90a3\u4e48\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u521b\u5efa\u5bf9\u5e94\u7684\u6570\u636e\u5377 2\u3001\u6570\u636e\u5377\u6302\u8f7d\u7684\u65f6\u5019\u6570\u636e\u5377\u540d\u79f0\u524d\u9762\u6ca1\u6709/* 3\u3001\u5bb9\u5668\u76ee\u5f55\u4e0d\u5b58\u5728\u4f1a\u81ea\u52a8\u521b\u5efa 4\u3001\u6570\u636e\u5377\u76ee\u5f55\u5982\u679c\u4e0d\u4e3a\u7a7a\uff0c\u6b64\u65f6\u4f1a\u4f7f\u7528\u6570\u636e\u5377\u76ee\u5f55\u5185\u5bb9\u8986\u76d6\u5bb9\u5668\u76ee\u5f55\u5185\u5bb9 5\u3001\u6570\u636e\u5377\u76ee\u5f55\u5982\u679c\u4e3a\u7a7a\uff0c\u5bb9\u5668\u76ee\u5f55\u4e0d\u4e3a\u7a7a\uff0c\u6b64\u65f6\u5c31\u4f1a\u4f7f\u7528\u5bb9\u5668\u76ee\u5f55\u5185\u5bb9\u8986\u76d6\u6570\u636e\u5377\u76ee\u5f55</p> <p>\u76ee\u5f55\u6302\u8f7d</p> <pre><code>docker run -d --name=redis02 -p 6380:6379 -v /redis-data:/data redis:7.0.10\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1\u3001\u5982\u679c\u5bbf\u4e3b\u673a\u76ee\u5f55\u6ca1\u6709\u63d0\u524d\u521b\u5efa\u597d\uff0c\u90a3\u4e48\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u521b\u5efa\u5bf9\u5e94\u7684\u5bbf\u4e3b\u673a\u76ee\u5f55 2\u3001\u5bbf\u4e3b\u673a\u76ee\u5f55\u6302\u8f7d\u7684\u65f6\u5019\u5bbf\u4e3b\u673a\u76ee\u5f55\u540d\u79f0\u524d\u9762\u6709/ 3\u3001\u5bb9\u5668\u76ee\u5f55\u4e0d\u5b58\u5728\u4f1a\u81ea\u52a8\u521b\u5efa 4\u3001\u5bbf\u4e3b\u673a\u76ee\u5f55\u5982\u679c\u4e0d\u4e3a\u7a7a\uff0c\u6b64\u65f6\u4f1a\u4f7f\u7528\u5bbf\u4e3b\u673a\u76ee\u5f55\u5185\u5bb9\u8986\u76d6\u5bb9\u5668\u76ee\u5f55\u5185\u5bb9 5\u3001\u5bbf\u4e3b\u673a\u76ee\u5f55\u5982\u679c\u4e3a\u7a7a\uff0c\u5bb9\u5668\u76ee\u5f55\u4e0d\u4e3a\u7a7a\uff0c\u6b64\u65f6\u5c31\u4f1a\u5c06\u5bb9\u5668\u76ee\u5f55\u5185\u5bb9\u6e05\u7a7a\u6389 \u6ce8\u610f!!!!!</p>"},{"location":"tools/docker.html#_1","title":"\u9879\u76ee\u90e8\u7f72","text":""},{"location":"tools/docker.html#1-dockerfile","title":"1. dockerfile","text":"<p>Dockerfile \u662f\u4e00\u4e2a\u6587\u672c\u6587\u4ef6\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u6307\u4ee4\uff08instructions\uff09\uff0c\u7528\u4e8e\u81ea\u52a8\u6784\u5efa Docker \u955c\u50cf\u3002Docker \u5f15\u64ce\u4f1a\u6309\u987a\u5e8f\u6267\u884c\u8fd9\u4e9b\u6307\u4ee4\uff0c\u6700\u7ec8\u751f\u6210\u4e00\u4e2a\u53ef\u8fd0\u884c\u7684\u955c\u50cf\u3002</p> <p>\uff081\uff09FROM \u2014\u2014 \u6307\u5b9a\u57fa\u7840\u955c\u50cf</p> <ul> <li>\u4f5c\u7528\uff1a\u5b9a\u4e49\u6784\u5efa\u65b0\u955c\u50cf\u6240\u57fa\u4e8e\u7684\u7236\u955c\u50cf\uff08\u57fa\u7840\u955c\u50cf\uff09\u3002</li> <li>\u6240\u6709 Dockerfile \u5fc5\u987b\u4ee5 FROM \u5f00\u5934\uff08\u6ce8\u91ca\u548c\u7a7a\u884c\u9664\u5916\uff09\u3002</li> <li>centos:7 \u8868\u793a\u4f7f\u7528\u5b98\u65b9\u4ed3\u5e93\u4e2d\u7684 CentOS 7 \u955c\u50cf\u4f5c\u4e3a\u8d77\u70b9\u3002</li> <li>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5c42\uff0c\u4e5f\u53ef\u4ee5\u7528 scratch`\uff08\u7a7a\u955c\u50cf\uff09\uff0c\u4f46\u4e00\u822c\u7528\u4e8e\u6781\u7b80\u573a\u666f\u3002</li> </ul> <pre><code>FROM centos:7\n</code></pre> <p>\uff082\uff09<code>MAINTAINER</code>\uff08\u5df2\u5f03\u7528\uff0c\u5efa\u8bae\u7528 <code>LABEL</code>\uff09</p> <pre><code>LABEL maintainer=\"atguigu@example.com\"\n</code></pre> <p>\uff083\uff09<code>RUN</code> \u2014\u2014 \u5728\u955c\u50cf\u4e2d\u6267\u884c\u547d\u4ee4</p> <ul> <li>\u4f5c\u7528\uff1a\u5728\u6784\u5efa\u8fc7\u7a0b\u4e2d\u521b\u5efa\u65b0\u7684\u955c\u50cf\u5c42\uff0c\u5e76\u6267\u884c shell \u547d\u4ee4\u3002</li> <li>\u6bcf\u4e2a <code>RUN</code> \u4f1a\u751f\u6210\u4e00\u5c42\uff08layer\uff09\uff0c\u5efa\u8bae\u5408\u5e76\u591a\u4e2a\u547d\u4ee4\u4ee5\u51cf\u5c11\u5c42\u6570\uff08\u7528 <code>&amp;&amp;</code> \u8fde\u63a5\uff09\uff1a <pre><code>RUN mkdir -p /usr/local/java &amp;&amp; yum update -y\n</code></pre></li> </ul> <p>\uff084\uff09ADD \u2014\u2014  \u590d\u5236\u6587\u4ef6/\u89e3\u538b/\u4e0b\u8f7d</p> <ul> <li>\u5c06\u672c\u5730\u6587\u4ef6\uff08\u5982 <code>.tar.gz</code>\uff09\u590d\u5236\u5230\u955c\u50cf\u4e2d\u3002</li> <li>\u81ea\u52a8\u89e3\u538b <code>.tar</code>, <code>.tar.gz</code>, <code>.zip</code> \u7b49\u538b\u7f29\u5305\uff08\u4ec5\u9650\u672c\u5730\u8def\u5f84\uff09\u3002</li> <li>\u4e5f\u652f\u6301\u4ece URL \u4e0b\u8f7d\u6587\u4ef6\uff08\u4f46\u4e0d\u63a8\u8350\uff0c\u5efa\u8bae\u7528 <code>curl</code> + <code>RUN</code> \u66f4\u53ef\u63a7\uff09\u3002</li> </ul> <pre><code>ADD jdk-17_linux-x64_bin.tar.gz /usr/local/java/\n</code></pre> <p>\uff085\uff09 ENV \u2014\u2014 \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf</p> <p>\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u540e\u7eed\u7684 <code>RUN</code>\u3001\u5bb9\u5668\u542f\u52a8\u65f6\u90fd\u53ef\u7528\u3002 <pre><code>ENV JAVA_HOME=/usr/local/java/jdk-17.0.7\nENV PATH=$PATH:$JAVA_HOME/bin\n\n// \u53ef\u4ee5\u5199\u6210\u4e00\u884c\nENV JAVA_HOME=/usr/local/java/jdk-17.0.7 \\\n    PATH=$PATH:$JAVA_HOME/bin\n</code></pre></p> <p>\uff086\uff09 \u5176\u4ed6\u6307\u4ee4\uff1a</p> \u6307\u4ee4 \u8bf4\u660e <code>WORKDIR</code> \u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\uff08\u7c7b\u4f3c <code>cd</code>\uff09\uff0c\u540e\u7eed <code>RUN</code>/<code>CMD</code> \u5728\u6b64\u76ee\u5f55\u6267\u884c <code>COPY</code> \u4ec5\u590d\u5236\u6587\u4ef6\uff08\u4e0d\u89e3\u538b\uff09\uff0c\u6bd4 <code>ADD</code> \u66f4\u660e\u786e <code>EXPOSE</code> \u58f0\u660e\u5bb9\u5668\u8fd0\u884c\u65f6\u76d1\u542c\u7684\u7aef\u53e3\uff08\u5982 <code>8080</code>\uff09\uff0c\u4ec5\u4e3a\u6587\u6863\u7528\u9014\uff0c\u9700\u914d\u5408 <code>-p</code> \u6620\u5c04 <code>CMD</code> \u5bb9\u5668\u542f\u52a8\u65f6\u9ed8\u8ba4\u6267\u884c\u7684\u547d\u4ee4\uff08\u53ef\u88ab <code>docker run</code> \u540e\u53c2\u6570\u8986\u76d6\uff09 <code>ENTRYPOINT</code> \u5bb9\u5668\u4e3b\u547d\u4ee4\uff0c\u4e0e <code>CMD</code> \u914d\u5408\u4f7f\u7528\uff0c\u4e0d\u6613\u88ab\u8986\u76d6"},{"location":"tools/docker.html#2_2","title":"2. \u6784\u5efa\u8fc7\u7a0b","text":"<p>\u7f16\u5199dockerfile</p> <pre><code># \u4f7f\u7528 CentOS 7 \u4f5c\u4e3a\u57fa\u7840\u955c\u50cf \nFROM centos:7 \n\n# \u6807\u6ce8\u7ef4\u62a4\u8005\uff08\u63a8\u8350\u7528 LABEL\uff09 \nLABEL maintainer=\"atguigu\" \n\n# \u521b\u5efa Java \u5b89\u88c5\u76ee\u5f55 \nRUN mkdir -p /usr/local/java \n\n# \u5c06\u672c\u5730 JDK \u538b\u7f29\u5305\u6dfb\u52a0\u5e76\u81ea\u52a8\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55 ADD jdk-17_linux-x64_bin.tar.gz /usr/local/java/ \n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \nENV JAVA_HOME=/usr/local/java/jdk-17.0.7 \nENV PATH=$PATH:$JAVA_HOME/bin # \n\n\uff08\u53ef\u9009\uff09\u9a8c\u8bc1 Java \u5b89\u88c5 \nRUN java -version\n</code></pre> <p>\u6784\u5efa\u955c\u50cf</p> <pre><code>docker build -t centos7-jdk17 .\n</code></pre> <ul> <li><code>-t</code>\uff1a\u6307\u5b9a\u955c\u50cf\u540d\u79f0\u548c\u6807\u7b7e</li> <li><code>.</code>\uff1a\u8868\u793a\u5f53\u524d\u76ee\u5f55\u4e3a\u6784\u5efa\u4e0a\u4e0b\u6587\uff08Dockerfile \u548c JDK \u5305\u5fc5\u987b\u5728\u6b64\uff09</li> </ul>"},{"location":"tools/docker.html#_2","title":"\u4e00\u4e9b\u5e38\u7528\u5bb9\u5668\u7684\u4e0b\u8f7d\u4e0e\u542f\u52a8","text":""},{"location":"tools/docker.html#mysql","title":"mysql","text":"<pre><code>// \u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\ndocker run -di --name=mysql -p 3306:3306 -v mysql_data:/var/lib/mysql -v mysql_conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=liuqiang mysql:8.0.30\n\n\n// \u4e4b\u540e\uff0c\u8fdb\u5165\u8be5\u5bb9\u5668\uff0c\u8bb0\u5f97\u8bbe\u7f6e\u7f16\u7801\u683c\u5f0f\uff0c\u5426\u5219\u4e2d\u6587\u53ef\u80fd\u4e71\u7801\ndocker exec -it -e LANG=C.UTF-8 mysql bash\n</code></pre>"},{"location":"tools/docker.html#rabbitmq","title":"rabbitmq","text":"<pre><code># -d \u53c2\u6570\uff1a\u540e\u53f0\u8fd0\u884c Docker \u5bb9\u5668\n# --name \u53c2\u6570\uff1a\u8bbe\u7f6e\u5bb9\u5668\u540d\u79f0\n# -p \u53c2\u6570\uff1a\u6620\u5c04\u7aef\u53e3\u53f7\uff0c\u683c\u5f0f\u662f\u201c\u5bbf\u4e3b\u673a\u7aef\u53e3\u53f7:\u5bb9\u5668\u5185\u7aef\u53e3\u53f7\u201d\u30025672\u4f9b\u5ba2\u6237\u7aef\u7a0b\u5e8f\u8bbf\u95ee\uff0c15672\u4f9b\u540e\u53f0\u7ba1\u7406\u754c\u9762\u8bbf\u95ee\n# -v \u53c2\u6570\uff1a\u5377\u6620\u5c04\u76ee\u5f55\n# -e \u53c2\u6570\uff1a\u8bbe\u7f6e\u5bb9\u5668\u5185\u7684\u73af\u5883\u53d8\u91cf\uff0c\u8fd9\u91cc\u6211\u4eec\u8bbe\u7f6e\u4e86\u767b\u5f55RabbitMQ\u7ba1\u7406\u540e\u53f0\u7684\u9ed8\u8ba4\u7528\u6237\u548c\u5bc6\u7801\ndocker run -d \\\n--name rabbitmq \\\n-p 5672:5672 \\\n-p 15672:15672 \\\n-v rabbitmq-plugin:/plugins \\\n-e RABBITMQ_DEFAULT_USER=root \\\n-e RABBITMQ_DEFAULT_PASS=liuqiang \\\nrabbitmq:3.12.0-management\n\n\n// \u7136\u540e\uff0c\u628a\u63d2\u4ef6\u4e0a\u4f20\u5230\u6570\u636e\u5377\u540e\uff0c\u542f\u52a8\u63d2\u4ef6\u5373\u53ef\nrabbitmq-plugins enable rabbitmq_delayed_message_exchange\n</code></pre>"},{"location":"tools/docker.html#nacos","title":"nacos","text":"<pre><code># \u62c9\u53d6\u955c\u50cf\ndocker pull nacos/nacos-server:v2.1.1\n\n# \u521b\u5efa\u5bb9\u5668\ndocker run --name nacos -e MODE=standalone -p 8848:8848 -p 9848:9848 -d nacos/nacos-server:v2.1.1\n\n# nacos2.x\u7684\u7248\u672c\u65b0\u589e\u4e86\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u7684gRpc\u7684\u901a\u8baf\u7aef\u53e3\u53f79848\n</code></pre>"},{"location":"tools/docker.html#redis","title":"redis","text":"<pre><code>1. \u521b\u5efaredis\u6570\u636e\u5b58\u653e\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\n\nmkdir -p /mydata/redis/conf /mydata/redis/data\ntouch /mydata/redis/conf/redis.conf\n\n2. \u8fd0\u884credis\ndocker run -d \\\n--name redis \\\n-p 6379:6379 \\\n-v /root/mydata/redis/data:/data \\\n-v /root/mydata/redis/conf/redis.conf:/etc/redis/redis.conf \\\nredis:7.0.15 redis-server /etc/redis/redis.conf\n\n3. \u8fdb\u5165redis-cli\u6d4b\u8bd5\ndocker exec -it redis redis-cli\n</code></pre>"},{"location":"tools/docker.html#minio","title":"minio","text":"<pre><code>docker pull minio/minio\n\n\ndocker run \\\n-p 9000:9000 \\\n-p 9001:9001 \\\n--name=spzx_minio \\\n-d --restart=always \\\n-e \"MINIO_ROOT_USER=minioadmin\" \\\n-e \"MINIO_ROOT_PASSWORD=minioadmin\" \\\n-v spzx_minio-data:/data \\\n-v spzx_minio-config:/root/.minio \\\nminio/minio server /data --console-address \":9001\"\n</code></pre>"},{"location":"tools/docker.html#nginx","title":"nginx","text":"<pre><code>docker pull nginx\n\ndocker run -d --name=spzx_nginx -p 80:80 -v nginx_conf:/etc/nginx -v nginx_html:/usr/share/nginx/html -v nginx_logs:/var/log/nginx nginx\n</code></pre>"},{"location":"tools/docker.html#sentinel-8080","title":"sentinel \u9ed8\u8ba48080","text":"<pre><code>docker pull bladex/sentinel-dashboard:latest\n\ndocker run --name=sentinel-dashboard --restart=always -p 8858:8858 -d bladex/sentinel-dashboard:latest\n</code></pre>"},{"location":"tools/docker.html#elasticsearch","title":"elasticsearch","text":"<p>\u62c9\u53d6\u955c\u50cf</p> <pre><code>docker pull elasticsearch:8.5.0\n</code></pre> <p>\u5728\u5bbf\u4e3b\u673a\u5efa\u7acb\u8981\u88ab\u6302\u8f7d\u7684\u76ee\u5f55</p> <pre><code>rm -rf /opt/elasticsearch\nmkdir -p /opt/elasticsearch/{config,plugins,data}\n</code></pre> <p>\u53bb github \u4e0b\u8f7d\u4e2d\u6587\u5206\u8bcd\u5668\uff0c\u7136\u540e\u62f7\u8d1d\u5230plugins\u76ee\u5f55\u91cd\u542f es</p> <pre><code>1. \u4e0b\u8f7delasticsearch-analysis-ik-8.5.0.zip\n2. \u4e0a\u4f20\u5230/mydata/elasticsearch/plugins \u76ee\u5f55\u540e\uff0c\u89e3\u538b\uff1aunzip elasticsearch-analysis-ik-8.5.0.zip -d ik-analyzer \u5fc5\u987b\u5220\u9664\u539f\u6765\u7684\u538b\u7f29\u5305elasticsearch-analysis-ik-8.5.0.zip**\n3. \u91cd\u542fes\uff1adocker restart a24eb9941759\n\nyum install -y unzip\nunzip elasticsearch-analysis-ik-8.5.0.zip -d ik-analyzer\nrm -rf elasticsearch-analysis-ik-8.5.0.zip \n</code></pre> <p>\u5236\u4f5c\u914d\u7f6e\u6587\u4ef6</p> <pre><code>cat &lt;&lt;EOF&gt; /opt/elasticsearch/config/elasticsearch.yml\nxpack.security.enabled: true # true\u4e3a\u5f00\u59cb\u5bc6\u7801\u9a8c\u8bc1\nxpack.license.self_generated.type: basic\nxpack.security.transport.ssl.enabled: false  # \u4e0d\u914d\u62a5\u9519\nxpack.security.enrollment.enabled: true\nhttp.host: 0.0.0.0\nEOF\n</code></pre> <p>\u7ed9\u5f53\u524del\u76ee\u5f55\u8bbe\u7f6e\u6743\u9650</p> <pre><code>chmod -R 777 /opt/elasticsearch\n</code></pre> <p>\u542f\u52a8 el</p> <pre><code>docker run --name elasticsearch -p 9200:9200 -p 9300:9300 \\\n--net elastic \\\n--restart=always \\\n-e \"discovery.type=single-node\" \\\n-e ES_JAVA_OPTS=\"-Xms512m -Xmx512m\" \\\n-v /opt/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \\\n-v /opt/elasticsearch/data:/usr/share/elasticsearch/data \\\n-v /opt/elasticsearch/plugins:/usr/share/elasticsearch/plugins \\\n-d elasticsearch:8.5.0\n</code></pre> <p>\u5982\u679c\u8fd0\u884c\u65f6\u63d0\u793aelastic \u672a\u627e\u5230 \u6267\u884c\u8fd9\u4e2a\u547d\u4ee4 \uff1a docker network create elastic</p> <pre><code># \u91cd\u7f6e\u4e0b\u9762\u4e24\u4e2a\u5bc6\u7801\uff0c\u6ce8\u610f\uff1a\u9700\u7b49\u5f85es\u542f\u52a8\ndocker exec -it elasticsearch bin/elasticsearch-reset-password -u elastic  -i   # -i \u8868\u793a\u81ea\u5b9a\u4e49\u5bc6\u7801 \u7ed9java\u5ba2\u6237\u7aef\u7528\u7684\ndocker exec -it elasticsearch bin/elasticsearch-reset-password -u kibana_system -i  # \u7ed9 kibana \u7528\u7684\n\n\u7528\u6237\u540d: elastic \u5bc6\u7801\u53ef\u4ee5\u4f7f\u7528: liuqiang\n</code></pre>"},{"location":"tools/docker.html#portainer","title":"portainer","text":"<pre><code>\u6b65\u9aa4 1\uff1a\u62c9\u53d6 Portainer \u82f1\u6587\u7248\ndocker pull portainer/portainer-ce:latest\n\n\u6b65\u9aa4 2\uff1a\u542f\u52a8 Portainer\ndocker run -d --name portainer -p 19000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /app/portainer_data:/data --restart always --privileged=true portainer/portainer-ce:latest\n\n\u6b65\u9aa4 3\uff1a\u8bbf\u95ee Portainer Web \u754c\u9762\nhttp://115.190.231.171:19000/\n</code></pre>"},{"location":"tools/docker.html#zipkin","title":"zipkin","text":"<pre><code>docker pull openzipkin/zipkin\n\ndocker run --name zipkin --restart=always -d -p 9411:9411 openzipkin/zipkin\n</code></pre>"},{"location":"tools/docker.html#canal","title":"canal","text":""},{"location":"tools/docker.html#mondb","title":"mondb","text":"<p>\u76f4\u63a5\u62c9\u53d6\u955c\u50cf</p> <pre><code>docker pull mongo:7.0.0\n</code></pre> <p>\u521b\u5efa\u5bbf\u4e3b\u673a\u4e0a\u7684\u6302\u8f7d\u76ee\u5f55</p> <pre><code>rm -rf /opt/mongo\nmkdir -p /opt/mongo/data/db\n</code></pre> <p>\u521b\u5efa\u5e76\u542f\u52a8\u5bb9\u5668</p> <pre><code>docker run -d --restart=always -p 27017:27017 --name mongo -v /opt/mongo/data/db:/data/db mongo:7.0.0\n</code></pre> <p>\u8fde\u63a5mongosh</p> <pre><code>docker exec -it mongo mongosh\n</code></pre> <p>\u65ad\u5f00\u8fde\u63a5\uff08\u5728linux\u4e2d\uff09</p> <pre><code>exit \n</code></pre>"},{"location":"tools/docker.html#docker-compose","title":"docker compose","text":"<p>\u6279\u91cf\u7ba1\u7406\u5bb9\u5668, \u662fdocker\u5185\u7f6e\u7684\u63d2\u4ef6</p> <pre><code># \u542f\u52a8\u5bb9\u5668(\u5982\u679c\u4e0d\u5b58\u5728\u5bb9\u5668\u5c31\u521b\u5efa\u3001\u5b58\u5728\u5219\u4fee\u6539)\ndocker compose -f docker-compose.yml up -d\n\n# \u5220\u9664\u6240\u6709\u5bb9\u5668\ndocker compose -f docker-compose.yml down\n\n# \u505c\u6b62\u6240\u6709\u5bb9\u5668\ndocker compose -f docker-compose.yml stop\n\n# \u542f\u52a8\u6240\u6709\u5bb9\u5668\ndocker compose -f docker-compose.yml start\n\n# \u91cd\u542f\u6240\u6709\u5bb9\u5668\ndocker compose -f docker-compose.yml restart\n</code></pre> <p>compose \u7ba1\u7406\u591a\u4e2a\u5bb9\u5668\u7684 yml \u914d\u7f6e <pre><code>\u5bb9\u5668\u7f16\u6392\uff1adocker-compose.yml\n---------------------------------------------\nservices:\n  redis:\n    image: redis:7.0.10\n    container_name: redis001\n    ports:\n      - \"6399:6379\"\n    volumes: \n      - redis-data:/data\n  mysql:\n    container_name: mysql001\n    image: mysql:8.0.30\n    ports:\n      - \"3399:3306\"\n    volumes:\n      - mysql_data:/var/lib/mysql\n      - mysql_conf:/etc/mysql\n    privileged: true\n    environment:\n      - \"MYSQL_ROOT_PASSWORD=1234\"\n  ebuy:\n    container_name: ebuy001\n    image: ebuy-docker:v2.0\n    ports:\n      - \"8099:8081\"\nvolumes:\n  redis-data: {}\n  mysql_data: {}\n  mysql_conf: {}\n---------------------------------------------\n</code></pre></p>"},{"location":"tools/git.html","title":"git","text":"<p>\u65e5\u671f\uff1a2025\u5e7411\u67083\u65e5</p>"},{"location":"tools/git.html#1-git","title":"1. Git \u7684\u6982\u5ff5\u548c\u4f5c\u7528","text":"<p>Git \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u7cfb\u7edf\uff0c\u7528\u4e8e\u8ddf\u8e2a\u6587\u4ef6\u7684\u53d8\u66f4\u5386\u53f2\uff0c\u652f\u6301\u591a\u4eba\u534f\u4f5c\u5f00\u53d1\u3002</p>"},{"location":"tools/git.html#2-git","title":"2. git \u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u5de5\u4f5c\u533a \u2192 \u6682\u5b58\u533a \u2192 \u672c\u5730\u4ed3\u5e93</p> <ul> <li>\u5de5\u4f5c\u533a\uff1a\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u6240\u5728\u76ee\u5f55\u3002</li> <li>\u6682\u5b58\u533a\uff1a\u4f7f\u7528 git add \u547d\u4ee4\u5c06\u4fee\u6539\u52a0\u5165\u6682\u5b58\u533a\uff0c\u51c6\u5907\u63d0\u4ea4\u3002</li> <li>\u672c\u5730\u4ed3\u5e93\uff1a\u4f7f\u7528 git commit \u5c06\u6682\u5b58\u533a\u5185\u5bb9\u63d0\u4ea4\u5230\u672c\u5730\u7248\u672c\u5e93\u3002</li> </ul> <p> </p>"},{"location":"tools/git.html#3-git","title":"3. git \u7684\u5e38\u7528\u547d\u4ee4","text":"<p>\u914d\u7f6e git \u7684\u8d26\u6237\u4e0e\u90ae\u7bb1</p> <pre><code>git config -- user.name liutianba\ngit config -- user.email liutianba7@163.com\n</code></pre> <p>\u521d\u59cb\u5316\u4ed3\u5e93</p> <pre><code>git init\n</code></pre> <p>\u5c06\u5de5\u4f5c\u533a\u7684\u6587\u4ef6\u52a0\u5165\u5230\u6682\u5b58\u533a</p> <pre><code>git add filename\ngit add . # \u5c06\u5de5\u4f5c\u533a\u4e0d\u518d\u6682\u5b58\u533a\u7684\u6587\u4ef6\u5168\u90e8\u52a0\u5165\u5230\u6682\u5b58\u533a\ngit status # \u67e5\u770b\u6587\u4ef6\u72b6\u6001\uff08\u5728\u4e0d\u5728\u7f13\u5b58\u533a\uff09\n</code></pre> <p>\u67e5\u770b\u672c\u5730\u4ed3\u5e93\u4fe1\u606f</p> <pre><code>git log # \u67e5\u770b\u63d0\u4ea4\u8bb0\u5f55\ngit reflog # \u67e5\u770b\u63d0\u4ea4\u8bb0\u5f55\uff08\u7cbe\u7b80\u7248\uff0c\u53ef\u9009\u9879 -n x)\n</code></pre> <p>\u7248\u672c\u56de\u6eda</p> <pre><code>git reset -- hard \u7248\u672c\u53f7\n\u7ec6\u8282\uff1agit \u56de\u6eda\u7684\u5934\u6307\u9488\u4e0d\u4f1a\u76f4\u63a5\u79fb\u56de\u53bb\uff0c\u8fd8\u662f\u5f80\u524d\u8d70\uff0c\u65b0\u7ed3\u70b9\u662f\u4e4b\u524d\u56de\u6eda\u7248\u672c\u7684\u4e00\u4e2a\u590d\u5236\n</code></pre>"},{"location":"tools/git.html#4-git","title":"4. git \u5206\u652f","text":"<p>Git \u5206\u652f\u7ba1\u7406\u662f Git \u5f3a\u5927\u529f\u80fd\u4e4b\u4e00\uff0c\u80fd\u591f\u8ba9\u591a\u4e2a\u5f00\u53d1\u4eba\u5458\u5e76\u884c\u5de5\u4f5c\uff0c\u5f00\u53d1\u65b0\u529f\u80fd\u3001\u4fee\u590d bug \u6216\u8fdb\u884c\u5b9e\u9a8c\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u4e3b\u4ee3\u7801\u5e93\u3002\u51e0\u4e4e\u6bcf\u4e00\u79cd\u7248\u672c\u63a7\u5236\u7cfb\u7edf\u90fd\u4ee5\u67d0\u79cd\u5f62\u5f0f\u652f\u6301\u5206\u652f\uff0c\u4e00\u4e2a\u5206\u652f\u4ee3\u8868\u4e00\u6761\u72ec\u7acb\u7684\u5f00\u53d1\u7ebf\u3002</p> <p>\u4f7f\u7528\u5206\u652f\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u4ece\u5f00\u53d1\u4e3b\u7ebf\u4e0a\u5206\u79bb\u5f00\u6765\uff0c\u7136\u540e\u5728\u4e0d\u5f71\u54cd\u4e3b\u7ebf\u7684\u540c\u65f6\u7ee7\u7eed\u5de5\u4f5c\u3002</p> <p> </p> <p> </p> <p>\u521b\u5efa\u5206\u652f</p> <pre><code>git branch \u5206\u652f\u540d\ngit branch -v // \u67e5\u770b\u5206\u652f\n</code></pre> <p>\u5207\u6362\u5206\u652f</p> <pre><code>git checkout \u5206\u652f\u540d\ngit checkout -b \u5206\u652f\u540d // \u5207\u6362\u5e76\u521b\u5efa\u5206\u652f\n</code></pre> <p>\u5408\u5e76\u5206\u652f: \u4e00\u65e6\u67d0\u5206\u652f\u6709\u4e86\u72ec\u7acb\u5185\u5bb9\uff0c\u4f60\u7ec8\u7a76\u4f1a\u5e0c\u671b\u5c06\u5b83\u5408\u5e76\u56de\u5230\u4f60\u7684\u4e3b\u5206\u652f\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5c06\u4efb\u4f55\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u4e2d\u53bb\uff1a</p> <pre><code>git merge \u5206\u652f\u540d //\u628a\u6307\u5b9a\u7684\u5206\u652f\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\n</code></pre> <p>\u5220\u9664\u5206\u652f</p> <pre><code>git branch -d \u5206\u652f\u540d\n</code></pre>"},{"location":"tools/git.html#5-git","title":"5. git \u51b2\u7a81","text":"<p>\u5f53\u5728\u5408\u5e76\u5206\u652f\u65f6\uff0c\u51fa\u73b0\u540c\u540d\u6587\u4ef6\u540c\u884c\u5185\u5bb9\u4e0d\u540c\u7684\u8bdd\uff0c\u5c31\u4f1a\u51fa\u73b0\u5408\u5e76\u51b2\u7a81\uff0c\u800c\u89e3\u51b3\u65b9\u5f0f\u5c31\u662f\u53bb\u624b\u52a8\u7684\u9009\u62e9\u8981\u54ea\u4e2a\u5206\u652f\u4e0a\u7684\u5185\u5bb9\uff0c\u7136\u540e\u518d\u53bb\u5c06\u5f53\u524d\u5de5\u4f5c\u533a\u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\u5373\u53ef\u3002</p> <pre><code>git merge xxx\ngit add .\ngit commit -m \"\u89e3\u51b3\u5408\u5e76\u51b2\u7a81\"\n</code></pre>"},{"location":"tools/git.html#6-git","title":"6. git \u8fdc\u7a0b\u4ed3\u5e93","text":"<p>\u5728\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\uff0c\u63a8\u9001\u548c\u62c9\u53bb\u662f\u4ee5\u5206\u652f\u4e3a\u5355\u4f4d\u7684</p>"},{"location":"tools/git.html#61-ssh","title":"6.1 Ssh\u914d\u7f6e","text":"<p>\u4f7f\u7528 SSH \u534f\u8bae\u8fde\u63a5 Git \u8fdc\u7a0b\u4ed3\u5e93\uff0c\u53ef\u5b9e\u73b0\u514d\u5bc6\u63a8\u9001/\u62c9\u53d6\u4ee3\u7801\uff0c\u5e76\u63d0\u5347\u5b89\u5168\u6027\u3002\u6d41\u7a0b\uff1a\u6bcf\u6b21\u53bb\u8bbf\u95ee\u8fdc\u7a0b\u4ed3\u5e93\u65f6\uff0cgit \u90fd\u4f1a\u4ece\u6307\u5b9a\u4f4d\u7f6e\u5e26\u7740\u5bc6\u94a5\u8fc7\u53bb\uff0c\u800c\u8fd9\u4e2a\u4f4d\u7f6e\u53ef\u4ee5\u81ea\u5df1\u5236\u5b9a\uff0c\u5728.ssh\u7684\u914d\u7f6e\u6587\u4ef6\u4e0b\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b8c\u6210\uff1a\u4e0d\u540c\u8fdc\u7a0b\u4ed3\u5e93\u6307\u5b9a\u7684\u5bc6\u94a5\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u751f\u6210 SSH \u5bc6\u94a5\u5bf9</p> <pre><code>ssh-keygen -t ed25519 -C \"your_email@example.com\n</code></pre> <p>\u542f\u52a8 SSH \u4ee3\u7406\u5e76\u6dfb\u52a0\u79c1\u94a5</p> <pre><code># \u542f\u52a8 ssh-agent\neval \"$(ssh-agent -s)\" \n# \u5c06\u79c1\u94a5\u6dfb\u52a0\u5230 \nssh-agent ssh-add ~/.ssh/id_ed25519\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u628a\u516c\u94a5\u653e\u5230\u8fdc\u7a0b\u4ed3\u5e93\u4e86</p>"},{"location":"tools/git.html#62-git","title":"6.2 git \u8fdc\u7a0b\u76f8\u5173\u547d\u4ee4","text":"<p>\u5173\u8054\u548c\u65ad\u5f00\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>git remote add \u522b\u540d \u8fdc\u7a0b\u4ed3\u5e93\u7684 ssh | https \u5730\u5740\ngit remote -v # \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\u4fe1\u606f\ngit remote remove \u522b\u540d # \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\n</code></pre> <p>\u63a8\u9001\u6570\u636e\u5230\u8fdc\u7a0b\u4ed3\u5e93</p> <pre><code>git push \u522b\u540d \u672c\u5730\u5206\u652f\u540d:\u8fdc\u7a0b\u5206\u652f\u540d # \u6ca1\u5199\u8fdc\u7a0b\u5206\u652f\u540d\u5219\u5728\u8fdc\u7a0b\u4ed3\u5e93\u5efa\u7acb\u4e00\u4e2a\u540c\u540d\u7684\u5206\u652f    \n</code></pre> <p>\u514b\u9686\u8fdc\u7a0b\u4ed3\u5e93\u5185\u5bb9</p> <pre><code>git clone \u8fdc\u7a0b\u4ed3\u5e93\u5730\u5740\uff081.\u521b\u5efa\u8fdc\u7a0b\u4ed3\u5e93\u540c\u540d\u7684\u4e00\u4e2a\u6587\u4ef6\u5939 2.\u521d\u59cb\u5316\u4ed3\u5e93 3.\u5173\u8054\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u9ed8\u8ba4\u540d\u5b57\u4e3a origin\uff0c4.\u62c9\u53d6\u73b0\u6709\u8fdc\u7a0b\u4ed3\u5e93\u5185\u5bb9\uff09\n</code></pre> <p>\u62c9\u53bb\u8fdc\u7a0b\u4ed3\u5e93\u5185\u5bb9</p> <pre><code>git pull \u522b\u540d \u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u7684\u5206\u652f\u540d\n</code></pre>"},{"location":"tools/git.html#63","title":"6.3 \u914d\u7f6e\u63a8\u9001\u5ffd\u7565\u6587\u4ef6","text":"<p>java\u65e5\u5e38\u9879\u76ee\u6a21\u677f\uff1a</p> <pre><code># Compiled class file\n*.class\n\n# Log file\n*.log\n\n# BlueJ files\n*.ctxt\n\n# Mobile Tools for Java (J2ME)\n.mtj.tmp/\n\n# Package Files #\n*.jar\n*.war\n*.nar\n*.ear\n*.zip\n*.tar.gz\n*.rar\n\n# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml\nhs_err_pid*\n\n# IDE and Build Files\n.classpath\n.project\n.settings\ntarget\n.idea\n*.iml\n</code></pre> <p>\u5168\u5c40\u914d\u7f6e\uff1a\u9996\u5148\uff0c\u5728\u4efb\u610f\u4f4d\u7f6e\u5199\u4e00\u4e2axxx.ignore\uff0c\u7136\u540e\uff0c\u5728git\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5e94\u7528\u8be5\u6587\u4ef6\u5373\u53ef</p> <pre><code>[core]\n    excludesfile = **/xxx.ignore\n</code></pre>"}]}